-------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /home/research/ca_ed_lab/users/chesun/gsr/caschls/log/share/factor
> analysis/indexregwithdemo.smcl
  log type:  smcl
 opened on:  27 Nov 2022, 17:13:55

. 
. 
. 
. 
. /////////////////////////////////////////////////////////////////////////////
> ///
> /* both complete case analysis and imputed data  */
. 
. local datatype compcase imputed

. 
. foreach type of local datatype {
  2.   use $projdir/dta/allsvyfactor/categoryindex/`type'categoryindex, clear
  3. 
.   //merge with pooled average enrollment characteristics over 1415-1718 const
> ructed from Matt Naven's data
.   //keep only merged observations or unmatched master observations
.   merge 1:1 cdscode using $projdir/dta/schoolchar/schlcharpooledmeans, keep(1
>  3) nogen
  4. 
. 
.   merge 1:1 cdscode using $projdir/dta/schoolchar/testscorecontrols, keep(1 3
> ) nogen
  5. 
. 
. 
. 
.   // local macro for index vars
.   local indexvars climateindex qualityindex supportindex
  6. 
.   //local macro for demographics vars
.   local demovars minorityenrprop maleenrprop freemealprop elprop maleteachpro
> p minoritystaffprop newteachprop fullcredprop fteteachperstudent fteadminpers
> tudent fteserviceperstudent
  7. 
.   //local macro for SBAC test scores
.   local scorevars avg_gr6math_zscore avg_gr8ela_zscore
  8. 
.   //log transform the demo vars, adding 0.0000001 does not affect interpretat
> ion because it is small compared to variable values
.   foreach i of local demovars {
  9.     gen ln_`i' = log(`i'+ 0.0000001)
 10.   }
 11. 
. /*
>   foreach i of local demovars {
>     sum `i'
>     gen z_`i' = (`i' - r(mean))/r(sd)
>   }
> 
>   local zdemovars z_minorityenrprop z_maleenrprop z_freemealprop z_elprop z_m
> aleteachprop z_minoritystaffprop z_newteachprop z_fullcredprop z_fteteachpers
> tudent z_fteadminperstudent z_fteserviceperstudent
>  */
. 
. 
. 
.   //-------------------------------------------------------------
.   // bivariate regressions va z scores on index z scores and demographics con
> trols
.   // regress va vars on index vars, have one file for each index to save N in
>  the dataset
. 
.    /* 1. base sample base contro, no peer effects
>    2. leave out score - sibling - acs sample, kitchen sink controls, peer eff
> ects */
.   //-------------------------------------------------------------
. 
.   // macros for different VA estimates to be used in each sample
.   local b_sample_controls b
 12.   local las_sample_controls las
 13. 
. 
. 
. 
.   foreach va_outcome in ela math enr enr_2year enr_4year dk_enr dk_enr_2year 
> dk_enr_4year {
 14.     foreach sample in b las {
 15.       foreach control of local `sample'_sample_controls {
 16.         //macro for whether to use the VA estimates with peer effects
.         if "`sample'" == "b" {
 17.           local peer
 18.           local peer_yn "N"
 19.         }
 20.         if "`sample'" == "las" {
 21.           local peer "_p"
 22.           local peer_yn "Y"
 23.         }
 24. 
. 
.         foreach index of local indexvars {
 25.           reg va_`va_outcome'_`sample'_sp_`control'_ct`peer' z_`index' ln_
> * `scorevars'
 26. 
.           regsave using $projdir/out/dta/factor/indexregwcontrols/`type'/va_`
> va_outcome'_`sample'_sp_`control'_ct`peer'_`index' ///
>             , replace ///
>             table(va_`va_outcome'_`sample'_sp_`control'_ct`peer', format(%7.2
> f) parentheses(stderr) asterisk()) ///
>             addlabel(va, `va_outcome', sample, `sample', control, `control', 
> peer, `peer_yn')
 27.         }
 28.       }
 29.     }
 30.   }
 31. 
. 
. 
. 
.   //save dataset
.   compress
 32.   save $projdir/dta/allsvyfactor/categoryindex/`type'indexwithdemo, replac
> e
 33. 
. 
. 
. set trace on
 34. 
.   //merge the va index reg datasets to produce combined table
.   local merge_command use
 35.   local merge_options clear
 36. 
.   foreach index of local indexvars {
 37.     foreach va_outcome in ela math enr enr_2year enr_4year dk_enr dk_enr_2
> year dk_enr_4year {
 38.       di "va: `va_outcome'"
 39.       foreach sample in b las {
 40.         di "sample: `sample'"
 41.         foreach control of local `sample'_sample_controls {
 42.           //macro for whether to use the VA estimates with peer effects
.           if "`sample'" == "b" {
 43.             local peer
 44.             local peer_yn "N"
 45.           }
 46.           if "`sample'" == "las" {
 47.             local peer "_p"
 48.             local peer_yn "Y"
 49.           }
 50. 
.           di "peer controls in VA estimates (empty if no peer, _p if peer): `
> peer'"
 51. 
. 
.           `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va
> _`va_outcome'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
 52. 
.           local merge_command "merge 1:1 var using"
 53.           local merge_options nogen
 54.         }
 55.       }
 56.     }
 57. 
.     save $projdir/out/dta/factor/indexregwcontrols/`type'/`index'_va_`type're
> gs_wcontrols, replace
 58.     export excel using $projdir/out/xls/factor/indexregwcontrols/`type'/`i
> ndex'_va_`type'regs_wcontrols, replace firstrow(variables)
 59.   }
 60. 
. set trace off
 61. 
. }
(parent pooled (over years) dataset ready for analysis with stats and response 
> ra)

    Result                      Number of obs
    -----------------------------------------
    Not matched                            18
        from master                        18  
        from using                          0  

    Matched                             1,856  
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                           710
        from master                       710  
        from using                          0  

    Matched                             1,164  
    -----------------------------------------
(18 missing values generated)
(19 missing values generated)
(18 missing values generated)
(18 missing values generated)
(18 missing values generated)
(19 missing values generated)
(18 missing values generated)
(18 missing values generated)
(18 missing values generated)
(18 missing values generated)
(18 missing values generated)

      Source |       SS           df       MS      Number of obs   =       400
-------------+----------------------------------   F(14, 385)      =      3.81
       Model |  45.4046156        14  3.24318683   Prob > F        =    0.0000
    Residual |  327.880241       385   .85163699   R-squared       =    0.1216
-------------+----------------------------------   Adj R-squared   =    0.0897
       Total |  373.284857       399  .935551019   Root MSE        =    .92284

------------------------------------------------------------------------------
va_ela_b_s~t | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |   .2471202    .063632     3.88   0.000     .1220106    .3722298
ln_min~rprop |   .1613564   .1718915     0.94   0.348    -.1766072    .4993201
ln_maleenr~p |  -.1878752   .6236533    -0.30   0.763    -1.414068    1.038317
ln_freemea~p |    .184528    .142887     1.29   0.197    -.0964085    .4654645
   ln_elprop |   .0484795    .029709     1.63   0.104    -.0099328    .1068917
ln_maletea~p |  -.0436985    .071824    -0.61   0.543    -.1849148    .0975179
ln_min~fprop |  -.0143635   .0342513    -0.42   0.675    -.0817064    .0529795
ln_newteac~p |   .1047379   .0368947     2.84   0.005     .0321976    .1772783
ln_fullcre~p |   .7438927   1.470604     0.51   0.613    -2.147528    3.635313
ln_fteteac~t |  -.0021549   .3042716    -0.01   0.994     -.600397    .5960872
ln_fteadmi~t |  -.0262065   .0572794    -0.46   0.648     -.138826     .086413
ln_fteserv~t |  -.0415671   .0314643    -1.32   0.187    -.1034304    .0202962
avg_gr6mat~e |   .0410338    .382774     0.11   0.915    -.7115552    .7936228
avg_gr8ela~e |   .8343335   .3980467     2.10   0.037     .0517161    1.616951
       _cons |   .0649665   1.051377     0.06   0.951    -2.002192    2.132125
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_ela_b_sp_b_ct_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       292
-------------+----------------------------------   F(14, 277)      =      2.50
       Model |  31.4665971        14  2.24761408   Prob > F        =    0.0023
    Residual |  249.158729       277  .899489995   R-squared       =    0.1121
-------------+----------------------------------   Adj R-squared   =    0.0673
       Total |  280.625326       291  .964348199   Root MSE        =    .94841

------------------------------------------------------------------------------
va_ela_b_s~t | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |   .2448403     .07607     3.22   0.001     .0950915    .3945891
ln_min~rprop |   .0651815   .2037882     0.32   0.749    -.3359889     .466352
ln_maleenr~p |   .0324913   .7368372     0.04   0.965    -1.418021    1.483003
ln_freemea~p |   .2227489   .1684718     1.32   0.187    -.1088988    .5543966
   ln_elprop |   .0057538   .0376075     0.15   0.879    -.0682791    .0797866
ln_maletea~p |  -.0835279   .0918732    -0.91   0.364    -.2643863    .0973305
ln_min~fprop |   .0170774   .0412461     0.41   0.679    -.0641182     .098273
ln_newteac~p |    .143364   .0583619     2.46   0.015     .0284748    .2582531
ln_fullcre~p |  -.9213399   2.070007    -0.45   0.657    -4.996284    3.153604
ln_fteteac~t |  -.1661155   .3891413    -0.43   0.670    -.9321655    .5999346
ln_fteadmi~t |  -.0026648   .0613545    -0.04   0.965    -.1234451    .1181155
ln_fteserv~t |  -.0206395   .0618269    -0.33   0.739    -.1423497    .1010707
avg_gr6mat~e |  -.0655979   .4698234    -0.14   0.889    -.9904759    .8592801
avg_gr8ela~e |   .8897269   .4848841     1.83   0.068    -.0647991    1.844253
       _cons |  -.1125321   1.263246    -0.09   0.929    -2.599315     2.37425
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_ela_b_sp_b_ct_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       382
-------------+----------------------------------   F(14, 367)      =      3.79
       Model |  44.3608028        14  3.16862877   Prob > F        =    0.0000
    Residual |  307.135721       367  .836882074   R-squared       =    0.1262
-------------+----------------------------------   Adj R-squared   =    0.0929
       Total |  351.496524       381  .922563055   Root MSE        =    .91481

------------------------------------------------------------------------------
va_ela_b_s~t | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |   .2327312   .0641286     3.63   0.000     .1066255    .3588369
ln_min~rprop |   .1088471   .1766467     0.62   0.538    -.2385196    .4562138
ln_maleenr~p |  -.3875961   .6286185    -0.62   0.538    -1.623742    .8485501
ln_freemea~p |   .2000095    .144459     1.38   0.167    -.0840618    .4840808
   ln_elprop |  -.0049413   .0317306    -0.16   0.876    -.0673379    .0574554
ln_maletea~p |  -.0377745   .0735332    -0.51   0.608    -.1823739    .1068248
ln_min~fprop |   .0228053   .0375765     0.61   0.544    -.0510869    .0966975
ln_newteac~p |    .086038   .0367638     2.34   0.020     .0137439     .158332
ln_fullcre~p |   1.016329   1.498162     0.68   0.498     -1.92973    3.962389
ln_fteteac~t |    .351048   .3028031     1.16   0.247    -.2443988    .9464947
ln_fteadmi~t |  -.0161795   .0571947    -0.28   0.777      -.12865    .0962911
ln_fteserv~t |  -.0554922   .0333945    -1.66   0.097    -.1211609    .0101764
avg_gr6mat~e |  -.0792001   .3859529    -0.21   0.838    -.8381568    .6797566
avg_gr8ela~e |   1.029438   .4015902     2.56   0.011     .2397313    1.819145
       _cons |   .7397241   1.056042     0.70   0.484    -1.336928    2.816376
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_ela_b_sp_b_ct_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       385
-------------+----------------------------------   F(14, 370)      =      1.22
       Model |  15.6582646        14  1.11844747   Prob > F        =    0.2606
    Residual |  340.214509       370  .919498674   R-squared       =    0.0440
-------------+----------------------------------   Adj R-squared   =    0.0078
       Total |  355.872774       384  .926752015   Root MSE        =     .9589

------------------------------------------------------------------------------
va_ela_las.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |   .1603047   .0679122     2.36   0.019     .0267624    .2938471
ln_min~rprop |  -.1084739   .1949647    -0.56   0.578    -.4918518     .274904
ln_maleenr~p |   .5257318    .675234     0.78   0.437    -.8020458    1.853509
ln_freemea~p |       .213    .153288     1.39   0.166    -.0884248    .5144249
   ln_elprop |   .0086688    .041166     0.21   0.833      -.07228    .0896175
ln_maletea~p |  -.0648659   .0807966    -0.80   0.423     -.223744    .0940123
ln_min~fprop |  -.0111726   .0431323    -0.26   0.796    -.0959878    .0736425
ln_newteac~p |   .0865436   .0473623     1.83   0.068    -.0065895    .1796766
ln_fullcre~p |   .5203534   1.605647     0.32   0.746    -2.636985    3.677691
ln_fteteac~t |   .0581936   .3738543     0.16   0.876    -.6769519    .7933392
ln_fteadmi~t |  -.0098672   .0801435    -0.12   0.902     -.167461    .1477266
ln_fteserv~t |   .0142398   .0432357     0.33   0.742    -.0707788    .0992584
avg_gr6mat~e |  -.0274919   .4216536    -0.07   0.948    -.8566299    .8016461
avg_gr8ela~e |   .4358192   .4477939     0.97   0.331    -.4447209    1.316359
       _cons |   .8448524   1.182885     0.71   0.476    -1.481168    3.170872
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_ela_las_sp_las_ct_p_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       284
-------------+----------------------------------   F(14, 269)      =      1.43
       Model |  19.2459804        14  1.37471288   Prob > F        =    0.1368
    Residual |  257.821441       269  .958444019   R-squared       =    0.0695
-------------+----------------------------------   Adj R-squared   =    0.0210
       Total |  277.067422       283  .979036825   Root MSE        =      .979

------------------------------------------------------------------------------
va_ela_las.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |   .2452853   .0824837     2.97   0.003     .0828896    .4076811
ln_min~rprop |  -.1577018   .2292356    -0.69   0.492    -.6090259    .2936223
ln_maleenr~p |   .5506635   .7920886     0.70   0.488    -1.008818    2.110145
ln_freemea~p |     .22681   .1759012     1.29   0.198    -.1195083    .5731282
   ln_elprop |   .0338575   .0459042     0.74   0.461    -.0565198    .1242348
ln_maletea~p |   -.022184   .0962477    -0.23   0.818    -.2116786    .1673105
ln_min~fprop |   -.023405   .0483863    -0.48   0.629    -.1186689     .071859
ln_newteac~p |   .1044684    .060707     1.72   0.086    -.0150528    .2239896
ln_fullcre~p |  -2.433602   2.223793    -1.09   0.275    -6.811855     1.94465
ln_fteteac~t |   .1146983   .4357852     0.26   0.793    -.7432853    .9726818
ln_fteadmi~t |  -.0151999   .0860351    -0.18   0.860    -.1845877    .1541878
ln_fteserv~t |   -.059284   .0648627    -0.91   0.362    -.1869871    .0684191
avg_gr6mat~e |    -.13277   .5070772    -0.26   0.794    -1.131115    .8655748
avg_gr8ela~e |   .5187411    .534934     0.97   0.333    -.5344487    1.571931
       _cons |    .666201   1.370208     0.49   0.627    -2.031494    3.363896
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_ela_las_sp_las_ct_p_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       369
-------------+----------------------------------   F(14, 354)      =      1.89
       Model |   24.155947        14  1.72542478   Prob > F        =    0.0261
    Residual |   322.86723       354  .912054323   R-squared       =    0.0696
-------------+----------------------------------   Adj R-squared   =    0.0328
       Total |  347.023177       368  .942997765   Root MSE        =    .95502

------------------------------------------------------------------------------
va_ela_las.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |   .2739081   .0750733     3.65   0.000     .1262624    .4215538
ln_min~rprop |  -.1294287   .2027627    -0.64   0.524    -.5281997    .2693422
ln_maleenr~p |   .5055008   .6851463     0.74   0.461     -.841968     1.85297
ln_freemea~p |   .1865031   .1548004     1.20   0.229    -.1179411    .4909472
   ln_elprop |   .0122386   .0421465     0.29   0.772    -.0706503    .0951276
ln_maletea~p |  -.0586449   .0856588    -0.68   0.494    -.2271091    .1098193
ln_min~fprop |  -.0268629   .0456512    -0.59   0.557    -.1166446    .0629187
ln_newteac~p |   .0927438   .0473396     1.96   0.051    -.0003584    .1858459
ln_fullcre~p |   .4109726   1.642303     0.25   0.803    -2.818924     3.64087
ln_fteteac~t |   .1933852   .3747945     0.52   0.606    -.5437186    .9304891
ln_fteadmi~t |  -.0387016   .0811119    -0.48   0.634    -.1982235    .1208202
ln_fteserv~t |  -.0245922   .0470824    -0.52   0.602    -.1171885    .0680042
avg_gr6mat~e |  -.1190668   .4237107    -0.28   0.779    -.9523734    .7142399
avg_gr8ela~e |   .5294428   .4480932     1.18   0.238    -.3518166    1.410702
       _cons |   .7084395    1.19138     0.59   0.552    -1.634634    3.051513
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_ela_las_sp_las_ct_p_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       400
-------------+----------------------------------   F(14, 385)      =     10.84
       Model |  101.163804        14    7.225986   Prob > F        =    0.0000
    Residual |   256.59383       385   .66647748   R-squared       =    0.2828
-------------+----------------------------------   Adj R-squared   =    0.2567
       Total |  357.757634       399  .896635674   Root MSE        =    .81638

------------------------------------------------------------------------------
va_math_b_~t | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |   .2548806   .0562912     4.53   0.000     .1442039    .3655573
ln_min~rprop |   .2571662   .1520617     1.69   0.092    -.0418092    .5561416
ln_maleenr~p |   .8187979   .5517072     1.48   0.139    -.2659384    1.903534
ln_freemea~p |   -.236499   .1264032    -1.87   0.062     -.485026    .0120281
   ln_elprop |   .0685421   .0262817     2.61   0.009     .0168684    .1202158
ln_maletea~p |  -.0592033   .0635382    -0.93   0.352    -.1841287     .065722
ln_min~fprop |   .0103531      .0303     0.34   0.733     -.049221    .0699272
ln_newteac~p |   .0742047   .0326384     2.27   0.024     .0100327    .1383766
ln_fullcre~p |   3.731756   1.300952     2.87   0.004     1.173896    6.289616
ln_fteteac~t |   .4020845   .2691702     1.49   0.136     -.127143    .9313121
ln_fteadmi~t |  -.1048936   .0506715    -2.07   0.039    -.2045211   -.0052662
ln_fteserv~t |   .0066369   .0278345     0.24   0.812    -.0480897    .0613635
avg_gr6mat~e |  -.4297198   .3386163    -1.27   0.205    -1.095488    .2360489
avg_gr8ela~e |   1.168954   .3521271     3.32   0.001     .4766211    1.861287
       _cons |   1.683613   .9300874     1.81   0.071    -.1450733      3.5123
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_math_b_sp_b_ct_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       292
-------------+----------------------------------   F(14, 277)      =      8.37
       Model |  78.7414004        14  5.62438574   Prob > F        =    0.0000
    Residual |   186.13783       277  .671977724   R-squared       =    0.2973
-------------+----------------------------------   Adj R-squared   =    0.2618
       Total |   264.87923       291  .910237904   Root MSE        =    .81974

------------------------------------------------------------------------------
va_math_b_~t | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |   .2591004   .0657496     3.94   0.000     .1296681    .3885328
ln_min~rprop |   .2058761   .1761402     1.17   0.243    -.1408672    .5526195
ln_maleenr~p |   .1622264     .63687     0.25   0.799    -1.091494    1.415946
ln_freemea~p |  -.2187472   .1456151    -1.50   0.134       -.5054    .0679057
   ln_elprop |   .0536703   .0325053     1.65   0.100    -.0103184    .1176591
ln_maletea~p |  -.0876077   .0794087    -1.10   0.271     -.243929    .0687135
ln_min~fprop |   .0408373   .0356502     1.15   0.253    -.0293425     .111017
ln_newteac~p |   .0798411   .0504439     1.58   0.115    -.0194609    .1791432
ln_fullcre~p |   4.020818   1.789168     2.25   0.025     .4987238    7.542911
ln_fteteac~t |   .6551895   .3363463     1.95   0.052      -.00693    1.317309
ln_fteadmi~t |  -.0866527   .0530305    -1.63   0.103    -.1910467    .0177413
ln_fteserv~t |   .0373443   .0534388     0.70   0.485    -.0678534    .1425421
avg_gr6mat~e |  -.5013542   .4060822    -1.23   0.218    -1.300753     .298045
avg_gr8ela~e |   1.275538   .4190996     3.04   0.003      .450513    2.100563
       _cons |     2.3133   1.091861     2.12   0.035      .163901    4.462699
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_math_b_sp_b_ct_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       382
-------------+----------------------------------   F(14, 367)      =     10.65
       Model |  95.8359933        14   6.8454281   Prob > F        =    0.0000
    Residual |   235.92113       367  .642836868   R-squared       =    0.2889
-------------+----------------------------------   Adj R-squared   =    0.2617
       Total |  331.757124       381  .870753606   Root MSE        =    .80177

------------------------------------------------------------------------------
va_math_b_~t | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |    .207231   .0562044     3.69   0.000     .0967079     .317754
ln_min~rprop |   .1872221   .1548188     1.21   0.227    -.1172212    .4916654
ln_maleenr~p |   .5597491   .5509414     1.02   0.310     -.523649    1.643147
ln_freemea~p |  -.2118948   .1266085    -1.67   0.095     -.460864    .0370743
   ln_elprop |   .0237379   .0278097     0.85   0.394    -.0309486    .0784243
ln_maletea~p |  -.0655275   .0644469    -1.02   0.310     -.192259     .061204
ln_min~fprop |   .0489624   .0329332     1.49   0.138    -.0157991    .1137239
ln_newteac~p |   .0560104   .0322209     1.74   0.083    -.0073504    .1193713
ln_fullcre~p |   4.076705   1.313037     3.10   0.002     1.494684    6.658726
ln_fteteac~t |   .7182435   .2653863     2.71   0.007     .1963748    1.240112
ln_fteadmi~t |  -.0918287   .0501273    -1.83   0.068    -.1904015    .0067441
ln_fteserv~t |  -.0040893    .029268    -0.14   0.889    -.0616434    .0534648
avg_gr6mat~e |  -.5721393   .3382615    -1.69   0.092    -1.237313    .0930347
avg_gr8ela~e |   1.399716   .3519665     3.98   0.000     .7075919     2.09184
       _cons |   2.263867   .9255486     2.45   0.015     .4438228    4.083911
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_math_b_sp_b_ct_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       385
-------------+----------------------------------   F(14, 370)      =      2.48
       Model |  29.0886319        14  2.07775942   Prob > F        =    0.0023
    Residual |  310.251727       370  .838518182   R-squared       =    0.0857
-------------+----------------------------------   Adj R-squared   =    0.0511
       Total |  339.340359       384  .883698852   Root MSE        =    .91571

------------------------------------------------------------------------------
va_math_la.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |   .2149368   .0648528     3.31   0.001     .0874105    .3424632
ln_min~rprop |   .0292657   .1861816     0.16   0.875    -.3368411    .3953724
ln_maleenr~p |   1.017696   .6448148     1.58   0.115    -.2502658    2.285657
ln_freemea~p |   .0315004   .1463824     0.22   0.830    -.2563453    .3193461
   ln_elprop |   .0130153   .0393115     0.33   0.741    -.0642867    .0903173
ln_maletea~p |  -.0669195   .0771567    -0.87   0.386    -.2186403    .0848012
ln_min~fprop |   .0019592   .0411892     0.05   0.962    -.0790351    .0829534
ln_newteac~p |   .0720299   .0452286     1.59   0.112    -.0169075    .1609673
ln_fullcre~p |   4.346829   1.533313     2.83   0.005     1.331729    7.361929
ln_fteteac~t |   .1742799   .3570122     0.49   0.626    -.5277475    .8763072
ln_fteadmi~t |  -.1432546    .076533    -1.87   0.062    -.2937488    .0072396
ln_fteserv~t |    .049042    .041288     1.19   0.236    -.0321465    .1302305
avg_gr6mat~e |  -.0975195   .4026581    -0.24   0.809     -.889305    .6942659
avg_gr8ela~e |   .0759549   .4276208     0.18   0.859    -.7649171    .9168268
       _cons |   1.093823   1.129596     0.97   0.334     -1.12741    3.315056
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_math_las_sp_las_ct_p_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       284
-------------+----------------------------------   F(14, 269)      =      2.09
       Model |  24.9751283        14  1.78393773   Prob > F        =    0.0126
    Residual |   229.61748       269  .853596579   R-squared       =    0.0981
-------------+----------------------------------   Adj R-squared   =    0.0512
       Total |  254.592608       283  .899620523   Root MSE        =     .9239

------------------------------------------------------------------------------
va_math_la.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |   .3079832   .0778415     3.96   0.000     .1547272    .4612393
ln_min~rprop |  -.0837417   .2163341    -0.39   0.699    -.5096652    .3421817
ln_maleenr~p |   .4454809   .7475095     0.60   0.552    -1.026232    1.917194
ln_freemea~p |   .0660142   .1660014     0.40   0.691     -.260813    .3928415
   ln_elprop |   .0391503   .0433207     0.90   0.367    -.0461405    .1244411
ln_maletea~p |  -.0389728   .0908308    -0.43   0.668    -.2178025    .1398569
ln_min~fprop |   .0091753   .0456631     0.20   0.841    -.0807272    .0990777
ln_newteac~p |   .0760647   .0572903     1.33   0.185    -.0367298    .1888592
ln_fullcre~p |   2.632358   2.098637     1.25   0.211    -1.499485    6.764201
ln_fteteac~t |   .5295963    .411259     1.29   0.199    -.2800995    1.339292
ln_fteadmi~t |   -.171308    .081193    -2.11   0.036    -.3311625   -.0114534
ln_fteserv~t |   .0092907   .0612122     0.15   0.879    -.1112252    .1298066
avg_gr6mat~e |  -.1648792   .4785387    -0.34   0.731    -1.107037    .7772783
avg_gr8ela~e |   .2049312   .5048277     0.41   0.685    -.7889846    1.198847
       _cons |   1.499061   1.293092     1.16   0.247    -1.046807    4.044929
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_math_las_sp_las_ct_p_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       369
-------------+----------------------------------   F(14, 354)      =      2.86
       Model |  32.7607772        14  2.34005551   Prob > F        =    0.0004
    Residual |  289.829072       354  .818726193   R-squared       =    0.1016
-------------+----------------------------------   Adj R-squared   =    0.0660
       Total |  322.589849       368  .876602852   Root MSE        =    .90483

------------------------------------------------------------------------------
va_math_la.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |   .2852376   .0711286     4.01   0.000     .1453498    .4251254
ln_min~rprop |   .0052056   .1921087     0.03   0.978    -.3726122    .3830235
ln_maleenr~p |   .9454023   .6491458     1.46   0.146     -.331265     2.22207
ln_freemea~p |  -.0072772   .1466666    -0.05   0.960    -.2957246    .2811702
   ln_elprop |   .0100431   .0399319     0.25   0.802    -.0684905    .0885768
ln_maletea~p |  -.0680664    .081158    -0.84   0.402    -.2276788     .091546
ln_min~fprop |  -.0067359   .0432525    -0.16   0.876    -.0918001    .0783283
ln_newteac~p |   .0741952   .0448521     1.65   0.099     -.014015    .1624054
ln_fullcre~p |   4.441736   1.556009     2.85   0.005     1.381551    7.501921
ln_fteteac~t |   .3241741   .3551013     0.91   0.362    -.3741992    1.022547
ln_fteadmi~t |  -.1731861     .07685    -2.25   0.025     -.324326   -.0220462
ln_fteserv~t |   .0138862   .0446085     0.31   0.756    -.0738448    .1016172
avg_gr6mat~e |  -.1911516   .4014472    -0.48   0.634    -.9806729    .5983696
avg_gr8ela~e |   .1917291   .4245485     0.45   0.652    -.6432254    1.026683
       _cons |   .9299472    1.12878     0.82   0.411    -1.290011    3.149906
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_math_las_sp_las_ct_p_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       400
-------------+----------------------------------   F(14, 385)      =      8.17
       Model |  95.3649337        14  6.81178098   Prob > F        =    0.0000
    Residual |  321.174247       385  .834218824   R-squared       =    0.2289
-------------+----------------------------------   Adj R-squared   =    0.2009
       Total |  416.539181       399  1.04395785   Root MSE        =    .91336

------------------------------------------------------------------------------
va_enr_b_s~t | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |    .160046   .0629779     2.54   0.011     .0362224    .2838696
ln_min~rprop |   .8162647   .1701246     4.80   0.000      .481775    1.150754
ln_maleenr~p |   .2204882   .6172427     0.36   0.721    -.9931002    1.434077
ln_freemea~p |  -.3152859   .1414182    -2.23   0.026    -.5933346   -.0372371
   ln_elprop |   .0587334   .0294037     2.00   0.046     .0009215    .1165452
ln_maletea~p |  -.0204201   .0710857    -0.29   0.774    -.1601849    .1193447
ln_min~fprop |  -.0258839   .0338992    -0.76   0.446    -.0925346    .0407668
ln_newteac~p |   .1089233   .0365155     2.98   0.003     .0371287     .180718
ln_fullcre~p |   .5455756   1.455488     0.37   0.708    -2.316124    3.407275
ln_fteteac~t |   .3254541    .301144     1.08   0.280    -.2666386    .9175468
ln_fteadmi~t |  -.1198603   .0566906    -2.11   0.035    -.2313221   -.0083984
ln_fteserv~t |  -.0053815   .0311408    -0.17   0.863    -.0666089    .0558459
avg_gr6mat~e |   .1738559   .3788394     0.46   0.647    -.5709972     .918709
avg_gr8ela~e |   .9515302   .3939551     2.42   0.016     .1769574    1.726103
       _cons |   1.085385   1.040569     1.04   0.298    -.9605248    3.131295
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_enr_b_sp_b_ct_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       292
-------------+----------------------------------   F(14, 277)      =      6.20
       Model |  70.2604814        14  5.01860581   Prob > F        =    0.0000
    Residual |  224.391829       277  .810078805   R-squared       =    0.2385
-------------+----------------------------------   Adj R-squared   =    0.2000
       Total |   294.65231       291   1.0125509   Root MSE        =    .90004

------------------------------------------------------------------------------
va_enr_b_s~t | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |   .1205814   .0721903     1.67   0.096      -.02153    .2626928
ln_min~rprop |   .8732161   .1933947     4.52   0.000      .492506    1.253926
ln_maleenr~p |   .1078001   .6992573     0.15   0.878    -1.268733    1.484334
ln_freemea~p |  -.3437837   .1598795    -2.15   0.032    -.6585168   -.0290506
   ln_elprop |   .0635351   .0356895     1.78   0.076     -.006722    .1337921
ln_maletea~p |  -.1264035   .0871875    -1.45   0.148    -.2980378    .0452309
ln_min~fprop |  -.0117394   .0391425    -0.30   0.764    -.0887939    .0653151
ln_newteac~p |   .1373403   .0553853     2.48   0.014     .0283107    .2463699
ln_fullcre~p |   1.359614   1.964434     0.69   0.489    -2.507501    5.226729
ln_fteteac~t |   .1131298   .3692945     0.31   0.760    -.6138504    .8401101
ln_fteadmi~t |  -.0983989   .0582253    -1.69   0.092    -.2130193    .0162214
ln_fteserv~t |   .0385185   .0586736     0.66   0.512    -.0769843    .1540213
avg_gr6mat~e |   .1054083   .4458617     0.24   0.813    -.7722994    .9831161
avg_gr8ela~e |   1.014592   .4601542     2.20   0.028     .1087489    1.920436
       _cons |   .8424823   1.198819     0.70   0.483     -1.51747    3.202435
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_enr_b_sp_b_ct_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       382
-------------+----------------------------------   F(14, 367)      =      8.25
       Model |  96.5415689        14  6.89582635   Prob > F        =    0.0000
    Residual |  306.816528       367  .836012338   R-squared       =    0.2393
-------------+----------------------------------   Adj R-squared   =    0.2103
       Total |  403.358097       381  1.05868267   Root MSE        =    .91434

------------------------------------------------------------------------------
va_enr_b_s~t | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |   .1388506   .0640953     2.17   0.031     .0128104    .2648907
ln_min~rprop |    .822879   .1765549     4.66   0.000     .4756929    1.170065
ln_maleenr~p |  -.0020662   .6282918    -0.00   0.997     -1.23757    1.233438
ln_freemea~p |  -.3449389   .1443839    -2.39   0.017    -.6288626   -.0610153
   ln_elprop |   .0695433   .0317141     2.19   0.029     .0071791    .1319075
ln_maletea~p |  -.0601707    .073495    -0.82   0.413    -.2046949    .0843535
ln_min~fprop |  -.0144498   .0375569    -0.38   0.701    -.0883036     .059404
ln_newteac~p |   .1042599   .0367447     2.84   0.005     .0320034    .1765164
ln_fullcre~p |   .6851029   1.497383     0.46   0.648    -2.259425    3.629631
ln_fteteac~t |   .4807941   .3026457     1.59   0.113    -.1143432    1.075931
ln_fteadmi~t |  -.1183539    .057165    -2.07   0.039     -.230766   -.0059418
ln_fteserv~t |  -.0095499   .0333772    -0.29   0.775    -.0751844    .0560846
avg_gr6mat~e |   .0630447   .3857523     0.16   0.870    -.6955176    .8216069
avg_gr8ela~e |   1.141141   .4013815     2.84   0.005     .3518447    1.930437
       _cons |   1.309642   1.055493     1.24   0.215    -.7659301    3.385215
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_enr_b_sp_b_ct_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       385
-------------+----------------------------------   F(14, 370)      =      1.11
       Model |  15.8083805        14  1.12917004   Prob > F        =    0.3494
    Residual |  377.306995       370  1.01974863   R-squared       =    0.0402
-------------+----------------------------------   Adj R-squared   =    0.0039
       Total |  393.115375       384  1.02373796   Root MSE        =    1.0098

------------------------------------------------------------------------------
va_enr_las.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |   .1274681   .0715186     1.78   0.076    -.0131659     .268102
ln_min~rprop |   .2672232    .205318     1.30   0.194    -.1365134    .6709597
ln_maleenr~p |  -.5427228   .7110912    -0.76   0.446     -1.94101    .8555643
ln_freemea~p |  -.1039931   .1614281    -0.64   0.520    -.4214247    .2134384
   ln_elprop |   .0222347   .0433521     0.51   0.608    -.0630127    .1074821
ln_maletea~p |   .0410452   .0850872     0.48   0.630      -.12627    .2083603
ln_min~fprop |  -.0476143   .0454228    -1.05   0.295    -.1369335    .0417048
ln_newteac~p |   .0351673   .0498774     0.71   0.481    -.0629115     .133246
ln_fullcre~p |  -1.266822   1.690912    -0.75   0.454    -4.591826    2.058181
ln_fteteac~t |   .1480889   .3937072     0.38   0.707    -.6260954    .9222732
ln_fteadmi~t |   -.103197   .0843994    -1.22   0.222    -.2691596    .0627656
ln_fteserv~t |   .0739454   .0455317     1.62   0.105     -.015588    .1634788
avg_gr6mat~e |  -.3834991   .4440448    -0.86   0.388    -1.256667     .489669
avg_gr8ela~e |   .2312256   .4715732     0.49   0.624    -.6960742    1.158525
       _cons |   .0944943     1.2457     0.08   0.940    -2.355045    2.544034
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_enr_las_sp_las_ct_p_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       284
-------------+----------------------------------   F(14, 269)      =      0.68
       Model |  9.25547912        14  .661105651   Prob > F        =    0.7953
    Residual |  262.264913       269  .974962504   R-squared       =    0.0341
-------------+----------------------------------   Adj R-squared   =   -0.0162
       Total |  271.520393       283  .959436016   Root MSE        =     .9874

------------------------------------------------------------------------------
va_enr_las.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |   .1133217   .0831915     1.36   0.174    -.0504675    .2771109
ln_min~rprop |   .2485039   .2312026     1.07   0.283    -.2066929    .7037006
ln_maleenr~p |  -.9955721   .7988851    -1.25   0.214    -2.568435    .5772905
ln_freemea~p |  -.0854609   .1774106    -0.48   0.630    -.4347507     .263829
   ln_elprop |   .0127289   .0462981     0.27   0.784    -.0784238    .1038817
ln_maletea~p |   .0576394   .0970735     0.59   0.553    -.1334811    .2487599
ln_min~fprop |  -.0142596   .0488014    -0.29   0.770     -.110341    .0818218
ln_newteac~p |   .0095654   .0612279     0.16   0.876    -.1109813    .1301121
ln_fullcre~p |  -.3896415   2.242874    -0.17   0.862    -4.805462    4.026179
ln_fteteac~t |   .2599883   .4395245     0.59   0.555    -.6053572    1.125334
ln_fteadmi~t |  -.0691472   .0867733    -0.80   0.426    -.2399884    .1016939
ln_fteserv~t |   .0372163   .0654193     0.57   0.570    -.0915825    .1660152
avg_gr6mat~e |  -.0747904   .5114282    -0.15   0.884    -1.081702    .9321208
avg_gr8ela~e |  -.0450138    .539524    -0.08   0.934     -1.10724    1.017213
       _cons |   .2733954   1.381965     0.20   0.843    -2.447448    2.994238
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_enr_las_sp_las_ct_p_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       369
-------------+----------------------------------   F(14, 354)      =      0.86
       Model |  12.5557237        14  .896837408   Prob > F        =    0.6014
    Residual |  368.491893       354  1.04093755   R-squared       =    0.0330
-------------+----------------------------------   Adj R-squared   =   -0.0053
       Total |  381.047617       368  1.03545548   Root MSE        =    1.0203

------------------------------------------------------------------------------
va_enr_las.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |   .1014231   .0802024     1.26   0.207      -.05631    .2591562
ln_min~rprop |   .2914705   .2166158     1.35   0.179    -.1345451    .7174861
ln_maleenr~p |  -.6192951   .7319565    -0.85   0.398    -2.058825    .8202349
ln_freemea~p |  -.1131204   .1653766    -0.68   0.494    -.4383646    .2121238
   ln_elprop |   .0252552    .045026     0.56   0.575    -.0632969    .1138072
ln_maletea~p |   .0413781   .0915112     0.45   0.651    -.1385958     .221352
ln_min~fprop |  -.0465759   .0487702    -0.96   0.340    -.1424916    .0493398
ln_newteac~p |   .0271195   .0505739     0.54   0.592    -.0723435    .1265825
ln_fullcre~p |  -.7786932   1.754507    -0.44   0.657    -4.229262    2.671875
ln_fteteac~t |   .2558071    .400401     0.64   0.523    -.5316568    1.043271
ln_fteadmi~t |  -.0965357   .0866536    -1.11   0.266    -.2669564    .0738849
ln_fteserv~t |   .0453755   .0502991     0.90   0.368    -.0535472    .1442982
avg_gr6mat~e |  -.4634028   .4526592    -1.02   0.307    -1.353642    .4268367
avg_gr8ela~e |   .4192848   .4787076     0.88   0.382    -.5221836    1.360753
       _cons |   .2014808   1.272777     0.16   0.874    -2.301675    2.704637
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_enr_las_sp_las_ct_p_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       400
-------------+----------------------------------   F(14, 385)      =      3.37
       Model |  38.3960212        14  2.74257294   Prob > F        =    0.0000
    Residual |  313.551783       385  .814420215   R-squared       =    0.1091
-------------+----------------------------------   Adj R-squared   =    0.0767
       Total |  351.947804       399  .882074697   Root MSE        =    .90245

------------------------------------------------------------------------------
va_enr_2ye.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |   .0069769   .0622261     0.11   0.911    -.1153685    .1293223
ln_min~rprop |   .0624508   .1680937     0.37   0.710    -.2680458    .3929474
ln_maleenr~p |  -.5160491   .6098741    -0.85   0.398     -1.71515    .6830517
ln_freemea~p |   .4114169     .13973     2.94   0.003     .1366874    .6861463
   ln_elprop |    .028672   .0290526     0.99   0.324    -.0284497    .0857937
ln_maletea~p |   .0640257   .0702371     0.91   0.363    -.0740706     .202122
ln_min~fprop |  -.0961379   .0334945    -2.87   0.004     -.161993   -.0302829
ln_newteac~p |     .09918   .0360795     2.75   0.006     .0282424    .1701177
ln_fullcre~p |   1.093744   1.438112     0.76   0.447    -1.733793    3.921281
ln_fteteac~t |  -.5761285    .297549    -1.94   0.054    -1.161153    .0088959
ln_fteadmi~t |  -.1059808   .0560138    -1.89   0.059     -.216112    .0041505
ln_fteserv~t |   -.014903   .0307691    -0.48   0.628    -.0753995    .0455934
avg_gr6mat~e |  -.1689261   .3743169    -0.45   0.652    -.9048873     .567035
avg_gr8ela~e |   .7802605   .3892521     2.00   0.046     .0149344    1.545587
       _cons |  -2.163308   1.028147    -2.10   0.036    -4.184795    -.141822
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_enr_2year_b_sp_b_ct_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       292
-------------+----------------------------------   F(14, 277)      =      3.40
       Model |  38.5368884        14  2.75263488   Prob > F        =    0.0000
    Residual |   223.93147       277  .808416861   R-squared       =    0.1468
-------------+----------------------------------   Adj R-squared   =    0.1037
       Total |  262.468359       291  .901953123   Root MSE        =    .89912

------------------------------------------------------------------------------
va_enr_2ye.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |  -.0823202   .0721163    -1.14   0.255    -.2242857    .0596454
ln_min~rprop |   .2432964   .1931962     1.26   0.209    -.1370229    .6236158
ln_maleenr~p |   .1096258   .6985396     0.16   0.875    -1.265495    1.484747
ln_freemea~p |   .3867897   .1597154     2.42   0.016     .0723796    .7011998
   ln_elprop |   .0301531   .0356528     0.85   0.398    -.0400319     .100338
ln_maletea~p |  -.0071503   .0870981    -0.08   0.935    -.1786085    .1643079
ln_min~fprop |  -.1076627   .0391023    -2.75   0.006    -.1846381   -.0306873
ln_newteac~p |   .1532045   .0553285     2.77   0.006     .0442868    .2621222
ln_fullcre~p |   3.513631   1.962417     1.79   0.074    -.3495152    7.376777
ln_fteteac~t |  -.7650342   .3689155    -2.07   0.039    -1.491268   -.0388001
ln_fteadmi~t |  -.0965718   .0581656    -1.66   0.098    -.2110745    .0179309
ln_fteserv~t |  -.0466819   .0586134    -0.80   0.426    -.1620662    .0687023
avg_gr6mat~e |   -.077222   .4454041    -0.17   0.862     -.954029    .7995849
avg_gr8ela~e |   .6741161    .459682     1.47   0.144    -.2307978     1.57903
       _cons |  -2.233976   1.197588    -1.87   0.063    -4.591507    .1235541
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_enr_2year_b_sp_b_ct_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       382
-------------+----------------------------------   F(14, 367)      =      3.44
       Model |  39.6193711        14  2.82995508   Prob > F        =    0.0000
    Residual |  302.245077       367  .823556067   R-squared       =    0.1159
-------------+----------------------------------   Adj R-squared   =    0.0822
       Total |  341.864448       381  .897282015   Root MSE        =     .9075

------------------------------------------------------------------------------
va_enr_2ye.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |  -.0423041    .063616    -0.66   0.506    -.1674018    .0827935
ln_min~rprop |   .1015261   .1752346     0.58   0.563    -.2430638    .4461161
ln_maleenr~p |  -.5622222   .6235936    -0.90   0.368    -1.788487    .6640427
ln_freemea~p |   .4084172   .1433043     2.85   0.005     .1266167    .6902177
   ln_elprop |   .0444767    .031477     1.41   0.159    -.0174211    .1063746
ln_maletea~p |   .0553195   .0729454     0.76   0.449    -.0881239     .198763
ln_min~fprop |  -.1089562   .0372761    -2.92   0.004    -.1822577   -.0356546
ln_newteac~p |   .0971119   .0364699     2.66   0.008     .0253957    .1688281
ln_fullcre~p |   .7986441   1.486186     0.54   0.591    -2.123865    3.721154
ln_fteteac~t |  -.5404344   .3003826    -1.80   0.073    -1.131121    .0502525
ln_fteadmi~t |  -.1075546   .0567375    -1.90   0.059    -.2191261    .0040169
ln_fteserv~t |  -.0141178   .0331276    -0.43   0.670    -.0792615    .0510259
avg_gr6mat~e |  -.2091914   .3828678    -0.55   0.585    -.9620813    .5436985
avg_gr8ela~e |   .8923819     .39838     2.24   0.026     .1089879    1.675776
       _cons |  -2.063125     1.0476    -1.97   0.050    -4.123177   -.0030731
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_enr_2year_b_sp_b_ct_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       385
-------------+----------------------------------   F(14, 370)      =      2.83
       Model |  40.4584808        14  2.88989149   Prob > F        =    0.0005
    Residual |  378.055633       370  1.02177198   R-squared       =    0.0967
-------------+----------------------------------   Adj R-squared   =    0.0625
       Total |  418.514114       384  1.08988051   Root MSE        =    1.0108

------------------------------------------------------------------------------
va_enr_2ye.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |   .0483538   .0715895     0.68   0.500    -.0924196    .1891272
ln_min~rprop |   .6237403   .2055216     3.03   0.003     .2196034    1.027877
ln_maleenr~p |  -.6032502   .7117963    -0.85   0.397    -2.002924    .7964235
ln_freemea~p |   .0473524   .1615881     0.29   0.770    -.2703939    .3650987
   ln_elprop |   .0310117   .0433951     0.71   0.475    -.0543202    .1163436
ln_maletea~p |  -.0076292   .0851716    -0.09   0.929    -.1751102    .1598518
ln_min~fprop |  -.1230993   .0454678    -2.71   0.007     -.212507   -.0336916
ln_newteac~p |   .0550239   .0499269     1.10   0.271    -.0431521    .1531999
ln_fullcre~p |  -1.821683   1.692589    -1.08   0.283    -5.149984    1.506617
ln_fteteac~t |  -.2429473   .3940976    -0.62   0.538    -1.017899    .5320047
ln_fteadmi~t |  -.0820701    .084483    -0.97   0.332    -.2481972    .0840571
ln_fteserv~t |   .0639119   .0455769     1.40   0.162    -.0257102    .1535341
avg_gr6mat~e |  -.1599597   .4444851    -0.36   0.719    -1.033994    .7140742
avg_gr8ela~e |   .3374805   .4720408     0.71   0.475    -.5907389      1.2657
       _cons |   -.858496   1.246935    -0.69   0.492    -3.310465    1.593473
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_enr_2year_las_sp_las_ct_p_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       284
-------------+----------------------------------   F(14, 269)      =      2.85
       Model |  39.6891078        14  2.83493627   Prob > F        =    0.0005
    Residual |  267.413808       269  .994103375   R-squared       =    0.1292
-------------+----------------------------------   Adj R-squared   =    0.0839
       Total |  307.102916       283  1.08516931   Root MSE        =    .99705

------------------------------------------------------------------------------
va_enr_2ye.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |  -.0029493   .0840041    -0.04   0.972    -.1683384    .1624399
ln_min~rprop |   .7764719   .2334611     3.33   0.001     .3168286    1.236115
ln_maleenr~p |  -.1594149   .8066891    -0.20   0.843    -1.747642    1.428812
ln_freemea~p |   .0796654   .1791436     0.44   0.657    -.2730364    .4323673
   ln_elprop |   .0199685   .0467504     0.43   0.670    -.0720747    .1120116
ln_maletea~p |   .0070307   .0980218     0.07   0.943    -.1859567    .2000182
ln_min~fprop |  -.1185173   .0492782    -2.41   0.017    -.2155373   -.0214974
ln_newteac~p |   .0639867    .061826     1.03   0.302    -.0577376     .185711
ln_fullcre~p |   .3589667   2.264784     0.16   0.874     -4.09999    4.817923
ln_fteteac~t |  -.1503818    .443818    -0.34   0.735     -1.02418    .7234168
ln_fteadmi~t |  -.0500095   .0876209    -0.57   0.569    -.2225196    .1225005
ln_fteserv~t |   -.016646   .0660583    -0.25   0.801    -.1467031     .113411
avg_gr6mat~e |   .0221264   .5164241     0.04   0.966    -.9946207    1.038874
avg_gr8ela~e |   .2900751   .5447943     0.53   0.595    -.7825279    1.362678
       _cons |  -.2810607   1.395465    -0.20   0.841    -3.028482    2.466361
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_enr_2year_las_sp_las_ct_p_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       369
-------------+----------------------------------   F(14, 354)      =      2.84
       Model |  40.6709689        14  2.90506921   Prob > F        =    0.0005
    Residual |   362.41472       354  1.02377039   R-squared       =    0.1009
-------------+----------------------------------   Adj R-squared   =    0.0653
       Total |  403.085689       368  1.09534154   Root MSE        =    1.0118

------------------------------------------------------------------------------
va_enr_2ye.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |  -.0512742   .0795383    -0.64   0.520    -.2077012    .1051528
ln_min~rprop |   .6827415   .2148221     3.18   0.002     .2602534     1.10523
ln_maleenr~p |  -.5593464   .7258957    -0.77   0.441    -1.986957    .8682639
ln_freemea~p |   .0536842   .1640073     0.33   0.744    -.2688669    .3762353
   ln_elprop |   .0273725   .0446532     0.61   0.540    -.0604464    .1151913
ln_maletea~p |   .0207089   .0907534     0.23   0.820    -.1577748    .1991926
ln_min~fprop |  -.1401559   .0483663    -2.90   0.004    -.2352774   -.0450344
ln_newteac~p |   .0423027   .0501551     0.84   0.400    -.0563367    .1409422
ln_fullcre~p |  -1.674466    1.73998    -0.96   0.337    -5.096463    1.747531
ln_fteteac~t |  -.1272806   .3970856    -0.32   0.749     -.908224    .6536629
ln_fteadmi~t |  -.0708184   .0859361    -0.82   0.410    -.2398279    .0981911
ln_fteserv~t |   .0429833   .0498826     0.86   0.389    -.0551202    .1410869
avg_gr6mat~e |  -.1878936   .4489111    -0.42   0.676    -1.070762    .6949744
avg_gr8ela~e |    .467684   .4747438     0.99   0.325    -.4659888    1.401357
       _cons |   -.525261   1.262238    -0.42   0.678     -3.00769    1.957168
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_enr_2year_las_sp_las_ct_p_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       400
-------------+----------------------------------   F(14, 385)      =      8.77
       Model |  75.3934617        14  5.38524727   Prob > F        =    0.0000
    Residual |  236.450521       385  .614157197   R-squared       =    0.2418
-------------+----------------------------------   Adj R-squared   =    0.2142
       Total |  311.843983       399  .781563866   Root MSE        =    .78368

------------------------------------------------------------------------------
va_enr_4ye.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |   .1271011   .0540366     2.35   0.019     .0208574    .2333449
ln_min~rprop |   .6754229   .1459711     4.63   0.000     .3884225    .9624233
ln_maleenr~p |    .803337   .5296094     1.52   0.130    -.2379519    1.844626
ln_freemea~p |  -.7165517   .1213403    -5.91   0.000    -.9551244   -.4779791
   ln_elprop |   .0234353   .0252291     0.93   0.354    -.0261687    .0730393
ln_maletea~p |  -.0840695   .0609933    -1.38   0.169    -.2039911    .0358522
ln_min~fprop |   .0802689   .0290863     2.76   0.006      .023081    .1374569
ln_newteac~p |  -.0047149   .0313312    -0.15   0.880    -.0663165    .0568867
ln_fullcre~p |  -.6531667   1.248844    -0.52   0.601    -3.108575    1.802242
ln_fteteac~t |   .8740979    .258389     3.38   0.001     .3660677    1.382128
ln_fteadmi~t |   .0033241   .0486419     0.07   0.946    -.0923129    .0989612
ln_fteserv~t |   .0123832   .0267196     0.46   0.643    -.0401514    .0649178
avg_gr6mat~e |   .3601588   .3250535     1.11   0.269    -.2789435    .9992611
avg_gr8ela~e |   .0262109   .3380232     0.08   0.938    -.6383916    .6908135
       _cons |   3.230108   .8928341     3.62   0.000     1.474667    4.985549
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_enr_4year_b_sp_b_ct_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       292
-------------+----------------------------------   F(14, 277)      =      8.58
       Model |  69.9786435        14  4.99847454   Prob > F        =    0.0000
    Residual |  161.439405       277  .582813737   R-squared       =    0.3024
-------------+----------------------------------   Adj R-squared   =    0.2671
       Total |  231.418049       291  .795251026   Root MSE        =    .76342

------------------------------------------------------------------------------
va_enr_4ye.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |   .1862687   .0612323     3.04   0.003      .065729    .3068084
ln_min~rprop |   .5284137   .1640385     3.22   0.001     .2054932    .8513342
ln_maleenr~p |   .0414667   .5931141     0.07   0.944    -1.126117     1.20905
ln_freemea~p |  -.7153645   .1356107    -5.28   0.000     -.982323    -.448406
   ln_elprop |   .0262655    .030272     0.87   0.386     -.033327    .0858579
ln_maletea~p |  -.1011316    .073953    -1.37   0.173    -.2467129    .0444496
ln_min~fprop |   .1060505   .0332009     3.19   0.002     .0406925    .1714086
ln_newteac~p |  -.0380915   .0469782    -0.81   0.418    -.1305711     .054388
ln_fullcre~p |  -2.584162   1.666244    -1.55   0.122    -5.864272    .6959477
ln_fteteac~t |   .8792766   .3132377     2.81   0.005     .2626477    1.495905
ln_fteadmi~t |   .0140115   .0493871     0.28   0.777    -.0832101    .1112331
ln_fteserv~t |   .0835934   .0497673     1.68   0.094    -.0143767    .1815636
avg_gr6mat~e |   .1875229   .3781825     0.50   0.620    -.5569539    .9319997
avg_gr8ela~e |   .2052602   .3903055     0.53   0.599    -.5630816    .9736019
       _cons |   3.065312   1.016845     3.01   0.003     1.063586    5.067037
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_enr_4year_b_sp_b_ct_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       382
-------------+----------------------------------   F(14, 367)      =      8.86
       Model |  74.2888796        14  5.30634854   Prob > F        =    0.0000
    Residual |  219.837947       367  .599013478   R-squared       =    0.2526
-------------+----------------------------------   Adj R-squared   =    0.2241
       Total |  294.126826       381   .77198642   Root MSE        =    .77396

------------------------------------------------------------------------------
va_enr_4ye.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |   .1699022   .0542548     3.13   0.002     .0632129    .2765915
ln_min~rprop |   .6365032   .1494485     4.26   0.000     .3426203    .9303861
ln_maleenr~p |   .6501118   .5318306     1.22   0.222     -.395706     1.69593
ln_freemea~p |   -.737547   .1222168    -6.03   0.000      -.97788   -.4972139
   ln_elprop |   .0167844   .0268451     0.63   0.532    -.0360051    .0695739
ln_maletea~p |  -.1104597   .0622114    -1.78   0.077    -.2327952    .0118758
ln_min~fprop |   .1046531   .0317909     3.29   0.001      .042138    .1671682
ln_newteac~p |  -.0059288   .0311033    -0.19   0.849    -.0670919    .0552342
ln_fullcre~p |  -.2224224   1.267491    -0.18   0.861    -2.714879    2.270034
ln_fteteac~t |    .969934   .2561807     3.79   0.000     .4661677      1.4737
ln_fteadmi~t |   .0056808   .0483885     0.12   0.907    -.0894727    .1008343
ln_fteserv~t |   .0084182   .0282528     0.30   0.766    -.0471395    .0639759
avg_gr6mat~e |   .3066558   .3265281     0.94   0.348    -.3354449    .9487566
avg_gr8ela~e |   .0693669   .3397577     0.20   0.838    -.5987492     .737483
       _cons |    3.31264   .8934436     3.71   0.000     1.555728    5.069551
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_enr_4year_b_sp_b_ct_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       385
-------------+----------------------------------   F(14, 370)      =      2.48
       Model |   27.251698        14  1.94654986   Prob > F        =    0.0023
    Residual |   290.78654       370  .785909568   R-squared       =    0.0857
-------------+----------------------------------   Adj R-squared   =    0.0511
       Total |  318.038238       384  .828224579   Root MSE        =    .88652

------------------------------------------------------------------------------
va_enr_4ye.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |   .0751978   .0627854     1.20   0.232    -.0482632    .1986588
ln_min~rprop |  -.4442384   .1802465    -2.46   0.014    -.7986744   -.0898024
ln_maleenr~p |   .1323486   .6242593     0.21   0.832    -1.095193     1.35989
ln_freemea~p |  -.1530478    .141716    -1.08   0.281    -.4317175     .125622
   ln_elprop |  -.0129605   .0380583    -0.34   0.734    -.0877983    .0618773
ln_maletea~p |   .0497033   .0746971     0.67   0.506    -.0971809    .1965874
ln_min~fprop |   .0927448   .0398762     2.33   0.021     .0143325    .1711571
ln_newteac~p |  -.0259918   .0437868    -0.59   0.553    -.1120941    .0601104
ln_fullcre~p |   .7347118   1.484434     0.49   0.621    -2.184273    3.653696
ln_fteteac~t |   .4148052   .3456313     1.20   0.231    -.2648429    1.094453
ln_fteadmi~t |  -.0093169   .0740933    -0.13   0.900    -.1550137    .1363798
ln_fteserv~t |   .0019237   .0399718     0.05   0.962    -.0766767    .0805241
avg_gr6mat~e |  -.2100387   .3898222    -0.54   0.590    -.9765835    .5565062
avg_gr8ela~e |  -.1490211   .4139891    -0.36   0.719    -.9630877    .6650454
       _cons |   1.046222   1.093587     0.96   0.339    -1.104202    3.196647
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_enr_4year_las_sp_las_ct_p_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       284
-------------+----------------------------------   F(14, 269)      =      3.19
       Model |  33.7214053        14   2.4086718   Prob > F        =    0.0001
    Residual |  203.055009       269  .754851335   R-squared       =    0.1424
-------------+----------------------------------   Adj R-squared   =    0.0978
       Total |  236.776414       283  .836665775   Root MSE        =    .86882

------------------------------------------------------------------------------
va_enr_4ye.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |     .11888   .0732008     1.62   0.106    -.0252392    .2629993
ln_min~rprop |   -.637627   .2034368    -3.13   0.002    -1.038158   -.2370962
ln_maleenr~p |  -.8362554   .7029446    -1.19   0.235    -2.220228    .5477174
ln_freemea~p |  -.1706718   .1561048    -1.09   0.275    -.4780143    .1366708
   ln_elprop |  -.0105271    .040738    -0.26   0.796     -.090733    .0696789
ln_maletea~p |   .0490216   .0854157     0.57   0.567    -.1191467    .2171898
ln_min~fprop |   .1222393   .0429407     2.85   0.005     .0376966    .2067819
ln_newteac~p |  -.0639864   .0538748    -1.19   0.236    -.1700563    .0420835
ln_fullcre~p |  -.8893003   1.973521    -0.45   0.653    -4.774811    2.996211
ln_fteteac~t |   .4163697   .3867407     1.08   0.283    -.3450539    1.177793
ln_fteadmi~t |   -.011617   .0763524    -0.15   0.879    -.1619414    .1387073
ln_fteserv~t |   .0582643   .0575629     1.01   0.312    -.0550667    .1715953
avg_gr6mat~e |  -.0970503   .4500093    -0.22   0.829    -.9830384    .7889379
avg_gr8ela~e |  -.3781395   .4747309    -0.80   0.426      -1.3128    .5565212
       _cons |   .5531853   1.216001     0.45   0.650    -1.840903    2.947274
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_enr_4year_las_sp_las_ct_p_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       369
-------------+----------------------------------   F(14, 354)      =      3.00
       Model |  32.1674622        14  2.29767587   Prob > F        =    0.0002
    Residual |  270.891184       354  .765229334   R-squared       =    0.1061
-------------+----------------------------------   Adj R-squared   =    0.0708
       Total |  303.058646       368  .823528931   Root MSE        =    .87477

------------------------------------------------------------------------------
va_enr_4ye.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |   .1632789   .0687655     2.37   0.018     .0280386    .2985193
ln_min~rprop |  -.4892056   .1857264    -2.63   0.009    -.8544713   -.1239398
ln_maleenr~p |   .0024333   .6275795     0.00   0.997     -1.23182    1.236686
ln_freemea~p |  -.1687494   .1417939    -1.19   0.235    -.4476138     .110115
   ln_elprop |   -.005152   .0386053    -0.13   0.894    -.0810765    .0707726
ln_maletea~p |   .0166672   .0784617     0.21   0.832    -.1376424    .1709769
ln_min~fprop |   .1137755   .0418155     2.72   0.007     .0315373    .1960136
ln_newteac~p |  -.0196562    .043362    -0.45   0.651    -.1049358    .0656234
ln_fullcre~p |   1.056819   1.504315     0.70   0.483    -1.901698    4.015337
ln_fteteac~t |    .391331   .3433038     1.14   0.255    -.2838405    1.066502
ln_fteadmi~t |  -.0152515   .0742968    -0.21   0.837    -.1613701    .1308671
ln_fteserv~t |  -.0031582   .0431265    -0.07   0.942    -.0879745    .0816581
avg_gr6mat~e |  -.2600183     .38811    -0.67   0.503     -1.02331     .503273
avg_gr8ela~e |  -.1033618   .4104439    -0.25   0.801    -.9105768    .7038532
       _cons |   .7717434   1.091279     0.71   0.480    -1.374462    2.917949
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_enr_4year_las_sp_las_ct_p_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       400
-------------+----------------------------------   F(14, 385)      =      5.08
       Model |  66.2393207        14  4.73138005   Prob > F        =    0.0000
    Residual |   358.83974       385  .932051273   R-squared       =    0.1558
-------------+----------------------------------   Adj R-squared   =    0.1251
       Total |  425.079061       399  1.06536105   Root MSE        =    .96543

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |   .0787958   .0665684     1.18   0.237    -.0520873    .2096788
ln_min~rprop |   .7438861   .1798238     4.14   0.000     .3903265    1.097446
ln_maleenr~p |  -.0205097   .6524329    -0.03   0.975    -1.303287    1.262268
ln_freemea~p |   -.265527   .1494808    -1.78   0.076    -.5594278    .0283739
   ln_elprop |   .0466149     .03108     1.50   0.134    -.0144929    .1077227
ln_maletea~p |  -.0021559   .0751385    -0.03   0.977     -.149889    .1455771
ln_min~fprop |  -.0328253   .0358318    -0.92   0.360    -.1032759    .0376253
ln_newteac~p |    .094721   .0385973     2.45   0.015     .0188332    .1706089
ln_fullcre~p |  -.6865109   1.538468    -0.45   0.656    -3.711361    2.338339
ln_fteteac~t |     .18849   .3183128     0.59   0.554    -.4373591    .8143391
ln_fteadmi~t |  -.0916978   .0599226    -1.53   0.127    -.2095144    .0261187
ln_fteserv~t |  -.0080957   .0329162    -0.25   0.806    -.0728138    .0566224
avg_gr6mat~e |   .3881361   .4004378     0.97   0.333    -.3991825    1.175455
avg_gr8ela~e |   .5947189   .4164153     1.43   0.154    -.2240138    1.413452
       _cons |   .5275716   1.099894     0.48   0.632     -1.63498    2.690123
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_dk_enr_b_sp_b_ct_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       292
-------------+----------------------------------   F(14, 277)      =      3.99
       Model |  49.9021446        14   3.5644389   Prob > F        =    0.0000
    Residual |  247.418272       277  .893206757   R-squared       =    0.1678
-------------+----------------------------------   Adj R-squared   =    0.1258
       Total |  297.320416       291  1.02171964   Root MSE        =     .9451

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |   .0358973   .0758039     0.47   0.636    -.1133276    .1851222
ln_min~rprop |   .8156223   .2030752     4.02   0.000     .4158555    1.215389
ln_maleenr~p |   .0647116   .7342592     0.09   0.930    -1.380725    1.510149
ln_freemea~p |  -.2970992   .1678824    -1.77   0.078    -.6275865    .0333882
   ln_elprop |   .0544468   .0374759     1.45   0.147     -.019327    .1282206
ln_maletea~p |  -.0974883   .0915518    -1.06   0.288    -.2777139    .0827373
ln_min~fprop |  -.0212814   .0411018    -0.52   0.605    -.1021929      .05963
ln_newteac~p |   .1171371   .0581577     2.01   0.045     .0026499    .2316242
ln_fullcre~p |   .0566299   2.062765     0.03   0.978    -4.004057    4.117317
ln_fteteac~t |  -.0656464   .3877798    -0.17   0.866    -.8290162    .6977234
ln_fteadmi~t |  -.0702751   .0611398    -1.15   0.251    -.1906328    .0500827
ln_fteserv~t |   .0203117   .0616106     0.33   0.742    -.1009727    .1415961
avg_gr6mat~e |   .3403462   .4681796     0.73   0.468    -.5812958    1.261988
avg_gr8ela~e |   .6258274   .4831876     1.30   0.196    -.3253588    1.577014
       _cons |   .2101698   1.258826     0.17   0.868    -2.267912    2.688252
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_dk_enr_b_sp_b_ct_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       382
-------------+----------------------------------   F(14, 367)      =      5.29
       Model |  69.5057404        14  4.96469574   Prob > F        =    0.0000
    Residual |  344.544746       367  .938814023   R-squared       =    0.1679
-------------+----------------------------------   Adj R-squared   =    0.1361
       Total |  414.050487       381  1.08674668   Root MSE        =    .96892

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |   .0595244   .0679219     0.88   0.381    -.0740405    .1930893
ln_min~rprop |   .7677208   .1870954     4.10   0.000     .3998072    1.135634
ln_maleenr~p |  -.2061089   .6658016    -0.31   0.757    -1.515374    1.103156
ln_freemea~p |  -.2958667   .1530038    -1.93   0.054    -.5967409    .0050075
   ln_elprop |   .0684032   .0336075     2.04   0.043     .0023158    .1344907
ln_maletea~p |  -.0408894   .0778828    -0.53   0.600    -.1940419    .1122631
ln_min~fprop |  -.0278506   .0397991    -0.70   0.485    -.1061136    .0504124
ln_newteac~p |   .0935448   .0389384     2.40   0.017     .0169745    .1701151
ln_fullcre~p |  -.6070173   1.586779    -0.38   0.702    -3.727337    2.513303
ln_fteteac~t |   .2627143    .320714     0.82   0.413    -.3679534     .893382
ln_fteadmi~t |  -.0911839   .0605778    -1.51   0.133    -.2103071    .0279393
ln_fteserv~t |  -.0062984   .0353698    -0.18   0.859    -.0758514    .0632546
avg_gr6mat~e |   .3170096   .4087822     0.78   0.439    -.4868398    1.120859
avg_gr8ela~e |   .7217101   .4253445     1.70   0.091     -.114708    1.558128
       _cons |   .6339332   1.118507     0.57   0.571    -1.565553     2.83342
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_dk_enr_b_sp_b_ct_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       385
-------------+----------------------------------   F(14, 370)      =      0.98
       Model |  14.9294685        14   1.0663906   Prob > F        =    0.4702
    Residual |  401.476572       370  1.08507182   R-squared       =    0.0359
-------------+----------------------------------   Adj R-squared   =   -0.0006
       Total |  416.406041       384  1.08439073   Root MSE        =    1.0417

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |    .088694   .0737737     1.20   0.230    -.0563744    .2337624
ln_min~rprop |   .2874627   .2117921     1.36   0.176    -.1290045    .7039298
ln_maleenr~p |  -.6038566   .7335133    -0.82   0.411    -2.046234    .8385212
ln_freemea~p |  -.1119569   .1665182    -0.67   0.502    -.4393977    .2154838
   ln_elprop |   .0168714   .0447191     0.38   0.706     -.071064    .1048068
ln_maletea~p |   .0500504   .0877702     0.57   0.569    -.1225405    .2226413
ln_min~fprop |   -.045441    .046855    -0.97   0.333    -.1375766    .0466945
ln_newteac~p |   .0197198   .0514501     0.38   0.702    -.0814516    .1208911
ln_fullcre~p |  -1.727318    1.74423    -0.99   0.323    -5.157166    1.702529
ln_fteteac~t |    .164064   .4061215     0.40   0.686    -.6345319    .9626598
ln_fteadmi~t |   -.094012   .0870606    -1.08   0.281    -.2652077    .0771837
ln_fteserv~t |   .0745562   .0469674     1.59   0.113    -.0178004    .1669127
avg_gr6mat~e |  -.3104455   .4580464    -0.68   0.498    -1.211146    .5902552
avg_gr8ela~e |   .1689558   .4864428     0.35   0.729    -.7875836    1.125495
       _cons |    .097463   1.284979     0.08   0.940    -2.429315    2.624241
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_dk_enr_las_sp_las_ct_p_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       284
-------------+----------------------------------   F(14, 269)      =      0.61
       Model |  8.92064917        14  .637189226   Prob > F        =    0.8588
    Residual |  282.448533       269  1.04999455   R-squared       =    0.0306
-------------+----------------------------------   Adj R-squared   =   -0.0198
       Total |  291.369182       283  1.02957308   Root MSE        =    1.0247

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |   .0552261   .0863333     0.64   0.523    -.1147488     .225201
ln_min~rprop |   .2888862   .2399343     1.20   0.230    -.1835017     .761274
ln_maleenr~p |  -1.003125   .8290561    -1.21   0.227    -2.635389    .6291385
ln_freemea~p |  -.0986093   .1841107    -0.54   0.593    -.4610905     .263872
   ln_elprop |   .0022986   .0480466     0.05   0.962    -.0922967    .0968938
ln_maletea~p |   .0626903   .1007396     0.62   0.534    -.1356481    .2610287
ln_min~fprop |  -.0110068   .0506445    -0.22   0.828    -.1107168    .0887032
ln_newteac~p |  -.0070045   .0635402    -0.11   0.912    -.1321039    .1180948
ln_fullcre~p |   -.346496   2.327579    -0.15   0.882    -4.929086    4.236094
ln_fteteac~t |   .2516953   .4561237     0.55   0.582    -.6463311    1.149722
ln_fteadmi~t |  -.0563292   .0900504    -0.63   0.532    -.2336224     .120964
ln_fteserv~t |   .0410438   .0678899     0.60   0.546    -.0926193    .1747069
avg_gr6mat~e |  -.0085803    .530743    -0.02   0.987    -1.053519    1.036358
avg_gr8ela~e |  -.1073515   .5598998    -0.19   0.848    -1.209695    .9949916
       _cons |   .2736811   1.434157     0.19   0.849    -2.549918     3.09728
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_dk_enr_las_sp_las_ct_p_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       369
-------------+----------------------------------   F(14, 354)      =      0.76
       Model |  11.7135153        14  .836679663   Prob > F        =    0.7175
    Residual |  392.140214       354  1.10774072   R-squared       =    0.0290
-------------+----------------------------------   Adj R-squared   =   -0.0094
       Total |   403.85373       368  1.09742861   Root MSE        =    1.0525

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |   .0496864   .0827359     0.60   0.549    -.1130293    .2124021
ln_min~rprop |   .3116557   .2234584     1.39   0.164    -.1278173    .7511287
ln_maleenr~p |  -.6800916   .7550783    -0.90   0.368    -2.165095    .8049117
ln_freemea~p |  -.1136905   .1706007    -0.67   0.506    -.4492089    .2218279
   ln_elprop |   .0201347   .0464483     0.43   0.665    -.0712147    .1114841
ln_maletea~p |   .0513571   .0944019     0.54   0.587     -.134302    .2370162
ln_min~fprop |  -.0426038   .0503108    -0.85   0.398    -.1415494    .0563418
ln_newteac~p |   .0116597   .0521715     0.22   0.823    -.0909452    .1142647
ln_fullcre~p |  -1.203203   1.809931    -0.66   0.507    -4.762772    2.356366
ln_fteteac~t |   .2437687   .4130493     0.59   0.555    -.5685704    1.056108
ln_fteadmi~t |  -.0819451   .0893909    -0.92   0.360    -.2577491     .093859
ln_fteserv~t |   .0512961    .051888     0.99   0.324    -.0507514    .1533437
avg_gr6mat~e |  -.3773474   .4669583    -0.81   0.420    -1.295709    .5410138
avg_gr8ela~e |   .3336388   .4938295     0.68   0.500    -.6375698    1.304847
       _cons |    .217864   1.312983     0.17   0.868    -2.364364    2.800092
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_dk_enr_las_sp_las_ct_p_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       400
-------------+----------------------------------   F(14, 385)      =      3.29
       Model |  37.6462748        14  2.68901963   Prob > F        =    0.0001
    Residual |  314.441781       385    .8167319   R-squared       =    0.1069
-------------+----------------------------------   Adj R-squared   =    0.0744
       Total |  352.088056       399  .882426206   Root MSE        =    .90373

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |   .0194889   .0623143     0.31   0.755      -.10303    .1420079
ln_min~rprop |   .0750784   .1683321     0.45   0.656    -.2558869    .4060438
ln_maleenr~p |  -.4602549   .6107391    -0.75   0.452    -1.661056    .7405466
ln_freemea~p |   .3855603   .1399282     2.76   0.006     .1104412    .6606793
   ln_elprop |   .0323691   .0290938     1.11   0.267    -.0248336    .0895718
ln_maletea~p |   .0624625   .0703367     0.89   0.375    -.0758296    .2007547
ln_min~fprop |  -.0951255    .033542    -2.84   0.005     -.161074   -.0291771
ln_newteac~p |   .0990851   .0361307     2.74   0.006     .0280469    .1701233
ln_fullcre~p |   1.311792   1.440152     0.91   0.363    -1.519755    4.143339
ln_fteteac~t |   -.524588    .297971    -1.76   0.079    -1.110442    .0612661
ln_fteadmi~t |  -.1127361   .0560933    -2.01   0.045    -.2230236   -.0024487
ln_fteserv~t |  -.0123207   .0308127    -0.40   0.689     -.072903    .0482615
avg_gr6mat~e |  -.2014219   .3748477    -0.54   0.591    -.9384269     .535583
avg_gr8ela~e |    .814797   .3898042     2.09   0.037     .0483855    1.581209
       _cons |  -1.979135   1.029605    -1.92   0.055    -4.003488     .045218
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_dk_enr_2year_b_sp_b_ct_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       292
-------------+----------------------------------   F(14, 277)      =      3.22
       Model |  36.9675872        14  2.64054194   Prob > F        =    0.0001
    Residual |  226.915769       277  .819190502   R-squared       =    0.1401
-------------+----------------------------------   Adj R-squared   =    0.0966
       Total |  263.883356       291  .906815657   Root MSE        =    .90509

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |  -.0689767   .0725952    -0.95   0.343    -.2118851    .0739317
ln_min~rprop |   .2545665   .1944793     1.31   0.192    -.1282787    .6374117
ln_maleenr~p |   .0960318   .7031789     0.14   0.891    -1.288222    1.480285
ln_freemea~p |   .3606085   .1607761     2.24   0.026     .0441103    .6771067
   ln_elprop |   .0352346   .0358896     0.98   0.327    -.0354164    .1058857
ln_maletea~p |  -.0089738   .0876765    -0.10   0.919    -.1815707    .1636231
ln_min~fprop |  -.1056237    .039362    -2.68   0.008    -.1831103   -.0281371
ln_newteac~p |   .1517944   .0556959     2.73   0.007     .0421533    .2614355
ln_fullcre~p |   3.839262   1.975451     1.94   0.053    -.0495408    7.728065
ln_fteteac~t |  -.6780647   .3713656    -1.83   0.069    -1.409122    .0529926
ln_fteadmi~t |  -.1029368   .0585519    -1.76   0.080       -.2182    .0123263
ln_fteserv~t |     -.0432   .0590027    -0.73   0.465    -.1593506    .0729506
avg_gr6mat~e |  -.1065735   .4483622    -0.24   0.812    -.9892036    .7760566
avg_gr8ela~e |   .7092797   .4627349     1.53   0.126    -.2016441    1.620203
       _cons |  -1.972817   1.205542    -1.64   0.103    -4.346005    .4003707
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_dk_enr_2year_b_sp_b_ct_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       382
-------------+----------------------------------   F(14, 367)      =      3.36
       Model |  38.9420106        14  2.78157219   Prob > F        =    0.0000
    Residual |   303.46162       367    .8268709   R-squared       =    0.1137
-------------+----------------------------------   Adj R-squared   =    0.0799
       Total |  342.403631       381  .898697194   Root MSE        =    .90932

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |  -.0409937   .0637439    -0.64   0.521    -.1663428    .0843555
ln_min~rprop |   .1128379   .1755869     0.64   0.521    -.2324448    .4581207
ln_maleenr~p |  -.5241293   .6248473    -0.84   0.402     -1.75286     .704601
ln_freemea~p |   .3821173   .1435924     2.66   0.008     .0997502    .6644843
   ln_elprop |   .0475818   .0315403     1.51   0.132    -.0144405    .1096041
ln_maletea~p |    .052692   .0730921     0.72   0.471    -.0910398    .1964239
ln_min~fprop |   -.107077    .037351    -2.87   0.004    -.1805259   -.0336281
ln_newteac~p |   .0959744   .0365432     2.63   0.009      .024114    .1678348
ln_fullcre~p |   1.045947   1.489174     0.70   0.483    -1.882439    3.974332
ln_fteteac~t |  -.4786835   .3009865    -1.59   0.113    -1.070558    .1131911
ln_fteadmi~t |  -.1130882   .0568516    -1.99   0.047     -.224884   -.0012924
ln_fteserv~t |   -.011777   .0331942    -0.35   0.723    -.0770516    .0534977
avg_gr6mat~e |  -.2509401   .3836375    -0.65   0.513    -1.005344    .5034634
avg_gr8ela~e |   .9413343    .399181     2.36   0.019     .1563653    1.726303
       _cons |  -1.861748   1.049706    -1.77   0.077    -3.925942    .2024452
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_dk_enr_2year_b_sp_b_ct_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       385
-------------+----------------------------------   F(14, 370)      =      2.93
       Model |  41.2934462        14  2.94953187   Prob > F        =    0.0003
    Residual |  372.825364       370  1.00763612   R-squared       =    0.0997
-------------+----------------------------------   Adj R-squared   =    0.0656
       Total |   414.11881       384   1.0784344   Root MSE        =    1.0038

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |   .0658238   .0710926     0.93   0.355    -.0739725      .20562
ln_min~rprop |   .6464107    .204095     3.17   0.002     .2450791    1.047742
ln_maleenr~p |  -.4992125   .7068555    -0.71   0.480     -1.88917    .8907454
ln_freemea~p |   .0387383   .1604665     0.24   0.809    -.2768024     .354279
   ln_elprop |   .0315903   .0430939     0.73   0.464    -.0531493    .1163299
ln_maletea~p |  -.0079464   .0845804    -0.09   0.925    -.1742648    .1583721
ln_min~fprop |  -.1234397   .0451522    -2.73   0.007    -.2122268   -.0346526
ln_newteac~p |   .0546698   .0495803     1.10   0.271    -.0428247    .1521643
ln_fullcre~p |  -1.472784    1.68084    -0.88   0.381    -4.777981    1.832413
ln_fteteac~t |  -.2311063    .391362    -0.59   0.555    -1.000679    .5384665
ln_fteadmi~t |  -.0939293   .0838966    -1.12   0.264    -.2589032    .0710447
ln_fteserv~t |    .065767   .0452605     1.45   0.147     -.023233    .1547671
avg_gr6mat~e |  -.2281627   .4413998    -0.52   0.606     -1.09613    .6398041
avg_gr8ela~e |   .3836971   .4687642     0.82   0.414    -.5380791    1.305473
       _cons |  -.7809445    1.23828    -0.63   0.529    -3.215893    1.654004
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_dk_enr_2year_las_sp_las_ct_p_climateindex.dta
    saved

      Source |       SS           df       MS      Number of obs   =       284
-------------+----------------------------------   F(14, 269)      =      2.82
       Model |  39.6974208        14  2.83553006   Prob > F        =    0.0006
    Residual |  270.309565       269  1.00486827   R-squared       =    0.1281
-------------+----------------------------------   Adj R-squared   =    0.0827
       Total |  310.006986       283  1.09543105   Root MSE        =    1.0024

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |   .0219786   .0844577     0.26   0.795    -.1443036    .1882609
ln_min~rprop |   .7863814   .2347217     3.35   0.001     .3242561    1.248507
ln_maleenr~p |  -.1495821    .811045    -0.18   0.854    -1.746385    1.447221
ln_freemea~p |   .0739657   .1801109     0.41   0.682    -.2806407     .428572
   ln_elprop |    .023043   .0470028     0.49   0.624    -.0694972    .1155831
ln_maletea~p |   .0057019   .0985511     0.06   0.954    -.1883276    .1997315
ln_min~fprop |  -.1177092   .0495443    -2.38   0.018    -.2152531   -.0201654
ln_newteac~p |   .0647299   .0621598     1.04   0.299    -.0576516    .1871115
ln_fullcre~p |   .6925605   2.277013     0.30   0.761    -3.790473    5.175594
ln_fteteac~t |  -.0874493   .4462145    -0.20   0.845    -.9659662    .7910677
ln_fteadmi~t |  -.0647828   .0880941    -0.74   0.463    -.2382244    .1086587
ln_fteserv~t |   -.013017    .066415    -0.20   0.845    -.1437764    .1177423
avg_gr6mat~e |  -.0602257   .5192127    -0.12   0.908    -1.082463    .9620117
avg_gr8ela~e |   .3529916   .5477361     0.64   0.520    -.7254033    1.431386
       _cons |  -.1096629      1.403    -0.08   0.938     -2.87192    2.652594
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_dk_enr_2year_las_sp_las_ct_p_qualityindex.dta
    saved

      Source |       SS           df       MS      Number of obs   =       369
-------------+----------------------------------   F(14, 354)      =      2.86
       Model |  40.6262278        14  2.90187341   Prob > F        =    0.0004
    Residual |  359.509668       354  1.01556403   R-squared       =    0.1015
-------------+----------------------------------   Adj R-squared   =    0.0660
       Total |  400.135896       368   1.0873258   Root MSE        =    1.0078

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |  -.0324172   .0792189    -0.41   0.683     -.188216    .1233816
ln_min~rprop |   .7041343   .2139594     3.29   0.001     .2833429    1.124926
ln_maleenr~p |  -.4587875   .7229805    -0.63   0.526    -1.880664    .9630896
ln_freemea~p |    .042191   .1633486     0.26   0.796    -.2790647    .3634468
   ln_elprop |   .0272427   .0444738     0.61   0.541    -.0602235    .1147088
ln_maletea~p |   .0199681    .090389     0.22   0.825    -.1577988     .197735
ln_min~fprop |  -.1407229   .0481721    -2.92   0.004    -.2354624   -.0459834
ln_newteac~p |   .0418461   .0499537     0.84   0.403    -.0563973    .1400894
ln_fullcre~p |  -1.292946   1.732992    -0.75   0.456    -4.701201    2.115308
ln_fteteac~t |  -.1079051   .3954909    -0.27   0.785    -.8857123    .6699021
ln_fteadmi~t |  -.0851527    .085591    -0.99   0.320    -.2534835     .083178
ln_fteserv~t |   .0428636   .0496823     0.86   0.389     -.054846    .1405732
avg_gr6mat~e |  -.2621758   .4471083    -0.59   0.558    -1.141498    .6171466
avg_gr8ela~e |   .5228733   .4728372     1.11   0.270    -.4070499    1.452796
       _cons |  -.4688135   1.257169    -0.37   0.709    -2.941273    2.003646
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_dk_enr_2year_las_sp_las_ct_p_supportindex.dta
    saved

      Source |       SS           df       MS      Number of obs   =       400
-------------+----------------------------------   F(14, 385)      =      5.67
       Model |    53.93194        14  3.85228143   Prob > F        =    0.0000
    Residual |  261.642308       385  .679590411   R-squared       =    0.1709
-------------+----------------------------------   Adj R-squared   =    0.1408
       Total |  315.574248       399  .790912903   Root MSE        =    .82437

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |   .0375197   .0568423     0.66   0.510    -.0742405    .1492799
ln_min~rprop |   .6091131   .1535504     3.97   0.000     .3072108    .9110153
ln_maleenr~p |   .5031058   .5571082     0.90   0.367    -.5922496    1.598461
ln_freemea~p |  -.6825532   .1276407    -5.35   0.000    -.9335132   -.4315932
   ln_elprop |   .0046163    .026539     0.17   0.862    -.0475632    .0567959
ln_maletea~p |  -.0707877   .0641602    -1.10   0.271     -.196936    .0553606
ln_min~fprop |   .0790632   .0305966     2.58   0.010     .0189059    .1392205
ln_newteac~p |  -.0248897    .032958    -0.76   0.451    -.0896899    .0399104
ln_fullcre~p |  -2.127177   1.313688    -1.62   0.106    -4.710077    .4557233
ln_fteteac~t |   .7465468   .2718052     2.75   0.006     .2121383    1.280955
ln_fteadmi~t |   .0433553   .0511675     0.85   0.397    -.0572475    .1439581
ln_fteserv~t |   .0089045    .028107     0.32   0.752    -.0463579    .0641668
avg_gr6mat~e |    .632194   .3419312     1.85   0.065    -.0400923     1.30448
avg_gr8ela~e |  -.4254844   .3555743    -1.20   0.232    -1.124595    .2736261
       _cons |   2.671615   .9391925     2.84   0.005     .8250263    4.518203
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_dk_enr_4year_b_sp_b_ct_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       292
-------------+----------------------------------   F(14, 277)      =      5.50
       Model |  51.4922175        14  3.67801554   Prob > F        =    0.0000
    Residual |  185.161469       277  .668452957   R-squared       =    0.2176
-------------+----------------------------------   Adj R-squared   =    0.1780
       Total |  236.653687       291  .813242909   Root MSE        =    .81759

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |   .1023583   .0655769     1.56   0.120    -.0267341    .2314507
ln_min~rprop |   .4597752   .1756776     2.62   0.009     .1139424     .805608
ln_maleenr~p |  -.0156098   .6351975    -0.02   0.980    -1.266037    1.234818
ln_freemea~p |  -.6820246   .1452327    -4.70   0.000    -.9679247   -.3961246
   ln_elprop |   .0094729   .0324199     0.29   0.770    -.0543479    .0732936
ln_maletea~p |  -.0741638   .0792002    -0.94   0.350    -.2300746    .0817469
ln_min~fprop |    .102058   .0355566     2.87   0.004     .0320626    .1720534
ln_newteac~p |  -.0662062   .0503114    -1.32   0.189    -.1652475    .0328351
ln_fullcre~p |  -4.564682    1.78447    -2.56   0.011    -8.077526   -1.051837
ln_fteteac~t |   .6770746    .335463     2.02   0.045     .0166938    1.337455
ln_fteadmi~t |   .0512649   .0528912     0.97   0.333    -.0528549    .1553847
ln_fteserv~t |   .0681256   .0532984     1.28   0.202    -.0367958    .1730471
avg_gr6mat~e |   .4800532   .4050158     1.19   0.237    -.3172467    1.277353
avg_gr8ela~e |  -.2754082    .417999    -0.66   0.511    -1.098266    .5474499
       _cons |   2.335044   1.088994     2.14   0.033     .1912899    4.478799
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_dk_enr_4year_b_sp_b_ct_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       382
-------------+----------------------------------   F(14, 367)      =      5.63
       Model |  53.3562229        14  3.81115878   Prob > F        =    0.0000
    Residual |  248.589766       367   .67735631   R-squared       =    0.1767
-------------+----------------------------------   Adj R-squared   =    0.1453
       Total |  301.945989       381  .792509157   Root MSE        =    .82302

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |    .101803   .0576937     1.76   0.078    -.0116487    .2152548
ln_min~rprop |   .5851481   .1589212     3.68   0.000     .2726376    .8976586
ln_maleenr~p |   .4181387   .5655404     0.74   0.460    -.6939676    1.530245
ln_freemea~p |  -.7052993   .1299634    -5.43   0.000    -.9608657   -.4497329
   ln_elprop |   .0080939   .0285466     0.28   0.777    -.0480416    .0642294
ln_maletea~p |  -.0958266   .0661546    -1.45   0.148    -.2259162    .0342631
ln_min~fprop |   .0978857   .0338059     2.90   0.004     .0314081    .1643633
ln_newteac~p |  -.0214859   .0330747    -0.65   0.516    -.0865257    .0435539
ln_fullcre~p |  -1.775981    1.34783    -1.32   0.188     -4.42642    .8744591
ln_fteteac~t |   .7513132   .2724186     2.76   0.006     .2156159     1.28701
ln_fteadmi~t |   .0428443   .0514556     0.83   0.406    -.0583405    .1440291
ln_fteserv~t |   .0110207   .0300436     0.37   0.714    -.0480585    .0700999
avg_gr6mat~e |   .6254406   .3472248     1.80   0.072    -.0573594     1.30824
avg_gr8ela~e |  -.4604969    .361293    -1.27   0.203    -1.170961    .2499674
       _cons |    2.61545    .950074     2.75   0.006     .7471774    4.483722
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_dk_enr_4year_b_sp_b_ct_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       385
-------------+----------------------------------   F(14, 370)      =      2.26
       Model |  25.7310521        14  1.83793229   Prob > F        =    0.0058
    Residual |  300.866231       370  .813151975   R-squared       =    0.0788
-------------+----------------------------------   Adj R-squared   =    0.0439
       Total |  326.597283       384  .850513758   Root MSE        =    .90175

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |   .0157051   .0638643     0.25   0.806    -.1098775    .1412877
ln_min~rprop |  -.4561984   .1833439    -2.49   0.013    -.8167251   -.0956718
ln_maleenr~p |  -.0744019   .6349867    -0.12   0.907    -1.323037    1.174234
ln_freemea~p |   -.164567   .1441512    -1.14   0.254    -.4480254    .1188915
   ln_elprop |  -.0197087   .0387123    -0.51   0.611    -.0958325    .0564151
ln_maletea~p |   .0609289   .0759807     0.80   0.423    -.0884793    .2103371
ln_min~fprop |   .0971838   .0405614     2.40   0.017      .017424    .1769435
ln_newteac~p |  -.0429328   .0445393    -0.96   0.336    -.1305147    .0446491
ln_fullcre~p |  -.1395197   1.509942    -0.09   0.926    -3.108665    2.829625
ln_fteteac~t |   .4383766   .3515707     1.25   0.213    -.2529506    1.129704
ln_fteadmi~t |   .0144673   .0753665     0.19   0.848    -.1337332    .1626677
ln_fteserv~t |   .0009216   .0406587     0.02   0.982    -.0790294    .0808727
avg_gr6mat~e |  -.0635587   .3965209    -0.16   0.873    -.8432759    .7161585
avg_gr8ela~e |  -.2730817   .4211031    -0.65   0.517    -1.101137    .5549738
       _cons |   .9991316   1.112379     0.90   0.370    -1.188246    3.186509
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_dk_enr_4year_las_sp_las_ct_p_climateindex.dta
    saved

      Source |       SS           df       MS      Number of obs   =       284
-------------+----------------------------------   F(14, 269)      =      2.78
       Model |  31.8541192        14  2.27529423   Prob > F        =    0.0007
    Residual |  220.466039       269  .819576353   R-squared       =    0.1262
-------------+----------------------------------   Adj R-squared   =    0.0808
       Total |  252.320158       283  .891590665   Root MSE        =     .9053

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |   .0323768   .0762745     0.42   0.672    -.1177942    .1825477
ln_min~rprop |  -.6188368   .2119793    -2.92   0.004    -1.036186   -.2014873
ln_maleenr~p |  -.8934531    .732462    -1.22   0.224     -2.33554    .5486342
ln_freemea~p |  -.1918872   .1626598    -1.18   0.239    -.5121353     .128361
   ln_elprop |   -.024705   .0424487    -0.58   0.561    -.1082789    .0588689
ln_maletea~p |   .0574504   .0890024     0.65   0.519    -.1177794    .2326803
ln_min~fprop |   .1262967   .0447439     2.82   0.005      .038204    .2143894
ln_newteac~p |  -.0837321   .0561371    -1.49   0.137     -.194256    .0267918
ln_fullcre~p |  -1.272344   2.056391    -0.62   0.537    -5.321012    2.776324
ln_fteteac~t |   .3586549   .4029803     0.89   0.374    -.4347416    1.152051
ln_fteadmi~t |   .0186048   .0795585     0.23   0.815    -.1380318    .1752414
ln_fteserv~t |   .0595007     .05998     0.99   0.322    -.0585892    .1775906
avg_gr6mat~e |    .062665   .4689056     0.13   0.894    -.8605268    .9858567
avg_gr8ela~e |  -.5280671   .4946654    -1.07   0.287    -1.501975    .4458409
       _cons |   .3897409   1.267062     0.31   0.759    -2.104878     2.88436
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_dk_enr_4year_las_sp_las_ct_p_qualityindex.dta
    saved

      Source |       SS           df       MS      Number of obs   =       369
-------------+----------------------------------   F(14, 354)      =      2.51
       Model |  28.3053051        14  2.02180751   Prob > F        =    0.0020
    Residual |  285.400954       354  .806217383   R-squared       =    0.0902
-------------+----------------------------------   Adj R-squared   =    0.0542
       Total |  313.706259       368   .85246266   Root MSE        =     .8979

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |   .0921791   .0705832     1.31   0.192    -.0466359    .2309942
ln_min~rprop |  -.4995095   .1906355    -2.62   0.009      -.87443   -.1245889
ln_maleenr~p |  -.1988571   .6441678    -0.31   0.758    -1.465734     1.06802
ln_freemea~p |  -.1704236   .1455419    -1.17   0.242     -.456659    .1158118
   ln_elprop |   -.010827   .0396257    -0.27   0.785    -.0887584    .0671044
ln_maletea~p |   .0286336   .0805356     0.36   0.722    -.1297548     .187022
ln_min~fprop |   .1207272   .0429208     2.81   0.005     .0363153     .205139
ln_newteac~p |  -.0360963   .0445082    -0.81   0.418      -.12363    .0514375
ln_fullcre~p |   .1906396   1.544077     0.12   0.902    -2.846078    3.227357
ln_fteteac~t |    .375154   .3523781     1.06   0.288    -.3178638    1.068172
ln_fteadmi~t |   .0164999   .0762606     0.22   0.829     -.133481    .1664808
ln_fteserv~t |   .0035905   .0442664     0.08   0.935    -.0834677    .0906487
avg_gr6mat~e |  -.0929634   .3983686    -0.23   0.816    -.8764301    .6905034
avg_gr8ela~e |   -.263851   .4212928    -0.63   0.532    -1.092403    .5647005
       _cons |   .7532007   1.120124     0.67   0.502    -1.449734    2.956135
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/va_dk_enr_4year_las_sp_las_ct_p_supportindex.dta
    saved
  (0 bytes saved)
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/dta/allsvyfactor/catego
    > ryindex/compcaseindexwithdemo.dta saved
- local merge_command use
- local merge_options clear
- foreach index of local indexvars {
- foreach va_outcome in ela math enr enr_2year enr_4year dk_enr dk_enr_2year dk
> _enr_4year {
- di "va: `va_outcome'"
= di "va: ela"
va: ela
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= use /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
> wcontrols/compcase/va_ela_b_sp_b_ct_climateindex, clear
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_ela_las_sp_las_ct_p_climateindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - sort `varlist'
  = sort var
  - }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_ela_las_sp_las_ct_p_climateindex.
> dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_ela_las_sp_las_ct_p_climat
> eindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_ela_las_sp_las_ct_p_climateindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: math"
va: math
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_math_b_sp_b_ct_climateindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_math_b_sp_b_ct_climateindex.dta",
>  varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_math_b_sp_b_ct_climateinde
> x.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_math_b_sp_b_ct_climateindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_math_las_sp_las_ct_p_climateindex, noge
> n
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_math_las_sp_las_ct_p_climateindex
> .dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_math_las_sp_las_ct_p_clima
> teindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_math_las_sp_las_ct_p_climateindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: enr"
va: enr
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_enr_b_sp_b_ct_climateindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_enr_b_sp_b_ct_climateindex.dta", 
> varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_enr_b_sp_b_ct_climateindex
> .dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_enr_b_sp_b_ct_climateindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_enr_las_sp_las_ct_p_climateindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_enr_las_sp_las_ct_p_climateindex.
> dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_enr_las_sp_las_ct_p_climat
> eindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_enr_las_sp_las_ct_p_climateindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: enr_2year"
va: enr_2year
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_enr_2year_b_sp_b_ct_climateindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_enr_2year_b_sp_b_ct_climateindex.
> dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_enr_2year_b_sp_b_ct_climat
> eindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_enr_2year_b_sp_b_ct_climateindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_enr_2year_las_sp_las_ct_p_climateindex,
>  nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_enr_2year_las_sp_las_ct_p_climate
> index.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_enr_2year_las_sp_las_ct_p_
> climateindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_enr_2year_las_sp_las_ct_p_climateindex.dta", cle
> ar
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: enr_4year"
va: enr_4year
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_enr_4year_b_sp_b_ct_climateindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_enr_4year_b_sp_b_ct_climateindex.
> dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_enr_4year_b_sp_b_ct_climat
> eindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_enr_4year_b_sp_b_ct_climateindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_enr_4year_las_sp_las_ct_p_climateindex,
>  nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_enr_4year_las_sp_las_ct_p_climate
> index.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_enr_4year_las_sp_las_ct_p_
> climateindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_enr_4year_las_sp_las_ct_p_climateindex.dta", cle
> ar
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: dk_enr"
va: dk_enr
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_dk_enr_b_sp_b_ct_climateindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_dk_enr_b_sp_b_ct_climateindex.dta
> ", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_dk_enr_b_sp_b_ct_climatein
> dex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_dk_enr_b_sp_b_ct_climateindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_dk_enr_las_sp_las_ct_p_climateindex, no
> gen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_dk_enr_las_sp_las_ct_p_climateind
> ex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_dk_enr_las_sp_las_ct_p_cli
> mateindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_dk_enr_las_sp_las_ct_p_climateindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: dk_enr_2year"
va: dk_enr_2year
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_dk_enr_2year_b_sp_b_ct_climateindex, no
> gen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_dk_enr_2year_b_sp_b_ct_climateind
> ex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_dk_enr_2year_b_sp_b_ct_cli
> mateindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_dk_enr_2year_b_sp_b_ct_climateindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_dk_enr_2year_las_sp_las_ct_p_climateind
> ex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_dk_enr_2year_las_sp_las_ct_p_clim
> ateindex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_dk_enr_2year_las_sp_las_ct
> _p_climateindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_dk_enr_2year_las_sp_las_ct_p_climateindex.dta", 
> clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: dk_enr_4year"
va: dk_enr_4year
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_dk_enr_4year_b_sp_b_ct_climateindex, no
> gen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_dk_enr_4year_b_sp_b_ct_climateind
> ex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_dk_enr_4year_b_sp_b_ct_cli
> mateindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_dk_enr_4year_b_sp_b_ct_climateindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_dk_enr_4year_las_sp_las_ct_p_climateind
> ex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_dk_enr_4year_las_sp_las_ct_p_clim
> ateindex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_dk_enr_4year_las_sp_las_ct
> _p_climateindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_dk_enr_4year_las_sp_las_ct_p_climateindex.dta", 
> clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- save $projdir/out/dta/factor/indexregwcontrols/`type'/`index'_va_`type'regs_w
> controls, replace
= save /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexre
> gwcontrols/compcase/climateindex_va_compcaseregs_wcontrols, replace
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/climateindex_va_compcaseregs_wcontrols.dta saved
- export excel using $projdir/out/xls/factor/indexregwcontrols/`type'/`index'_v
> a_`type'regs_wcontrols, replace firstrow(variables)
= export excel using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/xls/
> factor/indexregwcontrols/compcase/climateindex_va_compcaseregs_wcontrols, rep
> lace firstrow(variables)
  ------------------------------------------------------------ begin export ---
  - version 12
  - gettoken subcmd 0 : 0
  - if `"`subcmd'"' == "dbas" {
  = if `"excel"' == "dbas" {
    ExpDbase `macval(0)'
    }
  - else if `"`subcmd'"' == "dbase" {
  = else if `"excel"' == "dbase" {
    ExpDbase `macval(0)'
    }
  - else if `"`subcmd'"' == "delim" {
  = else if `"excel"' == "delim" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "delimi" {
  = else if `"excel"' == "delimi" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "delimit" {
  = else if `"excel"' == "delimit" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "delimite" {
  = else if `"excel"' == "delimite" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "delimited" {
  = else if `"excel"' == "delimited" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "exc" {
  = else if `"excel"' == "exc" {
    ExpExcel `macval(0)'
    }
  - else if `"`subcmd'"' == "exce" {
  = else if `"excel"' == "exce" {
    ExpExcel `macval(0)'
    }
  - else if `"`subcmd'"' == "excel" {
  = else if `"excel"' == "excel" {
  - ExpExcel `macval(0)'
  = ExpExcel  using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/xls/f
> actor/indexregwcontrols/compcase/climateindex_va_compcaseregs_wcontrols, repl
> ace firstrow(variables)
    ------------------------------------------------- begin export.ExpExcel ---
    - version 12
    - scalar ExpExcelCleanUp = -1
    - capture noi export_excel `macval(0)'
    = capture noi export_excel using /home/research/ca_ed_lab/users/chesun/gsr/
> caschls/out/xls/factor/indexregwcontrols/compcase/climateindex_va_compcasereg
> s_wcontrols, replace firstrow(variables)
      -------------------------------------------------- begin export_excel ---
      - version 12
      - if ("`c(excelsupport)'" != "1") {
      = if ("1" != "1") {
        dis as err `"export excel is not supported on this platform."'
        exit 198
        }
      - capture syntax [varlist] using/ [if] [in] [, *]
      - if _rc {
        local orig0 `"`macval(0)'"'
        local 0 `"using `macval(0)'"'
        cap syntax using/ [if] [in] [, *]
        if _rc {
        if _rc == 111 {
        dis as err `"variable(s) not defined."'
        exit 111
        }
        local 0 `"`macval(orig0)'"'
        syntax [varlist] using/ [if] [in] [, SHeet(string asis) SHEETMODify SHE
> ETREPlace cell(string) FIRSTrow(string) DATEstring(string) MISSing(string) lo
> cale(string) NOLabel KEEPCELLFmt REPLACE]
        }
        else {
        syntax using/ [if] [in] [, SHeet(string asis) SHEETMODify SHEETREPlace 
> cell(string) FIRSTrow(string) DATEstring(string) MISSing(string) locale(strin
> g) NOLabel KEEPCELLFmt REPLACE]
        }
        }
      - else {
      - syntax [varlist] using/ [if] [in] [, SHeet(string asis) SHEETMODify SHE
> ETREPlace cell(string) FIRSTrow(string) DATEstring(string) MISSing(string) lo
> cale(string) NOLabel KEEPCELLFmt REPLACE]
      - }
      - if (`"`varlist'"'=="") {
      = if (`"var va_ela_b_sp_b_ct va_ela_las_sp_las_ct_p va_math_b_sp_b_ct va_
> math_las_sp_las_ct_p va_enr_b_sp_b_ct va_enr_las_sp_las_ct_p va_enr_2year_b_s
> p_b_ct va_enr_2year_las_sp_las_ct_p va_enr_4year_b_sp_b_ct va_enr_4year_las_s
> p_las_ct_p va_dk_enr_b_sp_b_ct va_dk_enr_las_sp_las_ct_p va_dk_enr_2year_b_sp
> _b_ct va_dk_enr_2year_las_sp_las_ct_p va_dk_enr_4year_b_sp_b_ct va_dk_enr_4ye
> ar_las_sp_las_ct_p"'=="") {
        unab varlist : _all
        }
      - marksample touse, novarlist
      - mata : export_excel_export_file("`touse'")
      = mata : export_excel_export_file("__000000")
        -------------------------------------------------------- begin unab ---
        - version 6
        - gettoken user 0: 0, parse(" :")
        - gettoken colon 0: 0, parse(" :")
        - if `"`colon'"' != ":" { error 198 }
        = if `":"' != ":" { error 198 }
        - syntax [varlist(default=empty)] [, MIN(integer 1) MAX(integer 120000)
>  NAME(string)]
        - c_local `user' `varlist'
        = c_local _parse_varlist var va_ela_b_sp_b_ct va_ela_las_sp_las_ct_p va
> _math_b_sp_b_ct va_math_las_sp_las_ct_p va_enr_b_sp_b_ct va_enr_las_sp_las_ct
> _p va_enr_2year_b_sp_b_ct va_enr_2year_las_sp_las_ct_p va_enr_4year_b_sp_b_ct
>  va_enr_4year_las_sp_las_ct_p va_dk_enr_b_sp_b_ct va_dk_enr_las_sp_las_ct_p v
> a_dk_enr_2year_b_sp_b_ct va_dk_enr_2year_las_sp_las_ct_p va_dk_enr_4year_b_sp
> _b_ct va_dk_enr_4year_las_sp_las_ct_p
        - local n : word count `varlist'
        = local n : word count var va_ela_b_sp_b_ct va_ela_las_sp_las_ct_p va_m
> ath_b_sp_b_ct va_math_las_sp_las_ct_p va_enr_b_sp_b_ct va_enr_las_sp_las_ct_p
>  va_enr_2year_b_sp_b_ct va_enr_2year_las_sp_las_ct_p va_enr_4year_b_sp_b_ct v
> a_enr_4year_las_sp_las_ct_p va_dk_enr_b_sp_b_ct va_dk_enr_las_sp_las_ct_p va_
> dk_enr_2year_b_sp_b_ct va_dk_enr_2year_las_sp_las_ct_p va_dk_enr_4year_b_sp_b
> _ct va_dk_enr_4year_las_sp_las_ct_p
        - if `n'>=`min' & `n'<=`max' { exit }
        = if 17>=1 & 17<=120000 { exit }
        ---------------------------------------------------------- end unab ---
file /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/xls/factor/indexregw
> controls/compcase/climateindex_va_compcaseregs_wcontrols.xls saved
      ---------------------------------------------------- end export_excel ---
    - nobreak {
    - local rc = _rc
    - if `rc' {
    = if 0 {
      if scalar(ExpExcelCleanUp) >= 0 {
      mata : export_excel_cleanup()
      }
      }
    - }
    - scalar drop ExpExcelCleanUp
    - exit `rc'
    = exit 0
    --------------------------------------------------- end export.ExpExcel ---
  - }
  - else if `"`subcmd'"' == "sasxport5" {
  = else if `"excel"' == "sasxport5" {
    ExpSasxport5 `0'
    }
  - else if `"`subcmd'"' == "sasxport8" {
  = else if `"excel"' == "sasxport8" {
    ExpSasxport8 `0'
    }
  - else if `"`subcmd'"' == "sasxport" {
  = else if `"excel"' == "sasxport" {
    if (_caller() < 16) {
    ExpSasxport5 `macval(0)'
    }
    else {
    di as error "invalid syntax"
    di as error "   specify either {cmd:export sasxport5} or {cmd:export sasxpo
> rt8}"
    exit 198
    }
    }
  - else if `"`subcmd'"' == "shp" {
  = else if `"excel"' == "shp" {
    ExpShape `macval(0)'
    }
  - else {
    display as error `"export: unknown subcommand "`subcmd'""'
    exit 198
    }
  -------------------------------------------------------------- end export ---
- }
- foreach va_outcome in ela math enr enr_2year enr_4year dk_enr dk_enr_2year dk
> _enr_4year {
- di "va: `va_outcome'"
= di "va: ela"
va: ela
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_ela_b_sp_b_ct_qualityindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_ela_b_sp_b_ct_qualityindex.dta", 
> varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_ela_b_sp_b_ct_qualityindex
> .dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_ela_b_sp_b_ct_qualityindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
    sort `varlist'
    }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 2
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+2)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (2|2) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 2 as txt "
>   "
        from using                          2  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 34 as txt "  
> "
    Matched                                34  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_ela_las_sp_las_ct_p_qualityindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - sort `varlist'
  = sort var
  - }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_ela_las_sp_las_ct_p_qualityindex.
> dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_ela_las_sp_las_ct_p_qualit
> yindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_ela_las_sp_las_ct_p_qualityindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
(variable va_ela_las_sp_las_ct_p was str6, now str7 to accommodate using
       data's values)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: math"
va: math
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_math_b_sp_b_ct_qualityindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_math_b_sp_b_ct_qualityindex.dta",
>  varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_math_b_sp_b_ct_qualityinde
> x.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_math_b_sp_b_ct_qualityindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_math_las_sp_las_ct_p_qualityindex, noge
> n
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_math_las_sp_las_ct_p_qualityindex
> .dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_math_las_sp_las_ct_p_quali
> tyindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_math_las_sp_las_ct_p_qualityindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: enr"
va: enr
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_enr_b_sp_b_ct_qualityindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_enr_b_sp_b_ct_qualityindex.dta", 
> varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_enr_b_sp_b_ct_qualityindex
> .dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_enr_b_sp_b_ct_qualityindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_enr_las_sp_las_ct_p_qualityindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_enr_las_sp_las_ct_p_qualityindex.
> dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_enr_las_sp_las_ct_p_qualit
> yindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_enr_las_sp_las_ct_p_qualityindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: enr_2year"
va: enr_2year
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_enr_2year_b_sp_b_ct_qualityindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_enr_2year_b_sp_b_ct_qualityindex.
> dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_enr_2year_b_sp_b_ct_qualit
> yindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_enr_2year_b_sp_b_ct_qualityindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_enr_2year_las_sp_las_ct_p_qualityindex,
>  nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_enr_2year_las_sp_las_ct_p_quality
> index.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_enr_2year_las_sp_las_ct_p_
> qualityindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_enr_2year_las_sp_las_ct_p_qualityindex.dta", cle
> ar
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: enr_4year"
va: enr_4year
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_enr_4year_b_sp_b_ct_qualityindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_enr_4year_b_sp_b_ct_qualityindex.
> dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_enr_4year_b_sp_b_ct_qualit
> yindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_enr_4year_b_sp_b_ct_qualityindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_enr_4year_las_sp_las_ct_p_qualityindex,
>  nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_enr_4year_las_sp_las_ct_p_quality
> index.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_enr_4year_las_sp_las_ct_p_
> qualityindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_enr_4year_las_sp_las_ct_p_qualityindex.dta", cle
> ar
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: dk_enr"
va: dk_enr
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_dk_enr_b_sp_b_ct_qualityindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_dk_enr_b_sp_b_ct_qualityindex.dta
> ", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_dk_enr_b_sp_b_ct_qualityin
> dex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_dk_enr_b_sp_b_ct_qualityindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_dk_enr_las_sp_las_ct_p_qualityindex, no
> gen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_dk_enr_las_sp_las_ct_p_qualityind
> ex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_dk_enr_las_sp_las_ct_p_qua
> lityindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_dk_enr_las_sp_las_ct_p_qualityindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: dk_enr_2year"
va: dk_enr_2year
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_dk_enr_2year_b_sp_b_ct_qualityindex, no
> gen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_dk_enr_2year_b_sp_b_ct_qualityind
> ex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_dk_enr_2year_b_sp_b_ct_qua
> lityindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_dk_enr_2year_b_sp_b_ct_qualityindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_dk_enr_2year_las_sp_las_ct_p_qualityind
> ex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_dk_enr_2year_las_sp_las_ct_p_qual
> ityindex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_dk_enr_2year_las_sp_las_ct
> _p_qualityindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_dk_enr_2year_las_sp_las_ct_p_qualityindex.dta", 
> clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: dk_enr_4year"
va: dk_enr_4year
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_dk_enr_4year_b_sp_b_ct_qualityindex, no
> gen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_dk_enr_4year_b_sp_b_ct_qualityind
> ex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_dk_enr_4year_b_sp_b_ct_qua
> lityindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_dk_enr_4year_b_sp_b_ct_qualityindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_dk_enr_4year_las_sp_las_ct_p_qualityind
> ex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_dk_enr_4year_las_sp_las_ct_p_qual
> ityindex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_dk_enr_4year_las_sp_las_ct
> _p_qualityindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_dk_enr_4year_las_sp_las_ct_p_qualityindex.dta", 
> clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- save $projdir/out/dta/factor/indexregwcontrols/`type'/`index'_va_`type'regs_w
> controls, replace
= save /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexre
> gwcontrols/compcase/qualityindex_va_compcaseregs_wcontrols, replace
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/qualityindex_va_compcaseregs_wcontrols.dta saved
- export excel using $projdir/out/xls/factor/indexregwcontrols/`type'/`index'_v
> a_`type'regs_wcontrols, replace firstrow(variables)
= export excel using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/xls/
> factor/indexregwcontrols/compcase/qualityindex_va_compcaseregs_wcontrols, rep
> lace firstrow(variables)
  ------------------------------------------------------------ begin export ---
  - version 12
  - gettoken subcmd 0 : 0
  - if `"`subcmd'"' == "dbas" {
  = if `"excel"' == "dbas" {
    ExpDbase `macval(0)'
    }
  - else if `"`subcmd'"' == "dbase" {
  = else if `"excel"' == "dbase" {
    ExpDbase `macval(0)'
    }
  - else if `"`subcmd'"' == "delim" {
  = else if `"excel"' == "delim" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "delimi" {
  = else if `"excel"' == "delimi" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "delimit" {
  = else if `"excel"' == "delimit" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "delimite" {
  = else if `"excel"' == "delimite" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "delimited" {
  = else if `"excel"' == "delimited" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "exc" {
  = else if `"excel"' == "exc" {
    ExpExcel `macval(0)'
    }
  - else if `"`subcmd'"' == "exce" {
  = else if `"excel"' == "exce" {
    ExpExcel `macval(0)'
    }
  - else if `"`subcmd'"' == "excel" {
  = else if `"excel"' == "excel" {
  - ExpExcel `macval(0)'
  = ExpExcel  using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/xls/f
> actor/indexregwcontrols/compcase/qualityindex_va_compcaseregs_wcontrols, repl
> ace firstrow(variables)
    ------------------------------------------------- begin export.ExpExcel ---
    - version 12
    - scalar ExpExcelCleanUp = -1
    - capture noi export_excel `macval(0)'
    = capture noi export_excel using /home/research/ca_ed_lab/users/chesun/gsr/
> caschls/out/xls/factor/indexregwcontrols/compcase/qualityindex_va_compcasereg
> s_wcontrols, replace firstrow(variables)
      -------------------------------------------------- begin export_excel ---
      - version 12
      - if ("`c(excelsupport)'" != "1") {
      = if ("1" != "1") {
        dis as err `"export excel is not supported on this platform."'
        exit 198
        }
      - capture syntax [varlist] using/ [if] [in] [, *]
      - if _rc {
        local orig0 `"`macval(0)'"'
        local 0 `"using `macval(0)'"'
        cap syntax using/ [if] [in] [, *]
        if _rc {
        if _rc == 111 {
        dis as err `"variable(s) not defined."'
        exit 111
        }
        local 0 `"`macval(orig0)'"'
        syntax [varlist] using/ [if] [in] [, SHeet(string asis) SHEETMODify SHE
> ETREPlace cell(string) FIRSTrow(string) DATEstring(string) MISSing(string) lo
> cale(string) NOLabel KEEPCELLFmt REPLACE]
        }
        else {
        syntax using/ [if] [in] [, SHeet(string asis) SHEETMODify SHEETREPlace 
> cell(string) FIRSTrow(string) DATEstring(string) MISSing(string) locale(strin
> g) NOLabel KEEPCELLFmt REPLACE]
        }
        }
      - else {
      - syntax [varlist] using/ [if] [in] [, SHeet(string asis) SHEETMODify SHE
> ETREPlace cell(string) FIRSTrow(string) DATEstring(string) MISSing(string) lo
> cale(string) NOLabel KEEPCELLFmt REPLACE]
      - }
      - if (`"`varlist'"'=="") {
      = if (`"var va_ela_b_sp_b_ct va_ela_las_sp_las_ct_p va_math_b_sp_b_ct va_
> math_las_sp_las_ct_p va_enr_b_sp_b_ct va_enr_las_sp_las_ct_p va_enr_2year_b_s
> p_b_ct va_enr_2year_las_sp_las_ct_p va_enr_4year_b_sp_b_ct va_enr_4year_las_s
> p_las_ct_p va_dk_enr_b_sp_b_ct va_dk_enr_las_sp_las_ct_p va_dk_enr_2year_b_sp
> _b_ct va_dk_enr_2year_las_sp_las_ct_p va_dk_enr_4year_b_sp_b_ct va_dk_enr_4ye
> ar_las_sp_las_ct_p"'=="") {
        unab varlist : _all
        }
      - marksample touse, novarlist
      - mata : export_excel_export_file("`touse'")
      = mata : export_excel_export_file("__000000")
        -------------------------------------------------------- begin unab ---
        - version 6
        - gettoken user 0: 0, parse(" :")
        - gettoken colon 0: 0, parse(" :")
        - if `"`colon'"' != ":" { error 198 }
        = if `":"' != ":" { error 198 }
        - syntax [varlist(default=empty)] [, MIN(integer 1) MAX(integer 120000)
>  NAME(string)]
        - c_local `user' `varlist'
        = c_local _parse_varlist var va_ela_b_sp_b_ct va_ela_las_sp_las_ct_p va
> _math_b_sp_b_ct va_math_las_sp_las_ct_p va_enr_b_sp_b_ct va_enr_las_sp_las_ct
> _p va_enr_2year_b_sp_b_ct va_enr_2year_las_sp_las_ct_p va_enr_4year_b_sp_b_ct
>  va_enr_4year_las_sp_las_ct_p va_dk_enr_b_sp_b_ct va_dk_enr_las_sp_las_ct_p v
> a_dk_enr_2year_b_sp_b_ct va_dk_enr_2year_las_sp_las_ct_p va_dk_enr_4year_b_sp
> _b_ct va_dk_enr_4year_las_sp_las_ct_p
        - local n : word count `varlist'
        = local n : word count var va_ela_b_sp_b_ct va_ela_las_sp_las_ct_p va_m
> ath_b_sp_b_ct va_math_las_sp_las_ct_p va_enr_b_sp_b_ct va_enr_las_sp_las_ct_p
>  va_enr_2year_b_sp_b_ct va_enr_2year_las_sp_las_ct_p va_enr_4year_b_sp_b_ct v
> a_enr_4year_las_sp_las_ct_p va_dk_enr_b_sp_b_ct va_dk_enr_las_sp_las_ct_p va_
> dk_enr_2year_b_sp_b_ct va_dk_enr_2year_las_sp_las_ct_p va_dk_enr_4year_b_sp_b
> _ct va_dk_enr_4year_las_sp_las_ct_p
        - if `n'>=`min' & `n'<=`max' { exit }
        = if 17>=1 & 17<=120000 { exit }
        ---------------------------------------------------------- end unab ---
file /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/xls/factor/indexregw
> controls/compcase/qualityindex_va_compcaseregs_wcontrols.xls saved
      ---------------------------------------------------- end export_excel ---
    - nobreak {
    - local rc = _rc
    - if `rc' {
    = if 0 {
      if scalar(ExpExcelCleanUp) >= 0 {
      mata : export_excel_cleanup()
      }
      }
    - }
    - scalar drop ExpExcelCleanUp
    - exit `rc'
    = exit 0
    --------------------------------------------------- end export.ExpExcel ---
  - }
  - else if `"`subcmd'"' == "sasxport5" {
  = else if `"excel"' == "sasxport5" {
    ExpSasxport5 `0'
    }
  - else if `"`subcmd'"' == "sasxport8" {
  = else if `"excel"' == "sasxport8" {
    ExpSasxport8 `0'
    }
  - else if `"`subcmd'"' == "sasxport" {
  = else if `"excel"' == "sasxport" {
    if (_caller() < 16) {
    ExpSasxport5 `macval(0)'
    }
    else {
    di as error "invalid syntax"
    di as error "   specify either {cmd:export sasxport5} or {cmd:export sasxpo
> rt8}"
    exit 198
    }
    }
  - else if `"`subcmd'"' == "shp" {
  = else if `"excel"' == "shp" {
    ExpShape `macval(0)'
    }
  - else {
    display as error `"export: unknown subcommand "`subcmd'""'
    exit 198
    }
  -------------------------------------------------------------- end export ---
- }
- foreach va_outcome in ela math enr enr_2year enr_4year dk_enr dk_enr_2year dk
> _enr_4year {
- di "va: `va_outcome'"
= di "va: ela"
va: ela
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_ela_b_sp_b_ct_supportindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_ela_b_sp_b_ct_supportindex.dta", 
> varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_ela_b_sp_b_ct_supportindex
> .dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_ela_b_sp_b_ct_supportindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
    sort `varlist'
    }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 2
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+2)
    Not matched                             6
    - if (`m1'|`m2') {
    = if (4|2) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 2 as txt "
>   "
        from using                          2  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 34 as txt "  
> "
    Matched                                34  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_ela_las_sp_las_ct_p_supportindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - sort `varlist'
  = sort var
  - }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_ela_las_sp_las_ct_p_supportindex.
> dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_ela_las_sp_las_ct_p_suppor
> tindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_ela_las_sp_las_ct_p_supportindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: math"
va: math
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_math_b_sp_b_ct_supportindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_math_b_sp_b_ct_supportindex.dta",
>  varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_math_b_sp_b_ct_supportinde
> x.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_math_b_sp_b_ct_supportindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_math_las_sp_las_ct_p_supportindex, noge
> n
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_math_las_sp_las_ct_p_supportindex
> .dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_math_las_sp_las_ct_p_suppo
> rtindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_math_las_sp_las_ct_p_supportindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: enr"
va: enr
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_enr_b_sp_b_ct_supportindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_enr_b_sp_b_ct_supportindex.dta", 
> varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_enr_b_sp_b_ct_supportindex
> .dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_enr_b_sp_b_ct_supportindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_enr_las_sp_las_ct_p_supportindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_enr_las_sp_las_ct_p_supportindex.
> dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_enr_las_sp_las_ct_p_suppor
> tindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_enr_las_sp_las_ct_p_supportindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: enr_2year"
va: enr_2year
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_enr_2year_b_sp_b_ct_supportindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_enr_2year_b_sp_b_ct_supportindex.
> dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_enr_2year_b_sp_b_ct_suppor
> tindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_enr_2year_b_sp_b_ct_supportindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_enr_2year_las_sp_las_ct_p_supportindex,
>  nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_enr_2year_las_sp_las_ct_p_support
> index.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_enr_2year_las_sp_las_ct_p_
> supportindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_enr_2year_las_sp_las_ct_p_supportindex.dta", cle
> ar
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: enr_4year"
va: enr_4year
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_enr_4year_b_sp_b_ct_supportindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_enr_4year_b_sp_b_ct_supportindex.
> dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_enr_4year_b_sp_b_ct_suppor
> tindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_enr_4year_b_sp_b_ct_supportindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_enr_4year_las_sp_las_ct_p_supportindex,
>  nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_enr_4year_las_sp_las_ct_p_support
> index.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_enr_4year_las_sp_las_ct_p_
> supportindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_enr_4year_las_sp_las_ct_p_supportindex.dta", cle
> ar
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: dk_enr"
va: dk_enr
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_dk_enr_b_sp_b_ct_supportindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_dk_enr_b_sp_b_ct_supportindex.dta
> ", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_dk_enr_b_sp_b_ct_supportin
> dex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_dk_enr_b_sp_b_ct_supportindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_dk_enr_las_sp_las_ct_p_supportindex, no
> gen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_dk_enr_las_sp_las_ct_p_supportind
> ex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_dk_enr_las_sp_las_ct_p_sup
> portindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_dk_enr_las_sp_las_ct_p_supportindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: dk_enr_2year"
va: dk_enr_2year
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_dk_enr_2year_b_sp_b_ct_supportindex, no
> gen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_dk_enr_2year_b_sp_b_ct_supportind
> ex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_dk_enr_2year_b_sp_b_ct_sup
> portindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_dk_enr_2year_b_sp_b_ct_supportindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_dk_enr_2year_las_sp_las_ct_p_supportind
> ex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_dk_enr_2year_las_sp_las_ct_p_supp
> ortindex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_dk_enr_2year_las_sp_las_ct
> _p_supportindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_dk_enr_2year_las_sp_las_ct_p_supportindex.dta", 
> clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: dk_enr_4year"
va: dk_enr_4year
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_dk_enr_4year_b_sp_b_ct_supportindex, no
> gen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_dk_enr_4year_b_sp_b_ct_supportind
> ex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_dk_enr_4year_b_sp_b_ct_sup
> portindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_dk_enr_4year_b_sp_b_ct_supportindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/compcase/va_dk_enr_4year_las_sp_las_ct_p_supportind
> ex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/compcase/va_dk_enr_4year_las_sp_las_ct_p_supp
> ortindex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/compcase/va_dk_enr_4year_las_sp_las_ct
> _p_supportindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/compcase/va_dk_enr_4year_las_sp_las_ct_p_supportindex.dta", 
> clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- save $projdir/out/dta/factor/indexregwcontrols/`type'/`index'_va_`type'regs_w
> controls, replace
= save /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexre
> gwcontrols/compcase/supportindex_va_compcaseregs_wcontrols, replace
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/compcase/supportindex_va_compcaseregs_wcontrols.dta saved
- export excel using $projdir/out/xls/factor/indexregwcontrols/`type'/`index'_v
> a_`type'regs_wcontrols, replace firstrow(variables)
= export excel using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/xls/
> factor/indexregwcontrols/compcase/supportindex_va_compcaseregs_wcontrols, rep
> lace firstrow(variables)
  ------------------------------------------------------------ begin export ---
  - version 12
  - gettoken subcmd 0 : 0
  - if `"`subcmd'"' == "dbas" {
  = if `"excel"' == "dbas" {
    ExpDbase `macval(0)'
    }
  - else if `"`subcmd'"' == "dbase" {
  = else if `"excel"' == "dbase" {
    ExpDbase `macval(0)'
    }
  - else if `"`subcmd'"' == "delim" {
  = else if `"excel"' == "delim" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "delimi" {
  = else if `"excel"' == "delimi" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "delimit" {
  = else if `"excel"' == "delimit" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "delimite" {
  = else if `"excel"' == "delimite" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "delimited" {
  = else if `"excel"' == "delimited" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "exc" {
  = else if `"excel"' == "exc" {
    ExpExcel `macval(0)'
    }
  - else if `"`subcmd'"' == "exce" {
  = else if `"excel"' == "exce" {
    ExpExcel `macval(0)'
    }
  - else if `"`subcmd'"' == "excel" {
  = else if `"excel"' == "excel" {
  - ExpExcel `macval(0)'
  = ExpExcel  using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/xls/f
> actor/indexregwcontrols/compcase/supportindex_va_compcaseregs_wcontrols, repl
> ace firstrow(variables)
    ------------------------------------------------- begin export.ExpExcel ---
    - version 12
    - scalar ExpExcelCleanUp = -1
    - capture noi export_excel `macval(0)'
    = capture noi export_excel using /home/research/ca_ed_lab/users/chesun/gsr/
> caschls/out/xls/factor/indexregwcontrols/compcase/supportindex_va_compcasereg
> s_wcontrols, replace firstrow(variables)
      -------------------------------------------------- begin export_excel ---
      - version 12
      - if ("`c(excelsupport)'" != "1") {
      = if ("1" != "1") {
        dis as err `"export excel is not supported on this platform."'
        exit 198
        }
      - capture syntax [varlist] using/ [if] [in] [, *]
      - if _rc {
        local orig0 `"`macval(0)'"'
        local 0 `"using `macval(0)'"'
        cap syntax using/ [if] [in] [, *]
        if _rc {
        if _rc == 111 {
        dis as err `"variable(s) not defined."'
        exit 111
        }
        local 0 `"`macval(orig0)'"'
        syntax [varlist] using/ [if] [in] [, SHeet(string asis) SHEETMODify SHE
> ETREPlace cell(string) FIRSTrow(string) DATEstring(string) MISSing(string) lo
> cale(string) NOLabel KEEPCELLFmt REPLACE]
        }
        else {
        syntax using/ [if] [in] [, SHeet(string asis) SHEETMODify SHEETREPlace 
> cell(string) FIRSTrow(string) DATEstring(string) MISSing(string) locale(strin
> g) NOLabel KEEPCELLFmt REPLACE]
        }
        }
      - else {
      - syntax [varlist] using/ [if] [in] [, SHeet(string asis) SHEETMODify SHE
> ETREPlace cell(string) FIRSTrow(string) DATEstring(string) MISSing(string) lo
> cale(string) NOLabel KEEPCELLFmt REPLACE]
      - }
      - if (`"`varlist'"'=="") {
      = if (`"var va_ela_b_sp_b_ct va_ela_las_sp_las_ct_p va_math_b_sp_b_ct va_
> math_las_sp_las_ct_p va_enr_b_sp_b_ct va_enr_las_sp_las_ct_p va_enr_2year_b_s
> p_b_ct va_enr_2year_las_sp_las_ct_p va_enr_4year_b_sp_b_ct va_enr_4year_las_s
> p_las_ct_p va_dk_enr_b_sp_b_ct va_dk_enr_las_sp_las_ct_p va_dk_enr_2year_b_sp
> _b_ct va_dk_enr_2year_las_sp_las_ct_p va_dk_enr_4year_b_sp_b_ct va_dk_enr_4ye
> ar_las_sp_las_ct_p"'=="") {
        unab varlist : _all
        }
      - marksample touse, novarlist
      - mata : export_excel_export_file("`touse'")
      = mata : export_excel_export_file("__000000")
        -------------------------------------------------------- begin unab ---
        - version 6
        - gettoken user 0: 0, parse(" :")
        - gettoken colon 0: 0, parse(" :")
        - if `"`colon'"' != ":" { error 198 }
        = if `":"' != ":" { error 198 }
        - syntax [varlist(default=empty)] [, MIN(integer 1) MAX(integer 120000)
>  NAME(string)]
        - c_local `user' `varlist'
        = c_local _parse_varlist var va_ela_b_sp_b_ct va_ela_las_sp_las_ct_p va
> _math_b_sp_b_ct va_math_las_sp_las_ct_p va_enr_b_sp_b_ct va_enr_las_sp_las_ct
> _p va_enr_2year_b_sp_b_ct va_enr_2year_las_sp_las_ct_p va_enr_4year_b_sp_b_ct
>  va_enr_4year_las_sp_las_ct_p va_dk_enr_b_sp_b_ct va_dk_enr_las_sp_las_ct_p v
> a_dk_enr_2year_b_sp_b_ct va_dk_enr_2year_las_sp_las_ct_p va_dk_enr_4year_b_sp
> _b_ct va_dk_enr_4year_las_sp_las_ct_p
        - local n : word count `varlist'
        = local n : word count var va_ela_b_sp_b_ct va_ela_las_sp_las_ct_p va_m
> ath_b_sp_b_ct va_math_las_sp_las_ct_p va_enr_b_sp_b_ct va_enr_las_sp_las_ct_p
>  va_enr_2year_b_sp_b_ct va_enr_2year_las_sp_las_ct_p va_enr_4year_b_sp_b_ct v
> a_enr_4year_las_sp_las_ct_p va_dk_enr_b_sp_b_ct va_dk_enr_las_sp_las_ct_p va_
> dk_enr_2year_b_sp_b_ct va_dk_enr_2year_las_sp_las_ct_p va_dk_enr_4year_b_sp_b
> _ct va_dk_enr_4year_las_sp_las_ct_p
        - if `n'>=`min' & `n'<=`max' { exit }
        = if 17>=1 & 17<=120000 { exit }
        ---------------------------------------------------------- end unab ---
file /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/xls/factor/indexregw
> controls/compcase/supportindex_va_compcaseregs_wcontrols.xls saved
      ---------------------------------------------------- end export_excel ---
    - nobreak {
    - local rc = _rc
    - if `rc' {
    = if 0 {
      if scalar(ExpExcelCleanUp) >= 0 {
      mata : export_excel_cleanup()
      }
      }
    - }
    - scalar drop ExpExcelCleanUp
    - exit `rc'
    = exit 0
    --------------------------------------------------- end export.ExpExcel ---
  - }
  - else if `"`subcmd'"' == "sasxport5" {
  = else if `"excel"' == "sasxport5" {
    ExpSasxport5 `0'
    }
  - else if `"`subcmd'"' == "sasxport8" {
  = else if `"excel"' == "sasxport8" {
    ExpSasxport8 `0'
    }
  - else if `"`subcmd'"' == "sasxport" {
  = else if `"excel"' == "sasxport" {
    if (_caller() < 16) {
    ExpSasxport5 `macval(0)'
    }
    else {
    di as error "invalid syntax"
    di as error "   specify either {cmd:export sasxport5} or {cmd:export sasxpo
> rt8}"
    exit 198
    }
    }
  - else if `"`subcmd'"' == "shp" {
  = else if `"excel"' == "shp" {
    ExpShape `macval(0)'
    }
  - else {
    display as error `"export: unknown subcommand "`subcmd'""'
    exit 198
    }
  -------------------------------------------------------------- end export ---
- }
- set trace off
(parent pooled (over years) dataset ready for analysis with stats and response 
> ra)

    Result                      Number of obs
    -----------------------------------------
    Not matched                            18
        from master                        18  
        from using                          0  

    Matched                             1,856  
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                           710
        from master                       710  
        from using                          0  

    Matched                             1,164  
    -----------------------------------------
(18 missing values generated)
(19 missing values generated)
(18 missing values generated)
(18 missing values generated)
(18 missing values generated)
(19 missing values generated)
(18 missing values generated)
(18 missing values generated)
(18 missing values generated)
(18 missing values generated)
(18 missing values generated)

      Source |       SS           df       MS      Number of obs   =       918
-------------+----------------------------------   F(14, 903)      =      9.29
       Model |  115.429765        14  8.24498319   Prob > F        =    0.0000
    Residual |  801.570233       903  .887674676   R-squared       =    0.1259
-------------+----------------------------------   Adj R-squared   =    0.1123
       Total |  916.999997       917  .999999997   Root MSE        =    .94216

------------------------------------------------------------------------------
va_ela_b_s~t | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |    .354913   .0458601     7.74   0.000     .2649082    .4449178
ln_min~rprop |   .2124997   .1078197     1.97   0.049     .0008933     .424106
ln_maleenr~p |  -.1385863   .4443195    -0.31   0.755    -1.010605    .7334327
ln_freemea~p |   .2144747   .0823126     2.61   0.009     .0529284     .376021
   ln_elprop |   .0061935   .0195798     0.32   0.752    -.0322338    .0446208
ln_maletea~p |  -.0228062   .0397906    -0.57   0.567    -.1008991    .0552866
ln_min~fprop |   .0136022   .0179935     0.76   0.450    -.0217117    .0489161
ln_newteac~p |   .1246706   .0285385     4.37   0.000     .0686611    .1806801
ln_fullcre~p |   1.085398   .8652357     1.25   0.210     -.612709    2.783505
ln_fteteac~t |  -.5182604   .1894571    -2.74   0.006     -.890088   -.1464329
ln_fteadmi~t |   .0216936   .0411767     0.53   0.598    -.0591195    .1025067
ln_fteserv~t |  -.0105064   .0194392    -0.54   0.589    -.0486577    .0276449
avg_gr6mat~e |  -.0111922   .2546309    -0.04   0.965    -.5109293     .488545
avg_gr8ela~e |   .5788512   .2697865     2.15   0.032     .0493696    1.108333
       _cons |  -.9270818   .6633442    -1.40   0.163    -2.228957    .3747939
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_ela_b_sp_b_ct_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       918
-------------+----------------------------------   F(14, 903)      =      6.42
       Model |  83.0528928        14  5.93234948   Prob > F        =    0.0000
    Residual |  833.947105       903  .923529462   R-squared       =    0.0906
-------------+----------------------------------   Adj R-squared   =    0.0765
       Total |  916.999997       917  .999999997   Root MSE        =      .961

------------------------------------------------------------------------------
va_ela_b_s~t | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |   .2231624   .0470367     4.74   0.000     .1308486    .3154763
ln_min~rprop |   .2389425   .1099078     2.17   0.030     .0232382    .4546469
ln_maleenr~p |  -.3058496   .4524737    -0.68   0.499    -1.193872    .5821729
ln_freemea~p |   .1736999   .0836758     2.08   0.038     .0094781    .3379216
   ln_elprop |   .0027655   .0199737     0.14   0.890    -.0364348    .0419658
ln_maletea~p |  -.0291646    .040619    -0.72   0.473    -.1088832     .050554
ln_min~fprop |    .013241    .018379     0.72   0.471    -.0228296    .0493116
ln_newteac~p |   .1164926   .0292192     3.99   0.000     .0591472    .1738379
ln_fullcre~p |   1.444179   .8815644     1.64   0.102    -.2859742    3.174333
ln_fteteac~t |  -.4539801   .1932198    -2.35   0.019    -.8331922   -.0747681
ln_fteadmi~t |   .0258626    .042079     0.61   0.539    -.0567215    .1084466
ln_fteserv~t |  -.0159892   .0198066    -0.81   0.420    -.0548615    .0228831
avg_gr6mat~e |   .0035144   .2603547     0.01   0.989    -.5074564    .5144851
avg_gr8ela~e |   .6466246   .2758855     2.34   0.019     .1051733    1.188076
       _cons |  -.9211038   .6769451    -1.36   0.174    -2.249673     .407465
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_ela_b_sp_b_ct_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       918
-------------+----------------------------------   F(14, 903)      =      5.35
       Model |  70.2593309        14  5.01852363   Prob > F        =    0.0000
    Residual |  846.740666       903  .937697305   R-squared       =    0.0766
-------------+----------------------------------   Adj R-squared   =    0.0623
       Total |  916.999997       917  .999999997   Root MSE        =    .96835

------------------------------------------------------------------------------
va_ela_b_s~t | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |   .1421409   .0486796     2.92   0.004     .0466026    .2376792
ln_min~rprop |   .2351852   .1107721     2.12   0.034     .0177844    .4525859
ln_maleenr~p |  -.3848178   .4556287    -0.84   0.399    -1.279032    .5093967
ln_freemea~p |   .1502749   .0841263     1.79   0.074    -.0148309    .3153808
   ln_elprop |  -.0061686   .0201054    -0.31   0.759    -.0456273    .0332901
ln_maletea~p |  -.0444361   .0407896    -1.09   0.276    -.1244896    .0356174
ln_min~fprop |   .0175263   .0184863     0.95   0.343    -.0187548    .0538073
ln_newteac~p |   .1031265   .0292206     3.53   0.000     .0457782    .1604747
ln_fullcre~p |   1.320192   .8887451     1.49   0.138    -.4240545    3.064438
ln_fteteac~t |  -.3582066   .1934515    -1.85   0.064    -.7378735    .0214603
ln_fteadmi~t |   .0321139   .0424321     0.76   0.449    -.0511631    .1153909
ln_fteserv~t |  -.0219243    .019947    -1.10   0.272    -.0610723    .0172236
avg_gr6mat~e |  -.0644365   .2617085    -0.25   0.806    -.5780642    .4491912
avg_gr8ela~e |   .7709066   .2760017     2.79   0.005     .2292272    1.312586
       _cons |   -.835843   .6817284    -1.23   0.220    -2.173799    .5021134
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_ela_b_sp_b_ct_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       884
-------------+----------------------------------   F(14, 869)      =      2.87
       Model |  39.0605307        14  2.79003791   Prob > F        =    0.0003
    Residual |  843.939473       869  .971161649   R-squared       =    0.0442
-------------+----------------------------------   Adj R-squared   =    0.0288
       Total |  883.000004       883           1   Root MSE        =    .98548

------------------------------------------------------------------------------
va_ela_las.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |   .2564922   .0493945     5.19   0.000     .1595457    .3534386
ln_min~rprop |   -.052119   .1207537    -0.43   0.666     -.289122    .1848841
ln_maleenr~p |   .6346952    .477411     1.33   0.184    -.3023182    1.571709
ln_freemea~p |   .1763215   .0880649     2.00   0.046     .0034766    .3491664
   ln_elprop |   .0242948   .0270487     0.90   0.369    -.0287937    .0773833
ln_maletea~p |  -.0697848   .0519657    -1.34   0.180    -.1717777    .0322082
ln_min~fprop |  -.0088033   .0252041    -0.35   0.727    -.0582714    .0406647
ln_newteac~p |   .0896034   .0340534     2.63   0.009     .0227669    .1564399
ln_fullcre~p |  -.1709819   .9336326    -0.18   0.855     -2.00342    1.661457
ln_fteteac~t |  -.1722014   .2430809    -0.71   0.479    -.6492957    .3048929
ln_fteadmi~t |   .0091766   .0593299     0.15   0.877      -.10727    .1256233
ln_fteserv~t |   .0327651   .0228109     1.44   0.151    -.0120058     .077536
avg_gr6mat~e |  -.0718896   .2816879    -0.26   0.799    -.6247578    .4809787
avg_gr8ela~e |   .1943054   .2993621     0.65   0.516    -.3932519    .7818628
       _cons |   .4876887   .8067086     0.60   0.546    -1.095636    2.071014
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_ela_las_sp_las_ct_p_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       884
-------------+----------------------------------   F(14, 869)      =      2.12
       Model |  29.1197809        14  2.07998435   Prob > F        =    0.0094
    Residual |  853.880223       869  .982600947   R-squared       =    0.0330
-------------+----------------------------------   Adj R-squared   =    0.0174
       Total |  883.000004       883           1   Root MSE        =    .99126

------------------------------------------------------------------------------
va_ela_las.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |   .2070041   .0509089     4.07   0.000     .1070854    .3069228
ln_min~rprop |  -.0284811    .121275    -0.23   0.814    -.2665071     .209545
ln_maleenr~p |   .5655188   .4798469     1.18   0.239    -.3762755    1.507313
ln_freemea~p |   .1535561   .0883178     1.74   0.082    -.0197849    .3268972
   ln_elprop |   .0226403   .0272731     0.83   0.407    -.0308885    .0761691
ln_maletea~p |  -.0705588   .0523231    -1.35   0.178    -.1732532    .0321355
ln_min~fprop |  -.0109955    .025393    -0.43   0.665    -.0608343    .0388433
ln_newteac~p |   .0878551   .0343854     2.56   0.011     .0203669    .1553434
ln_fullcre~p |   .0825958   .9381777     0.09   0.930    -1.758763    1.923955
ln_fteteac~t |  -.1607674   .2451717    -0.66   0.512    -.6419652    .3204305
ln_fteadmi~t |   .0099572   .0598453     0.17   0.868     -.107501    .1274155
ln_fteserv~t |   .0301673   .0229338     1.32   0.189    -.0148449    .0751794
avg_gr6mat~e |  -.0547339   .2834113    -0.19   0.847    -.6109846    .5015168
avg_gr8ela~e |   .2285774   .3010426     0.76   0.448    -.3622783     .819433
       _cons |    .444624   .8134996     0.55   0.585     -1.15203    2.041278
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_ela_las_sp_las_ct_p_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       884
-------------+----------------------------------   F(14, 869)      =      1.85
       Model |  25.5892769        14  1.82780549   Prob > F        =    0.0280
    Residual |  857.410727       869  .986663667   R-squared       =    0.0290
-------------+----------------------------------   Adj R-squared   =    0.0133
       Total |  883.000004       883           1   Root MSE        =    .99331

------------------------------------------------------------------------------
va_ela_las.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |   .1938565   .0540004     3.59   0.000       .08787     .299843
ln_min~rprop |  -.0252773   .1215144    -0.21   0.835    -.2637733    .2132187
ln_maleenr~p |   .5393939    .480714     1.12   0.262    -.4041023     1.48289
ln_freemea~p |   .1336784   .0883194     1.51   0.130    -.0396659    .3070227
   ln_elprop |   .0138292   .0271231     0.51   0.610    -.0394053    .0670637
ln_maletea~p |  -.0913003   .0522797    -1.75   0.081    -.1939095    .0113089
ln_min~fprop |  -.0081807   .0254138    -0.32   0.748    -.0580604    .0416989
ln_newteac~p |   .0813134   .0342947     2.37   0.018     .0140033    .1486235
ln_fullcre~p |   -.061872   .9405927    -0.07   0.948    -1.907971    1.784227
ln_fteteac~t |  -.0602477   .2434924    -0.25   0.805    -.5381496    .4176543
ln_fteadmi~t |   .0071989   .0602167     0.12   0.905    -.1109882     .125386
ln_fteserv~t |   .0244793   .0230062     1.06   0.288     -.020675    .0696335
avg_gr6mat~e |   -.109176    .284028    -0.38   0.701    -.6666371    .4482851
avg_gr8ela~e |   .3370069   .3004219     1.12   0.262    -.2526304    .9266442
       _cons |   .5429536   .8136992     0.67   0.505    -1.054092    2.139999
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_ela_las_sp_las_ct_p_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       918
-------------+----------------------------------   F(14, 903)      =     16.77
       Model |  189.206611        14  13.5147579   Prob > F        =    0.0000
    Residual |  727.793389       903  .805972746   R-squared       =    0.2063
-------------+----------------------------------   Adj R-squared   =    0.1940
       Total |         917       917           1   Root MSE        =    .89776

------------------------------------------------------------------------------
va_math_b_~t | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |   .3314631   .0436987     7.59   0.000     .2457004    .4172259
ln_min~rprop |     .02793   .1027381     0.27   0.786    -.1737032    .2295631
ln_maleenr~p |   .9130619   .4233783     2.16   0.031     .0821419    1.743982
ln_freemea~p |   .0109646   .0784332     0.14   0.889    -.1429679    .1648971
   ln_elprop |   .0480844    .018657     2.58   0.010     .0114683    .0847006
ln_maletea~p |  -.0192693   .0379153    -0.51   0.611    -.0936816     .055143
ln_min~fprop |   .0075013   .0171454     0.44   0.662    -.0261482    .0411509
ln_newteac~p |   .0630312   .0271935     2.32   0.021     .0096614    .1164009
ln_fullcre~p |   1.543558   .8244564     1.87   0.062     -.074516    3.161631
ln_fteteac~t |   -.071164   .1805278    -0.39   0.694     -.425467    .2831389
ln_fteadmi~t |  -.0382407    .039236    -0.97   0.330     -.115245    .0387636
ln_fteserv~t |   .0617087    .018523     3.33   0.001     .0253555    .0980619
avg_gr6mat~e |  -.4962392   .2426299    -2.05   0.041    -.9724233   -.0200552
avg_gr8ela~e |   1.176598   .2570712     4.58   0.000     .6720712    1.681124
       _cons |   .9439281   .6320802     1.49   0.136     -.296589    2.184445
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_math_b_sp_b_ct_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       918
-------------+----------------------------------   F(14, 903)      =     13.97
       Model |  163.243853        14  11.6602752   Prob > F        =    0.0000
    Residual |  753.756146       903  .834724415   R-squared       =    0.1780
-------------+----------------------------------   Adj R-squared   =    0.1653
       Total |         917       917           1   Root MSE        =    .91363

------------------------------------------------------------------------------
va_math_b_~t | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |   .2211173    .044718     4.94   0.000      .133354    .3088807
ln_min~rprop |   .0524344     .10449     0.50   0.616     -.152637    .2575059
ln_maleenr~p |   .7670047   .4301694     1.78   0.075    -.0772434    1.611253
ln_freemea~p |  -.0255639   .0795511    -0.32   0.748    -.1816904    .1305627
   ln_elprop |   .0452351   .0189891     2.38   0.017     .0079671     .082503
ln_maletea~p |     -.0243   .0386167    -0.63   0.529    -.1000889    .0514889
ln_min~fprop |     .00684   .0174731     0.39   0.696    -.0274525    .0411325
ln_newteac~p |   .0566905   .0277788     2.04   0.042     .0021719     .111209
ln_fullcre~p |   1.880826   .8381085     2.24   0.025     .2359591    3.525693
ln_fteteac~t |  -.0170738   .1836952    -0.09   0.926    -.3775929    .3434454
ln_fteadmi~t |  -.0354238   .0400048    -0.89   0.376    -.1139369    .0430893
ln_fteserv~t |   .0568266   .0188302     3.02   0.003     .0198705    .0937827
avg_gr6mat~e |  -.4767094   .2475207    -1.93   0.054    -.9624922    .0090735
avg_gr8ela~e |   1.229534   .2622859     4.69   0.000     .7147729    1.744295
       _cons |   .9418982   .6435757     1.46   0.144      -.32118    2.204976
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_math_b_sp_b_ct_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       918
-------------+----------------------------------   F(14, 903)      =     12.50
       Model |  148.906386        14  10.6361704   Prob > F        =    0.0000
    Residual |  768.093614       903  .850602009   R-squared       =    0.1624
-------------+----------------------------------   Adj R-squared   =    0.1494
       Total |         917       917           1   Root MSE        =    .92228

------------------------------------------------------------------------------
va_math_b_~t | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |   .1238704   .0463638     2.67   0.008     .0328772    .2148637
ln_min~rprop |   .0495612   .1055024     0.47   0.639    -.1574972    .2566197
ln_maleenr~p |   .6768859   .4339533     1.56   0.119    -.1747885     1.52856
ln_freemea~p |  -.0492341   .0801242    -0.61   0.539    -.2064854    .1080173
   ln_elprop |   .0367106   .0191489     1.92   0.056    -.0008709    .0742922
ln_maletea~p |  -.0395123   .0388492    -1.02   0.309    -.1157574    .0367329
ln_min~fprop |   .0112542   .0176068     0.64   0.523    -.0233009    .0458092
ln_newteac~p |   .0423218   .0278305     1.52   0.129    -.0122982    .0969419
ln_fullcre~p |   1.768176   .8464651     2.09   0.037     .1069086    3.429444
ln_fteteac~t |   .0788554   .1842485     0.43   0.669    -.2827497    .4404605
ln_fteadmi~t |  -.0277176   .0404135    -0.69   0.493    -.1070328    .0515977
ln_fteserv~t |   .0511542   .0189981     2.69   0.007     .0138686    .0884398
avg_gr6mat~e |   -.548082   .2492583    -2.20   0.028    -1.037275    -.058889
avg_gr8ela~e |   1.359572   .2628716     5.17   0.000     .8436612    1.875482
       _cons |   1.032169   .6492968     1.59   0.112    -.2421371    2.306476
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_math_b_sp_b_ct_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       884
-------------+----------------------------------   F(14, 869)      =      4.07
       Model |  54.3127973        14  3.87948552   Prob > F        =    0.0000
    Residual |  828.687201       869  .953610127   R-squared       =    0.0615
-------------+----------------------------------   Adj R-squared   =    0.0464
       Total |  882.999998       883  .999999998   Root MSE        =    .97653

------------------------------------------------------------------------------
va_math_la.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |   .2575275   .0489461     5.26   0.000     .1614611    .3535939
ln_min~rprop |  -.1065581   .1196576    -0.89   0.373    -.3414097    .1282935
ln_maleenr~p |   .9630221   .4730773     2.04   0.042     .0345145     1.89153
ln_freemea~p |   .1702601   .0872655     1.95   0.051    -.0010158     .341536
   ln_elprop |   .0307824   .0268032     1.15   0.251    -.0218242    .0833889
ln_maletea~p |  -.0677629    .051494    -1.32   0.189    -.1688301    .0333042
ln_min~fprop |  -.0231643   .0249753    -0.93   0.354    -.0721833    .0258547
ln_newteac~p |   .0504351   .0337443     1.49   0.135    -.0157947    .1166649
ln_fullcre~p |   .9866865   .9251575     1.07   0.286    -.8291179    2.802491
ln_fteteac~t |   .1832336   .2408743     0.76   0.447    -.2895299     .655997
ln_fteadmi~t |  -.1136211   .0587913    -1.93   0.054    -.2290107    .0017685
ln_fteserv~t |   .0968242   .0226038     4.28   0.000     .0524597    .1411887
avg_gr6mat~e |  -.0629763   .2791309    -0.23   0.822    -.6108259    .4848733
avg_gr8ela~e |   .0589861   .2966446     0.20   0.842    -.5232376    .6412099
       _cons |    1.37645   .7993857     1.72   0.085    -.1925027    2.945402
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_math_las_sp_las_ct_p_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       884
-------------+----------------------------------   F(14, 869)      =      3.76
       Model |  50.4886516        14  3.60633226   Prob > F        =    0.0000
    Residual |  832.511346       869  .958010755   R-squared       =    0.0572
-------------+----------------------------------   Adj R-squared   =    0.0420
       Total |  882.999998       883  .999999998   Root MSE        =    .97878

------------------------------------------------------------------------------
va_math_la.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |   .2440135   .0502678     4.85   0.000      .145353    .3426741
ln_min~rprop |  -.0859968   .1197478    -0.72   0.473    -.3210256     .149032
ln_maleenr~p |   .9259629   .4738046     1.95   0.051    -.0039723    1.855898
ln_freemea~p |   .1514666   .0872057     1.74   0.083    -.0196918    .3226249
   ln_elprop |   .0318529   .0269296     1.18   0.237    -.0210018    .0847076
ln_maletea~p |  -.0656095   .0516642    -1.27   0.204    -.1670108    .0357917
ln_min~fprop |  -.0265809   .0250733    -1.06   0.289    -.0757921    .0226303
ln_newteac~p |   .0527089   .0339525     1.55   0.121    -.0139295    .1193473
ln_fullcre~p |   1.247055   .9263641     1.35   0.179     -.571118    3.065227
ln_fteteac~t |   .1702532   .2420845     0.70   0.482    -.3048853    .6453918
ln_fteadmi~t |  -.1182205   .0590917    -2.00   0.046    -.2341997   -.0022413
ln_fteserv~t |   .0944935    .022645     4.17   0.000     .0500481    .1389389
avg_gr6mat~e |  -.0411184   .2798426    -0.15   0.883    -.5903648    .5081279
avg_gr8ela~e |   .0739951   .2972519     0.25   0.803    -.5094205    .6574107
       _cons |    1.27708    .803256     1.59   0.112    -.2994682    2.853629
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_math_las_sp_las_ct_p_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       884
-------------+----------------------------------   F(14, 869)      =      3.23
       Model |  43.7377486        14   3.1241249   Prob > F        =    0.0001
    Residual |  839.262249       869  .965779343   R-squared       =    0.0495
-------------+----------------------------------   Adj R-squared   =    0.0342
       Total |  882.999998       883  .999999998   Root MSE        =    .98274

------------------------------------------------------------------------------
va_math_la.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |   .2162545   .0534259     4.05   0.000     .1113957    .3211133
ln_min~rprop |  -.0812748   .1202215    -0.68   0.499    -.3172333    .1546836
ln_maleenr~p |   .8850944   .4755992     1.86   0.063    -.0483631    1.818552
ln_freemea~p |   .1278215   .0873797     1.46   0.144    -.0436785    .2993214
   ln_elprop |   .0210351   .0268345     0.78   0.433     -.031633    .0737032
ln_maletea~p |  -.0898081   .0517234    -1.74   0.083    -.1913256    .0117094
ln_min~fprop |  -.0230009   .0251434    -0.91   0.361    -.0723499     .026348
ln_newteac~p |   .0439531   .0339298     1.30   0.196    -.0226408     .110547
ln_fullcre~p |   1.083808   .9305849     1.16   0.244    -.7426489    2.910265
ln_fteteac~t |   .2912398   .2409017     1.21   0.227    -.1815773     .764057
ln_fteadmi~t |  -.1193493    .059576    -2.00   0.045    -.2362789   -.0024197
ln_fteserv~t |   .0880478   .0227614     3.87   0.000      .043374    .1327216
avg_gr6mat~e |  -.1035275    .281006    -0.37   0.713    -.6550573    .4480023
avg_gr8ela~e |   .2019744   .2972254     0.68   0.497    -.3813892     .785338
       _cons |   1.407086   .8050415     1.75   0.081    -.1729668    2.987139
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_math_las_sp_las_ct_p_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       917
-------------+----------------------------------   F(14, 902)      =     18.73
       Model |  206.284135        14  14.7345811   Prob > F        =    0.0000
    Residual |  709.715868       902  .786824687   R-squared       =    0.2252
-------------+----------------------------------   Adj R-squared   =    0.2132
       Total |  916.000003       916           1   Root MSE        =    .88703

------------------------------------------------------------------------------
va_enr_b_s~t | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |   .1694257   .0432004     3.92   0.000     .0846407    .2542108
ln_min~rprop |   .4791875    .102325     4.68   0.000     .2783647    .6800103
ln_maleenr~p |   .2738662   .4183577     0.65   0.513    -.5472016    1.094934
ln_freemea~p |  -.0605328    .077694    -0.78   0.436    -.2130147    .0919492
   ln_elprop |    .033701   .0185582     1.82   0.070    -.0027212    .0701233
ln_maletea~p |  -.0242796   .0452072    -0.54   0.591     -.113003    .0644439
ln_min~fprop |  -.0004292   .0169466    -0.03   0.980    -.0336885      .03283
ln_newteac~p |   .1433876   .0269755     5.32   0.000     .0904455    .1963297
ln_fullcre~p |  -.0683032   .8165018    -0.08   0.933    -1.670768    1.534161
ln_fteteac~t |  -.1990419   .1857323    -1.07   0.284    -.5635597    .1654759
ln_fteadmi~t |  -.0682008   .0387727    -1.76   0.079    -.1442961    .0078944
ln_fteserv~t |   .0244528   .0184199     1.33   0.185    -.0116981    .0606037
avg_gr6mat~e |   .4530854   .2400872     1.89   0.059    -.0181092      .92428
avg_gr8ela~e |   .8177955   .2540202     3.22   0.001     .3192561    1.316335
       _cons |  -.0526101   .6486105    -0.08   0.935    -1.325571    1.220351
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_enr_b_sp_b_ct_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       917
-------------+----------------------------------   F(14, 902)      =     17.55
       Model |  196.094568        14  14.0067549   Prob > F        =    0.0000
    Residual |  719.905434       902  .798121324   R-squared       =    0.2141
-------------+----------------------------------   Adj R-squared   =    0.2019
       Total |  916.000003       916           1   Root MSE        =    .89338

------------------------------------------------------------------------------
va_enr_b_s~t | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |   .0677598   .0437725     1.55   0.122    -.0181481    .1536676
ln_min~rprop |   .4931495   .1029836     4.79   0.000     .2910341    .6952649
ln_maleenr~p |   .1634374   .4206688     0.39   0.698    -.6621661    .9890409
ln_freemea~p |  -.0850484   .0779854    -1.09   0.276    -.2381024    .0680056
   ln_elprop |   .0311185   .0186914     1.66   0.096    -.0055652    .0678021
ln_maletea~p |  -.0315767    .045592    -0.69   0.489    -.1210555     .057902
ln_min~fprop |   .0003596    .017091     0.02   0.983    -.0331831    .0339023
ln_newteac~p |   .1356734   .0272636     4.98   0.000     .0821659    .1891809
ln_fullcre~p |   .0994891   .8213309     0.12   0.904    -1.512453    1.711431
ln_fteteac~t |  -.1471913   .1871148    -0.79   0.432    -.5144222    .2200397
ln_fteadmi~t |  -.0628902   .0391249    -1.61   0.108    -.1396765    .0138962
ln_fteserv~t |   .0212331   .0185323     1.15   0.252    -.0151384    .0576045
avg_gr6mat~e |   .4432085   .2423621     1.83   0.068    -.0324506    .9188677
avg_gr8ela~e |   .8815225   .2564848     3.44   0.001     .3781462    1.384899
       _cons |  -.0161915   .6537457    -0.02   0.980    -1.299231    1.266848
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_enr_b_sp_b_ct_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       917
-------------+----------------------------------   F(14, 902)      =     17.72
       Model |  197.571243        14  14.1122316   Prob > F        =    0.0000
    Residual |   718.42876       902  .796484213   R-squared       =    0.2157
-------------+----------------------------------   Adj R-squared   =    0.2035
       Total |  916.000003       916           1   Root MSE        =    .89246

------------------------------------------------------------------------------
va_enr_b_s~t | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |   .0925517   .0448666     2.06   0.039     .0044965    .1806068
ln_min~rprop |   .4906975   .1028923     4.77   0.000     .2887612    .6926337
ln_maleenr~p |   .1746722   .4199876     0.42   0.678    -.6495944    .9989388
ln_freemea~p |  -.0913019   .0777135    -1.17   0.240    -.2438222    .0612184
   ln_elprop |   .0276504   .0186582     1.48   0.139    -.0089683     .064269
ln_maletea~p |  -.0382746    .045343    -0.84   0.399    -.1272646    .0507154
ln_min~fprop |   .0011282   .0170443     0.07   0.947    -.0323229    .0345792
ln_newteac~p |     .13512   .0270528     4.99   0.000     .0820261    .1882138
ln_fullcre~p |   .0370938   .8208992     0.05   0.964    -1.574001    1.648188
ln_fteteac~t |  -.1164672   .1855384    -0.63   0.530    -.4806044      .24767
ln_fteadmi~t |  -.0653422   .0391104    -1.67   0.095    -.1421001    .0114158
ln_fteserv~t |   .0190179   .0185068     1.03   0.304    -.0173035    .0553392
avg_gr6mat~e |   .4355733   .2415827     1.80   0.072    -.0385564    .9097029
avg_gr8ela~e |   .8987992   .2544112     3.53   0.000     .3994924    1.398106
       _cons |   .0087302   .6523186     0.01   0.989    -1.271509    1.288969
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_enr_b_sp_b_ct_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       884
-------------+----------------------------------   F(14, 869)      =      1.63
       Model |  22.5319203        14  1.60942288   Prob > F        =    0.0668
    Residual |   860.46808       869   .99018191   R-squared       =    0.0255
-------------+----------------------------------   Adj R-squared   =    0.0098
       Total |         883       883           1   Root MSE        =    .99508

------------------------------------------------------------------------------
va_enr_las.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |   .1334978   .0498758     2.68   0.008     .0356066     .231389
ln_min~rprop |  -.0283689   .1219305    -0.23   0.816    -.2676816    .2109437
ln_maleenr~p |  -.3426751   .4820634    -0.71   0.477     -1.28882    .6034695
ln_freemea~p |    .027433   .0889231     0.31   0.758    -.1470962    .2019623
   ln_elprop |   .0103774   .0273123     0.38   0.704    -.0432285    .0639832
ln_maletea~p |  -.0116007   .0524721    -0.22   0.825    -.1145876    .0913862
ln_min~fprop |   .0135749   .0254497     0.53   0.594    -.0363752     .063525
ln_newteac~p |   .0796959   .0343852     2.32   0.021     .0122081    .1471838
ln_fullcre~p |  -.9013577   .9427309    -0.96   0.339    -2.751653     .948938
ln_fteteac~t |  -.1492767   .2454497    -0.61   0.543    -.6310203    .3324669
ln_fteadmi~t |   .0186174   .0599081     0.31   0.756    -.0989641    .1361988
ln_fteserv~t |   .0372336   .0230332     1.62   0.106    -.0079736    .0824407
avg_gr6mat~e |   .0521637    .284433     0.18   0.855    -.5060923    .6104197
avg_gr8ela~e |  -.1983614   .3022794    -0.66   0.512    -.7916445    .3949217
       _cons |  -.1342782     .81457    -0.16   0.869    -1.733033    1.464476
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_enr_las_sp_las_ct_p_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       884
-------------+----------------------------------   F(14, 869)      =      1.41
       Model |  19.5901198        14  1.39929427   Prob > F        =    0.1422
    Residual |   863.40988       869  .993567181   R-squared       =    0.0222
-------------+----------------------------------   Adj R-squared   =    0.0064
       Total |         883       883           1   Root MSE        =    .99678

------------------------------------------------------------------------------
va_enr_las.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |   .1046495   .0511922     2.04   0.041     .0041747    .2051242
ln_min~rprop |   -.015795   .1219498    -0.13   0.897    -.2551456    .2235556
ln_maleenr~p |   -.381448   .4825171    -0.79   0.429    -1.328483    .5655872
ln_freemea~p |    .015237   .0888092     0.17   0.864    -.1590687    .1895426
   ln_elprop |   .0092828   .0274248     0.34   0.735    -.0445438    .0631095
ln_maletea~p |   -.012254   .0526142    -0.23   0.816    -.1155199    .0910118
ln_min~fprop |   .0125378   .0255343     0.49   0.624    -.0375783    .0626539
ln_newteac~p |   .0784417   .0345768     2.27   0.024      .010578    .1463055
ln_fullcre~p |  -.7698695   .9433984    -0.82   0.415    -2.621475    1.081736
ln_fteteac~t |  -.1412354    .246536    -0.57   0.567     -.625111    .3426402
ln_fteadmi~t |   .0194836   .0601783     0.32   0.746    -.0986282    .1375955
ln_fteserv~t |   .0358577   .0230615     1.55   0.120     -.009405    .0811204
avg_gr6mat~e |   .0606969   .2849884     0.21   0.831    -.4986491     .620043
avg_gr8ela~e |  -.1788658   .3027179    -0.59   0.555    -.7730095    .4152778
       _cons |  -.1518959   .8180265    -0.19   0.853    -1.757435    1.453643
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_enr_las_sp_las_ct_p_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       884
-------------+----------------------------------   F(14, 869)      =      1.31
       Model |  18.3149623        14  1.30821159   Prob > F        =    0.1918
    Residual |  864.685038       869  .995034566   R-squared       =    0.0207
-------------+----------------------------------   Adj R-squared   =    0.0050
       Total |         883       883           1   Root MSE        =    .99751

------------------------------------------------------------------------------
va_enr_las.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |   .0922095    .054229     1.70   0.089    -.0142257    .1986446
ln_min~rprop |  -.0137286   .1220288    -0.11   0.910    -.2532342     .225777
ln_maleenr~p |  -.3994147   .4827489    -0.83   0.408    -1.346905    .5480754
ln_freemea~p |    .005087   .0886933     0.06   0.954    -.1689911    .1791651
   ln_elprop |   .0046246   .0272379     0.17   0.865    -.0488353    .0580844
ln_maletea~p |   -.022621    .052501    -0.43   0.667    -.1256646    .0804225
ln_min~fprop |   .0140846   .0255214     0.55   0.581    -.0360063    .0641754
ln_newteac~p |   .0746411   .0344398     2.17   0.030     .0070461    .1422361
ln_fullcre~p |  -.8395731   .9445743    -0.89   0.374    -2.693487    1.014341
ln_fteteac~t |  -.0892393   .2445231    -0.36   0.715    -.5691642    .3906857
ln_fteadmi~t |   .0190922   .0604716     0.32   0.752    -.0995952    .1377796
ln_fteserv~t |   .0331047   .0231036     1.43   0.152    -.0122407    .0784501
avg_gr6mat~e |   .0340088   .2852303     0.12   0.905    -.5258121    .5938297
avg_gr8ela~e |  -.1239725   .3016936    -0.41   0.681    -.7161058    .4681607
       _cons |  -.0955255   .8171436    -0.12   0.907    -1.699331     1.50828
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_enr_las_sp_las_ct_p_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       917
-------------+----------------------------------   F(14, 902)      =     12.87
       Model |  152.530002        14  10.8950001   Prob > F        =    0.0000
    Residual |      763.47       902  .846419069   R-squared       =    0.1665
-------------+----------------------------------   Adj R-squared   =    0.1536
       Total |  916.000002       916           1   Root MSE        =    .92001

------------------------------------------------------------------------------
va_enr_2ye.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |  -.1271672   .0448066    -2.84   0.005    -.2151045     -.03923
ln_min~rprop |  -.3749326   .1061293    -3.53   0.000    -.5832217   -.1666435
ln_maleenr~p |  -.1345897   .4339118    -0.31   0.756    -.9861839    .7170046
ln_freemea~p |   .5785211   .0805825     7.18   0.000       .42037    .7366722
   ln_elprop |   .0005929   .0192482     0.03   0.975    -.0371835    .0383693
ln_maletea~p |   .0501234   .0468879     1.07   0.285    -.0418987    .1421455
ln_min~fprop |  -.0448428   .0175766    -2.55   0.011    -.0793386   -.0103469
ln_newteac~p |   .1217198   .0279784     4.35   0.000     .0668093    .1766302
ln_fullcre~p |   1.593156   .8468586     1.88   0.060    -.0688864    3.255199
ln_fteteac~t |  -.9417819   .1926377    -4.89   0.000    -1.319852   -.5637117
ln_fteadmi~t |  -.0707613   .0402143    -1.76   0.079    -.1496857    .0081631
ln_fteserv~t |  -.0212125   .0191047    -1.11   0.267    -.0587074    .0162825
avg_gr6mat~e |  -.2053844   .2490135    -0.82   0.410    -.6940976    .2833287
avg_gr8ela~e |   1.052752   .2634644     4.00   0.000      .535677    1.569826
       _cons |  -3.145066   .6727252    -4.68   0.000    -4.465355   -1.824777
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_enr_2year_b_sp_b_ct_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       917
-------------+----------------------------------   F(14, 902)      =     13.11
       Model |  154.868891        14  11.0620636   Prob > F        =    0.0000
    Residual |  761.131111       902  .843826066   R-squared       =    0.1691
-------------+----------------------------------   Adj R-squared   =    0.1562
       Total |  916.000002       916           1   Root MSE        =     .9186

------------------------------------------------------------------------------
va_enr_2ye.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |  -.1482652   .0450084    -3.29   0.001    -.2365986   -.0599319
ln_min~rprop |  -.3826341   .1058913    -3.61   0.000     -.590456   -.1748122
ln_maleenr~p |  -.1288607    .432546    -0.30   0.766    -.9777743     .720053
ln_freemea~p |   .5844745   .0801873     7.29   0.000     .4270992    .7418499
   ln_elprop |   .0000542   .0192191     0.00   0.998    -.0376651    .0377736
ln_maletea~p |   .0460502   .0468793     0.98   0.326    -.0459549    .1380553
ln_min~fprop |  -.0429981   .0175735    -2.45   0.015    -.0774879   -.0085084
ln_newteac~p |   .1178216   .0280334     4.20   0.000     .0628034    .1728398
ln_fullcre~p |   1.455979   .8445205     1.72   0.085    -.2014749    3.113433
ln_fteteac~t |   -.929871   .1923978    -4.83   0.000     -1.30747   -.5522716
ln_fteadmi~t |  -.0664313   .0402295    -1.65   0.099    -.1453856     .012523
ln_fteserv~t |  -.0204066   .0190555    -1.07   0.284     -.057805    .0169917
avg_gr6mat~e |  -.2410386   .2492049    -0.97   0.334    -.7301276    .2480504
avg_gr8ela~e |   1.083936   .2637264     4.11   0.000     .5663475    1.601525
       _cons |  -3.096084   .6722037    -4.61   0.000    -4.415349   -1.776818
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_enr_2year_b_sp_b_ct_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       917
-------------+----------------------------------   F(14, 902)      =     12.23
       Model |   146.16622        14  10.4404443   Prob > F        =    0.0000
    Residual |  769.833782       902  .853474259   R-squared       =    0.1596
-------------+----------------------------------   Adj R-squared   =    0.1465
       Total |  916.000002       916           1   Root MSE        =    .92384

------------------------------------------------------------------------------
va_enr_2ye.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |  -.0338792   .0464441    -0.73   0.466    -.1250302    .0572718
ln_min~rprop |  -.3852577   .1065098    -3.62   0.000    -.5942936   -.1762218
ln_maleenr~p |  -.0351784   .4347535    -0.08   0.936    -.8884246    .8180678
ln_freemea~p |   .6025406   .0804457     7.49   0.000      .444658    .7604232
   ln_elprop |   .0044634   .0193142     0.23   0.817    -.0334426    .0423694
ln_maletea~p |   .0606069   .0469372     1.29   0.197    -.0315118    .1527257
ln_min~fprop |   -.046368   .0176435    -2.63   0.009    -.0809951   -.0117409
ln_newteac~p |   .1303039    .028004     4.65   0.000     .0753434    .1852644
ln_fullcre~p |   1.493061   .8497603     1.76   0.079    -.1746769    3.160798
ln_fteteac~t |  -1.005543   .1920615    -5.24   0.000    -1.382482   -.6286032
ln_fteadmi~t |  -.0760742   .0404854    -1.88   0.061    -.1555308    .0033824
ln_fteserv~t |   -.017554   .0191574    -0.92   0.360    -.0551523    .0200443
avg_gr6mat~e |  -.1836561   .2500763    -0.73   0.463    -.6744552    .3071429
avg_gr8ela~e |   .9774592   .2633558     3.71   0.000     .4605978    1.494321
       _cons |  -3.201938   .6752527    -4.74   0.000    -4.527187   -1.876689
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_enr_2year_b_sp_b_ct_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       884
-------------+----------------------------------   F(14, 869)      =      2.31
       Model |    31.64879        14  2.26062785   Prob > F        =    0.0041
    Residual |   851.35121       869   .97969069   R-squared       =    0.0358
-------------+----------------------------------   Adj R-squared   =    0.0203
       Total |  882.999999       883  .999999999   Root MSE        =    .98979

------------------------------------------------------------------------------
va_enr_2ye.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |  -.0698703   .0496109    -1.41   0.159    -.1672415    .0275009
ln_min~rprop |   .0915248   .1212828     0.75   0.451    -.1465167    .3295662
ln_maleenr~p |  -.7201879   .4795028    -1.50   0.133    -1.661307    .2209311
ln_freemea~p |   .1074575   .0884508     1.21   0.225    -.0661447    .2810596
   ln_elprop |  -.0111743   .0271673    -0.41   0.681    -.0644954    .0421468
ln_maletea~p |    -.00325   .0521934    -0.06   0.950    -.1056899    .0991899
ln_min~fprop |  -.0150181   .0253145    -0.59   0.553    -.0647029    .0346667
ln_newteac~p |   .0686998   .0342026     2.01   0.045     .0015705    .1358292
ln_fullcre~p |  -1.357277   .9377234    -1.45   0.148    -3.197745    .4831901
ln_fteteac~t |  -.5338066    .244146    -2.19   0.029    -1.012991   -.0546219
ln_fteadmi~t |  -.0150458   .0595899    -0.25   0.801    -.1320027    .1019111
ln_fteserv~t |   .0063381   .0229108     0.28   0.782     -.038629    .0513051
avg_gr6mat~e |  -.0099508   .2829222    -0.04   0.972    -.5652415    .5453399
avg_gr8ela~e |   .0576795   .3006738     0.19   0.848    -.5324523    .6478112
       _cons |  -2.033122   .8102433    -2.51   0.012    -3.623384   -.4428593
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_enr_2year_las_sp_las_ct_p_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       884
-------------+----------------------------------   F(14, 869)      =      2.22
       Model |  30.5290665        14  2.18064761   Prob > F        =    0.0059
    Residual |  852.470933       869  .980979209   R-squared       =    0.0346
-------------+----------------------------------   Adj R-squared   =    0.0190
       Total |  882.999999       883  .999999999   Root MSE        =    .99044

------------------------------------------------------------------------------
va_enr_2ye.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |  -.0466051   .0508668    -0.92   0.360    -.1464413    .0532311
ln_min~rprop |   .0842277   .1211748     0.70   0.487    -.1536019    .3220572
ln_maleenr~p |  -.6925812   .4794508    -1.44   0.149    -1.633598    .2484357
ln_freemea~p |   .1147581   .0882448     1.30   0.194    -.0584399     .287956
   ln_elprop |  -.0099847   .0272505    -0.37   0.714    -.0634693    .0434999
ln_maletea~p |  -.0022465   .0522799    -0.04   0.966    -.1048561    .1003631
ln_min~fprop |  -.0147497    .025372    -0.58   0.561    -.0645474    .0350479
ln_newteac~p |   .0702658    .034357     2.05   0.041     .0028333    .1376983
ln_fullcre~p |  -1.424794   .9374032    -1.52   0.129    -3.264633    .4150451
ln_fteteac~t |  -.5435374   .2449693    -2.22   0.027    -1.024338   -.0627368
ln_fteadmi~t |  -.0167144   .0597959    -0.28   0.780    -.1340757    .1006468
ln_fteserv~t |   .0071208   .0229149     0.31   0.756    -.0378542    .0520958
avg_gr6mat~e |   -.013371   .2831773    -0.05   0.962    -.5691625    .5424205
avg_gr8ela~e |   .0430959   .3007941     0.14   0.886     -.547272    .6334638
       _cons |  -2.036573    .812828    -2.51   0.012    -3.631909   -.4412373
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_enr_2year_las_sp_las_ct_p_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       884
-------------+----------------------------------   F(14, 869)      =      2.16
       Model |  29.7178224        14   2.1227016   Prob > F        =    0.0077
    Residual |  853.282177       869  .981912747   R-squared       =    0.0337
-------------+----------------------------------   Adj R-squared   =    0.0181
       Total |  882.999999       883  .999999999   Root MSE        =    .99092

------------------------------------------------------------------------------
va_enr_2ye.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |   .0060154   .0538703     0.11   0.911    -.0997156    .1117464
ln_min~rprop |   .0796772   .1212215     0.66   0.511     -.158244    .3175983
ln_maleenr~p |  -.6459009   .4795552    -1.35   0.178    -1.587123    .2953211
ln_freemea~p |   .1200984   .0881065     1.36   0.173     -.052828    .2930249
   ln_elprop |  -.0062535   .0270577    -0.23   0.817    -.0593597    .0468526
ln_maletea~p |    .001406   .0521537     0.03   0.978    -.1009559    .1037679
ln_min~fprop |  -.0164444   .0253526    -0.65   0.517    -.0662038     .033315
ln_newteac~p |   .0759692    .034212     2.22   0.027     .0088214    .1431171
ln_fullcre~p |  -1.420823   .9383255    -1.51   0.130    -3.262472    .4208261
ln_fteteac~t |  -.5762758   .2429055    -2.37   0.018    -1.053026   -.0995258
ln_fteadmi~t |  -.0246913   .0600715    -0.41   0.681    -.1425935    .0932109
ln_fteserv~t |   .0073513   .0229508     0.32   0.749    -.0376941    .0523967
avg_gr6mat~e |  -.0082688   .2833434    -0.03   0.977    -.5643861    .5478486
avg_gr8ela~e |   .0180195   .2996977     0.06   0.952    -.5701965    .6062355
       _cons |  -2.115806   .8117378    -2.61   0.009    -3.709002   -.5226099
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_enr_2year_las_sp_las_ct_p_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       917
-------------+----------------------------------   F(14, 902)      =     16.87
       Model |  190.119268        14  13.5799477   Prob > F        =    0.0000
    Residual |   725.88073       902  .804745821   R-squared       =    0.2076
-------------+----------------------------------   Adj R-squared   =    0.1953
       Total |  915.999998       916  .999999998   Root MSE        =    .89708

------------------------------------------------------------------------------
va_enr_4ye.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |   .2818339   .0436896     6.45   0.000     .1960887     .367579
ln_min~rprop |   .8430449   .1034837     8.15   0.000      .639948    1.046142
ln_maleenr~p |   .4163365   .4230952     0.98   0.325    -.4140292    1.246702
ln_freemea~p |  -.6716672   .0785738    -8.55   0.000    -.8258759   -.5174585
   ln_elprop |    .030964   .0187683     1.65   0.099    -.0058707    .0677987
ln_maletea~p |  -.0726322   .0457191    -1.59   0.112    -.1623603     .017096
ln_min~fprop |   .0488124   .0171385     2.85   0.004     .0151765    .0824484
ln_newteac~p |   .0031812    .027281     0.12   0.907    -.0503604    .0567228
ln_fullcre~p |  -1.726964    .825748    -2.09   0.037    -3.347575   -.1063536
ln_fteteac~t |   .8111956   .1878356     4.32   0.000     .4425499    1.179841
ln_fteadmi~t |   .0146984   .0392118     0.37   0.708    -.0622585    .0916554
ln_fteserv~t |   .0460283   .0186285     2.47   0.014     .0094681    .0825886
avg_gr6mat~e |   .6462047    .242806     2.66   0.008     .1696742    1.122735
avg_gr8ela~e |  -.3949318   .2568968    -1.54   0.125    -.8991167    .1092532
       _cons |   3.316348   .6559555     5.06   0.000     2.028971    4.603725
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_enr_4year_b_sp_b_ct_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       917
-------------+----------------------------------   F(14, 902)      =     15.31
       Model |   175.91644        14    12.56546   Prob > F        =    0.0000
    Residual |  740.083559       902   .82049175   R-squared       =    0.1920
-------------+----------------------------------   Adj R-squared   =    0.1795
       Total |  915.999998       916  .999999998   Root MSE        =    .90581

------------------------------------------------------------------------------
va_enr_4ye.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |   .2151683   .0443817     4.85   0.000     .1280648    .3022717
ln_min~rprop |   .8633482   .1044169     8.27   0.000     .6584198    1.068277
ln_maleenr~p |   .3137953   .4265235     0.74   0.462    -.5232986    1.150889
ln_freemea~p |  -.6993559   .0790708    -8.84   0.000      -.85454   -.5441718
   ln_elprop |   .0292734   .0189515     1.54   0.123    -.0079208    .0664675
ln_maletea~p |  -.0747256   .0462265    -1.62   0.106    -.1654497    .0159984
ln_min~fprop |   .0475617   .0173288     2.74   0.006     .0135522    .0815713
ln_newteac~p |   .0005391    .027643     0.02   0.984    -.0537131    .0547912
ln_fullcre~p |   -1.43603   .8327619    -1.72   0.085    -3.070406    .1983466
ln_fteteac~t |   .8439853   .1897189     4.45   0.000     .4716434    1.216327
ln_fteadmi~t |   .0147857   .0396694     0.37   0.709    -.0630693    .0926407
ln_fteserv~t |   .0423667   .0187902     2.25   0.024      .005489    .0792443
avg_gr6mat~e |   .6750735   .2457352     2.75   0.006     .1927943    1.157353
avg_gr8ela~e |   -.372034   .2600544    -1.43   0.153    -.8824161    .1383481
       _cons |   3.296658   .6628443     4.97   0.000     1.995761    4.597554
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_enr_4year_b_sp_b_ct_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       917
-------------+----------------------------------   F(14, 902)      =     13.86
       Model |  162.119443        14  11.5799602   Prob > F        =    0.0000
    Residual |  753.880555       902  .835787755   R-squared       =    0.1770
-------------+----------------------------------   Adj R-squared   =    0.1642
       Total |  915.999998       916  .999999998   Root MSE        =    .91421

------------------------------------------------------------------------------
va_enr_4ye.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |   .1177733   .0459603     2.56   0.011     .0275717    .2079749
ln_min~rprop |   .8639055   .1054004     8.20   0.000     .6570468    1.070764
ln_maleenr~p |   .2259548   .4302253     0.53   0.600    -.6184042    1.070314
ln_freemea~p |   -.723791   .0796078    -9.09   0.000    -.8800292   -.5675529
   ln_elprop |   .0215811   .0191131     1.13   0.259    -.0159301    .0590923
ln_maletea~p |  -.0958912   .0464483    -2.06   0.039    -.1870504   -.0047319
ln_min~fprop |   .0517654   .0174597     2.96   0.003     .0174989    .0860318
ln_newteac~p |  -.0129902   .0277123    -0.47   0.639    -.0673782    .0413979
ln_fullcre~p |  -1.530302   .8409094    -1.82   0.069    -3.180669    .1200644
ln_fteteac~t |   .9503677   .1900611     5.00   0.000     .5773542    1.323381
ln_fteadmi~t |    .022674   .0400637     0.57   0.572     -.055955     .101303
ln_fteserv~t |   .0374154   .0189579     1.97   0.049     .0002087    .0746221
avg_gr6mat~e |   .6083462   .2474715     2.46   0.014     .1226592    1.094033
avg_gr8ela~e |  -.2454496   .2606128    -0.94   0.347    -.7569276    .2660283
       _cons |   3.429398   .6682195     5.13   0.000     2.117952    4.740844
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_enr_4year_b_sp_b_ct_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       884
-------------+----------------------------------   F(14, 869)      =      3.01
       Model |  40.8346833        14  2.91676309   Prob > F        =    0.0002
    Residual |  842.165316       869  .969120042   R-squared       =    0.0462
-------------+----------------------------------   Adj R-squared   =    0.0309
       Total |         883       883  .999999999   Root MSE        =    .98444

------------------------------------------------------------------------------
va_enr_4ye.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |   .2155606   .0493425     4.37   0.000     .1187161    .3124051
ln_min~rprop |  -.1452012   .1206267    -1.20   0.229     -.381955    .0915526
ln_maleenr~p |   .4518077   .4769089     0.95   0.344    -.4842203    1.387836
ln_freemea~p |  -.0903362   .0879723    -1.03   0.305    -.2629992    .0823269
   ln_elprop |   .0239663   .0270203     0.89   0.375    -.0290663     .076999
ln_maletea~p |  -.0079534   .0519111    -0.15   0.878    -.1098391    .0939323
ln_min~fprop |   .0318271   .0251776     1.26   0.207    -.0175889    .0812432
ln_newteac~p |   .0040623   .0340176     0.12   0.905    -.0627039    .0708285
ln_fullcre~p |    .598563   .9326507     0.64   0.521    -1.231948    2.429074
ln_fteteac~t |   .4461007   .2428252     1.84   0.067    -.0304918    .9226932
ln_fteadmi~t |   .0378878   .0592675     0.64   0.523    -.0784364     .154212
ln_fteserv~t |   .0302714   .0227869     1.33   0.184    -.0144524    .0749952
avg_gr6mat~e |   .0609904   .2813917     0.22   0.828    -.4912964    .6132773
avg_gr8ela~e |  -.2698408   .2990473    -0.90   0.367    -.8567802    .3170986
       _cons |   2.144242   .8058602     2.66   0.008      .562582    3.725902
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_enr_4year_las_sp_las_ct_p_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       884
-------------+----------------------------------   F(14, 869)      =      2.33
       Model |  31.9641509        14  2.28315363   Prob > F        =    0.0037
    Residual |  851.035849       869  .979327789   R-squared       =    0.0362
-------------+----------------------------------   Adj R-squared   =    0.0207
       Total |         883       883  .999999999   Root MSE        =    .98961

------------------------------------------------------------------------------
va_enr_4ye.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |   .1593351    .050824     3.14   0.002     .0595829    .2590872
ln_min~rprop |  -.1240522   .1210728    -1.02   0.306    -.3616815    .1135771
ln_maleenr~p |    .380564    .479047     0.79   0.427    -.5596604    1.320788
ln_freemea~p |  -.1111127   .0881705    -1.26   0.208    -.2841648    .0619394
   ln_elprop |   .0214707   .0272276     0.79   0.431    -.0319689    .0749102
ln_maletea~p |  -.0097896   .0522359    -0.19   0.851    -.1123128    .0927336
ln_min~fprop |   .0304766   .0253507     1.20   0.230    -.0192791    .0802323
ln_newteac~p |    .000963   .0343281     0.03   0.978    -.0664127    .0683387
ln_fullcre~p |   .8093412   .9366139     0.86   0.388    -1.028949    2.647631
ln_fteteac~t |   .4656061    .244763     1.90   0.057    -.0147897    .9460018
ln_fteadmi~t |   .0407217   .0597455     0.68   0.496    -.0765408    .1579841
ln_fteserv~t |   .0279758   .0228956     1.22   0.222    -.0169613     .072913
avg_gr6mat~e |    .073534   .2829389     0.26   0.795    -.4817894    .6288575
avg_gr8ela~e |  -.2331889   .3005408    -0.78   0.438    -.8230596    .3566819
       _cons |   2.130759   .8121436     2.62   0.009     .5367663    3.724751
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_enr_4year_las_sp_las_ct_p_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       884
-------------+----------------------------------   F(14, 869)      =      1.80
       Model |  24.9210153        14  1.78007252   Prob > F        =    0.0341
    Residual |  858.078984       869  .987432663   R-squared       =    0.0282
-------------+----------------------------------   Adj R-squared   =    0.0126
       Total |         883       883  .999999999   Root MSE        =     .9937

------------------------------------------------------------------------------
va_enr_4ye.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |   .0873579   .0540215     1.62   0.106    -.0186699    .1933857
ln_min~rprop |  -.1168165   .1215618    -0.96   0.337    -.3554055    .1217724
ln_maleenr~p |   .3096364   .4809013     0.64   0.520    -.6342274      1.2535
ln_freemea~p |  -.1274904   .0883538    -1.44   0.149    -.3009023    .0459214
   ln_elprop |    .012512   .0271337     0.46   0.645    -.0407432    .0657672
ln_maletea~p |  -.0244876   .0523001    -0.47   0.640    -.1271368    .0781616
ln_min~fprop |   .0339647   .0254237     1.34   0.182    -.0159344    .0838638
ln_newteac~p |  -.0093419    .034308    -0.27   0.785    -.0766782    .0579943
ln_fullcre~p |   .7337093   .9409592     0.78   0.436    -1.113109    2.580528
ln_fteteac~t |   .5555676   .2435873     2.28   0.023     .0774795    1.033656
ln_fteadmi~t |   .0493081   .0602401     0.82   0.413    -.0689251    .1675412
ln_fteserv~t |   .0249057   .0230152     1.08   0.279    -.0202661    .0700776
avg_gr6mat~e |   .0405411   .2841387     0.14   0.887    -.5171372    .5982194
avg_gr8ela~e |  -.1489009   .3005389    -0.50   0.620    -.7387679    .4409662
       _cons |   2.277562   .8140162     2.80   0.005     .6798945     3.87523
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_enr_4year_las_sp_las_ct_p_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       917
-------------+----------------------------------   F(14, 902)      =     13.25
       Model |   156.21669        14   11.158335   Prob > F        =    0.0000
    Residual |  759.783312       902  .842331831   R-squared       =    0.1705
-------------+----------------------------------   Adj R-squared   =    0.1577
       Total |  916.000002       916           1   Root MSE        =    .91779

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |    .056674   .0446983     1.27   0.205    -.0310507    .1443987
ln_min~rprop |   .4660371   .1058728     4.40   0.000     .2582514    .6738227
ln_maleenr~p |   .0421331   .4328629     0.10   0.922    -.8074025    .8916687
ln_freemea~p |  -.0726727   .0803878    -0.90   0.366    -.2304415    .0850961
   ln_elprop |   .0231405   .0192016     1.21   0.228    -.0145446    .0608255
ln_maletea~p |  -.0116549   .0467746    -0.25   0.803    -.1034545    .0801448
ln_min~fprop |  -.0024385   .0175341    -0.14   0.889    -.0368509     .031974
ln_newteac~p |   .1323562   .0279108     4.74   0.000     .0775786    .1871339
ln_fullcre~p |  -.5753034   .8448114    -0.68   0.496    -2.233328    1.082721
ln_fteteac~t |  -.2277223    .192172    -1.18   0.236    -.6048786    .1494339
ln_fteadmi~t |  -.0546487    .040117    -1.36   0.173    -.1333823    .0240849
ln_fteserv~t |   .0053581   .0190586     0.28   0.779    -.0320462    .0427624
avg_gr6mat~e |   .6910363   .2484115     2.78   0.006     .2035045    1.178568
avg_gr8ela~e |   .4911441   .2628275     1.87   0.062    -.0246805    1.006969
       _cons |  -.4370291    .671099    -0.65   0.515    -1.754126    .8800681
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_dk_enr_b_sp_b_ct_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       917
-------------+----------------------------------   F(14, 902)      =     13.11
       Model |  154.916407        14  11.0654576   Prob > F        =    0.0000
    Residual |  761.083595       902  .843773387   R-squared       =    0.1691
-------------+----------------------------------   Adj R-squared   =    0.1562
       Total |  916.000002       916           1   Root MSE        =    .91857

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |  -.0113727    .045007    -0.25   0.801    -.0997033    .0769579
ln_min~rprop |   .4716782    .105888     4.45   0.000     .2638628    .6794937
ln_maleenr~p |  -.0217685   .4325325    -0.05   0.960    -.8706556    .8271187
ln_freemea~p |  -.0852231   .0801848    -1.06   0.288    -.2425935    .0721473
   ln_elprop |    .021411   .0192185     1.11   0.266    -.0163072    .0591292
ln_maletea~p |  -.0174332   .0468778    -0.37   0.710    -.1094354     .074569
ln_min~fprop |  -.0013231    .017573    -0.08   0.940    -.0358117    .0331656
ln_newteac~p |   .1263902   .0280325     4.51   0.000     .0713737    .1814067
ln_fullcre~p |  -.5231022   .8444941    -0.62   0.536    -2.180504      1.1343
ln_fteteac~t |  -.1926157   .1923918    -1.00   0.317    -.5702033    .1849719
ln_fteadmi~t |  -.0499662   .0402283    -1.24   0.215     -.128918    .0289857
ln_fteserv~t |   .0037181   .0190549     0.20   0.845     -.033679    .0411153
avg_gr6mat~e |   .6726824   .2491972     2.70   0.007     .1836087    1.161756
avg_gr8ela~e |   .5400738   .2637182     2.05   0.041     .0225012    1.057646
       _cons |  -.3981776   .6721827    -0.59   0.554    -1.717402    .9210464
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_dk_enr_b_sp_b_ct_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       917
-------------+----------------------------------   F(14, 902)      =     13.17
       Model |  155.480827        14  11.1057733   Prob > F        =    0.0000
    Residual |  760.519175       902  .843147644   R-squared       =    0.1697
-------------+----------------------------------   Adj R-squared   =    0.1569
       Total |  916.000002       916           1   Root MSE        =    .91823

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |   .0395306   .0461622     0.86   0.392    -.0510673    .1301284
ln_min~rprop |   .4694812   .1058635     4.43   0.000     .2617137    .6772486
ln_maleenr~p |   .0149634   .4321154     0.03   0.972    -.8331052    .8630319
ln_freemea~p |  -.0827424   .0799576    -1.03   0.301    -.2396669    .0741821
   ln_elprop |   .0209549    .019197     1.09   0.275    -.0167212    .0586309
ln_maletea~p |  -.0163413   .0466523    -0.35   0.726     -.107901    .0752184
ln_min~fprop |  -.0020033   .0175365    -0.11   0.909    -.0364203    .0324137
ln_newteac~p |   .1301636    .027834     4.68   0.000     .0755366    .1847906
ln_fullcre~p |  -.5451021   .8446038    -0.65   0.519    -2.202719    1.112515
ln_fteteac~t |  -.2005298   .1908961    -1.05   0.294    -.5751819    .1741224
ln_fteadmi~t |  -.0544553   .0402397    -1.35   0.176    -.1334297    .0245191
ln_fteserv~t |   .0034387   .0190412     0.18   0.857    -.0339315    .0408088
avg_gr6mat~e |   .6872459   .2485588     2.76   0.006     .1994251    1.175067
avg_gr8ela~e |   .5147498   .2617577     1.97   0.050     .0010248    1.028475
       _cons |  -.4191191   .6711552    -0.62   0.532    -1.736327    .8980884
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_dk_enr_b_sp_b_ct_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       884
-------------+----------------------------------   F(14, 869)      =      1.29
       Model |  18.0359324        14  1.28828089   Prob > F        =    0.2042
    Residual |  864.964065       869  .995355656   R-squared       =    0.0204
-------------+----------------------------------   Adj R-squared   =    0.0046
       Total |  882.999998       883  .999999997   Root MSE        =    .99768

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |   .0830614    .050006     1.66   0.097    -.0150852     .181208
ln_min~rprop |   .0170056   .1222486     0.14   0.889    -.2229314    .2569426
ln_maleenr~p |   -.327586   .4833211    -0.68   0.498    -1.276199    .6210272
ln_freemea~p |   .0045915   .0891552     0.05   0.959    -.1703931    .1795761
   ln_elprop |   .0054207   .0273836     0.20   0.843     -.048325    .0591665
ln_maletea~p |  -.0101311    .052609    -0.19   0.847    -.1133867    .0931245
ln_min~fprop |   .0139296   .0255161     0.55   0.585    -.0361508    .0640101
ln_newteac~p |   .0685711    .034475     1.99   0.047     .0009072    .1362351
ln_fullcre~p |  -.9961913   .9451906    -1.05   0.292    -2.851315    .8589321
ln_fteteac~t |  -.1203286   .2460901    -0.49   0.625    -.6033291    .3626719
ln_fteadmi~t |   .0220923   .0600644     0.37   0.713    -.0957959    .1399805
ln_fteserv~t |    .034406   .0230933     1.49   0.137    -.0109191    .0797311
avg_gr6mat~e |   .1860778   .2851751     0.65   0.514    -.3736348    .7457903
avg_gr8ela~e |  -.2662532   .3030681    -0.88   0.380    -.8610843    .3285778
       _cons |   -.072252   .8166954    -0.09   0.930    -1.675178    1.530674
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_dk_enr_las_sp_las_ct_p_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       884
-------------+----------------------------------   F(14, 869)      =      1.19
       Model |  16.6071494        14  1.18622496   Prob > F        =    0.2774
    Residual |  866.392848       869  .996999825   R-squared       =    0.0188
-------------+----------------------------------   Adj R-squared   =    0.0030
       Total |  882.999998       883  .999999997   Root MSE        =     .9985

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |   .0589478   .0512805     1.15   0.251    -.0417004    .1595959
ln_min~rprop |   .0253696   .1221603     0.21   0.836    -.2143941    .2651333
ln_maleenr~p |  -.3572309   .4833499    -0.74   0.460    -1.305901    .5914388
ln_freemea~p |  -.0036893   .0889625    -0.04   0.967    -.1782958    .1709172
   ln_elprop |   .0042742   .0274722     0.16   0.876    -.0496453    .0581937
ln_maletea~p |   -.011037    .052705    -0.21   0.834     -.114481    .0924071
ln_min~fprop |   .0134915   .0255784     0.53   0.598    -.0367111    .0636942
ln_newteac~p |   .0671042   .0346365     1.94   0.053    -.0008767    .1350851
ln_fullcre~p |   -.915363   .9450267    -0.97   0.333    -2.770165    .9394386
ln_fteteac~t |   -.111157   .2469615    -0.45   0.653    -.5958678    .3735537
ln_fteadmi~t |   .0235486   .0602822     0.39   0.696    -.0947671    .1418643
ln_fteserv~t |   .0335027   .0231013     1.45   0.147    -.0118381    .0788435
avg_gr6mat~e |   .1905976   .2854803     0.67   0.505    -.3697139    .7509091
avg_gr8ela~e |  -.2508171   .3032403    -0.83   0.408    -.8459862     .344352
       _cons |  -.0736483   .8194384    -0.09   0.928    -1.681958    1.534661
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_dk_enr_las_sp_las_ct_p_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       884
-------------+----------------------------------   F(14, 869)      =      1.17
       Model |  16.2852011        14  1.16322865   Prob > F        =    0.2961
    Residual |  866.714796       869  .997370307   R-squared       =    0.0184
-------------+----------------------------------   Adj R-squared   =    0.0026
       Total |  882.999998       883  .999999997   Root MSE        =    .99868

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |    .054241   .0542926     1.00   0.318     -.052319     .160801
ln_min~rprop |   .0263562   .1221719     0.22   0.829    -.2134304    .2661427
ln_maleenr~p |  -.3654614   .4833152    -0.76   0.450    -1.314063    .5831401
ln_freemea~p |  -.0093666   .0887973    -0.11   0.916    -.1836489    .1649157
   ln_elprop |   .0017312   .0272699     0.06   0.949    -.0517913    .0552538
ln_maletea~p |  -.0169237   .0525626    -0.32   0.748    -.1200882    .0862408
ln_min~fprop |   .0143136   .0255513     0.56   0.575    -.0358359    .0644632
ln_newteac~p |   .0651593   .0344802     1.89   0.059     -.002515    .1328336
ln_fullcre~p |   -.955949   .9456823    -1.01   0.312    -2.812037    .9001395
ln_fteteac~t |  -.0823365   .2448099    -0.34   0.737    -.5628244    .3981514
ln_fteadmi~t |   .0229298   .0605425     0.38   0.705    -.0958968    .1417564
ln_fteserv~t |   .0319033   .0231307     1.38   0.168    -.0134953    .0773019
avg_gr6mat~e |    .175233   .2855649     0.61   0.540    -.3852445    .7357106
avg_gr8ela~e |  -.2199271   .3020475    -0.73   0.467     -.812755    .3729007
       _cons |  -.0445405   .8181021    -0.05   0.957    -1.650228    1.561147
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_dk_enr_las_sp_las_ct_p_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       917
-------------+----------------------------------   F(14, 902)      =     13.02
       Model |   153.96292        14  10.9973514   Prob > F        =    0.0000
    Residual |  762.037081       902  .844830467   R-squared       =    0.1681
-------------+----------------------------------   Adj R-squared   =    0.1552
       Total |  916.000001       916           1   Root MSE        =    .91915

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |  -.1161552   .0447645    -2.59   0.010    -.2040099   -.0283005
ln_min~rprop |  -.3857296   .1060297    -3.64   0.000    -.5938232   -.1776361
ln_maleenr~p |  -.0448187   .4335044    -0.10   0.918    -.8956134     .805976
ln_freemea~p |   .5716603   .0805069     7.10   0.000     .4136577    .7296629
   ln_elprop |   .0058329   .0192301     0.30   0.762     -.031908    .0435738
ln_maletea~p |   .0493072   .0468439     1.05   0.293    -.0426285    .1412429
ln_min~fprop |  -.0469545   .0175601    -2.67   0.008    -.0814179    -.012491
ln_newteac~p |   .1192146   .0279522     4.26   0.000     .0643557    .1740735
ln_fullcre~p |   1.560903   .8460635     1.84   0.065    -.0995792    3.221385
ln_fteteac~t |  -.9120827   .1924568    -4.74   0.000    -1.289798   -.5343674
ln_fteadmi~t |  -.0748097   .0401765    -1.86   0.063      -.15366    .0040406
ln_fteserv~t |  -.0160402   .0190868    -0.84   0.401       -.0535    .0214195
avg_gr6mat~e |  -.2407459   .2487797    -0.97   0.333    -.7290002    .2475084
avg_gr8ela~e |   1.105768   .2632171     4.20   0.000     .5891783    1.622357
       _cons |  -2.992058   .6720936    -4.45   0.000    -4.311107   -1.673009
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_dk_enr_2year_b_sp_b_ct_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       917
-------------+----------------------------------   F(14, 902)      =     13.27
       Model |  156.437344        14   11.174096   Prob > F        =    0.0000
    Residual |  759.562657       902  .842087203   R-squared       =    0.1708
-------------+----------------------------------   Adj R-squared   =    0.1579
       Total |  916.000001       916           1   Root MSE        =    .91765

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |  -.1399856    .044962    -3.11   0.002     -.228228   -.0517433
ln_min~rprop |  -.3926342   .1057821    -3.71   0.000    -.6002419   -.1850265
ln_maleenr~p |  -.0431974   .4321001    -0.10   0.920    -.8912359    .8048412
ln_freemea~p |   .5765156   .0801046     7.20   0.000     .4193025    .7337287
   ln_elprop |    .005225   .0191993     0.27   0.786    -.0324555    .0429055
ln_maletea~p |   .0451396   .0468309     0.96   0.335    -.0467707    .1370498
ln_min~fprop |  -.0451555   .0175554    -2.57   0.010    -.0796097   -.0107013
ln_newteac~p |   .1152005   .0280045     4.11   0.000      .060239     .170162
ln_fullcre~p |   1.435079   .8436499     1.70   0.089    -.2206666    3.090824
ln_fteteac~t |   -.898824   .1921994    -4.68   0.000    -1.276034   -.5216139
ln_fteadmi~t |  -.0704654    .040188    -1.75   0.080    -.1493383    .0084075
ln_fteserv~t |  -.0153796   .0190359    -0.81   0.419    -.0527394    .0219802
avg_gr6mat~e |  -.2753285    .248948    -1.11   0.269    -.7639133    .2132563
avg_gr8ela~e |    1.13795   .2634545     4.32   0.000     .6208951    1.655005
       _cons |  -2.943745   .6715107    -4.38   0.000     -4.26165    -1.62584
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_dk_enr_2year_b_sp_b_ct_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       917
-------------+----------------------------------   F(14, 902)      =     12.49
       Model |  148.696147        14  10.6211533   Prob > F        =    0.0000
    Residual |  767.303854       902  .850669462   R-squared       =    0.1623
-------------+----------------------------------   Adj R-squared   =    0.1493
       Total |  916.000001       916           1   Root MSE        =    .92232

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |  -.0326382   .0463677    -0.70   0.482    -.1236392    .0583629
ln_min~rprop |  -.3950804   .1063347    -3.72   0.000    -.6037726   -.1863883
ln_maleenr~p |   .0447969   .4340386     0.10   0.918    -.8070461    .8966399
ln_freemea~p |   .5935559   .0803134     7.39   0.000      .435933    .7511789
   ln_elprop |   .0094002   .0192825     0.49   0.626    -.0284435    .0472439
ln_maletea~p |   .0588838     .04686     1.26   0.209    -.0330834    .1508511
ln_min~fprop |  -.0483307   .0176145    -2.74   0.006    -.0829008   -.0137605
ln_newteac~p |   .1269423   .0279579     4.54   0.000     .0720722    .1818124
ln_fullcre~p |   1.470473   .8483629     1.73   0.083    -.1945215    3.135468
ln_fteteac~t |  -.9702374   .1917457    -5.06   0.000    -1.346557   -.5939178
ln_fteadmi~t |  -.0795119   .0404188    -1.97   0.049    -.1588378    -.000186
ln_fteserv~t |  -.0126786   .0191259    -0.66   0.508     -.050215    .0248579
avg_gr6mat~e |  -.2213074    .249665    -0.89   0.376    -.7112994    .2686845
avg_gr8ela~e |   1.037684   .2629227     3.95   0.000      .521673    1.553696
       _cons |   -3.04349   .6741423    -4.51   0.000     -4.36656    -1.72042
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_dk_enr_2year_b_sp_b_ct_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       884
-------------+----------------------------------   F(14, 869)      =      2.14
       Model |  29.4054836        14  2.10039168   Prob > F        =    0.0086
    Residual |  853.594513       869  .982272167   R-squared       =    0.0333
-------------+----------------------------------   Adj R-squared   =    0.0177
       Total |  882.999997       883  .999999996   Root MSE        =     .9911

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |   -.052636   .0496762    -1.06   0.290    -.1501355    .0448634
ln_min~rprop |   .0821868   .1214425     0.68   0.499    -.1561681    .3205417
ln_maleenr~p |   -.621235   .4801341    -1.29   0.196    -1.563593    .3211231
ln_freemea~p |    .119202   .0885673     1.35   0.179    -.0546288    .2930327
   ln_elprop |  -.0079803    .027203    -0.29   0.769    -.0613717     .045411
ln_maletea~p |  -.0049547   .0522621    -0.09   0.924    -.1075295      .09762
ln_min~fprop |  -.0176424   .0253479    -0.70   0.487    -.0673926    .0321078
ln_newteac~p |   .0670718   .0342476     1.96   0.050     -.000146    .1342895
ln_fullcre~p |  -1.297571    .938958    -1.38   0.167    -3.140461    .5453199
ln_fteteac~t |  -.5098544   .2444674    -2.09   0.037      -.98967   -.0300388
ln_fteadmi~t |   -.024026   .0596683    -0.40   0.687    -.1411369    .0930849
ln_fteserv~t |   .0128736    .022941     0.56   0.575    -.0321526    .0578999
avg_gr6mat~e |  -.0739614   .2832947    -0.26   0.794    -.6299832    .4820604
avg_gr8ela~e |   .1099112   .3010697     0.37   0.715    -.4809975      .70082
       _cons |  -1.897372   .8113101    -2.34   0.020    -3.489728   -.3050158
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_dk_enr_2year_las_sp_las_ct_p_climateindex.dta
    saved

      Source |       SS           df       MS      Number of obs   =       884
-------------+----------------------------------   F(14, 869)      =      2.08
       Model |  28.5924251        14  2.04231608   Prob > F        =    0.0111
    Residual |  854.407572       869  .983207793   R-squared       =    0.0324
-------------+----------------------------------   Adj R-squared   =    0.0168
       Total |  882.999997       883  .999999996   Root MSE        =    .99157

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |  -.0276451   .0509246    -0.54   0.587    -.1275947    .0723045
ln_min~rprop |   .0760351   .1213124     0.63   0.531    -.1620644    .3141347
ln_maleenr~p |  -.5937529   .4799951    -1.24   0.216    -1.535838    .3483322
ln_freemea~p |   .1255403    .088345     1.42   0.156    -.0478542    .2989349
   ln_elprop |  -.0065205   .0272815    -0.24   0.811    -.0600658    .0470248
ln_maletea~p |   -.003594   .0523392    -0.07   0.945    -.1063201    .0991321
ln_min~fprop |  -.0176911   .0254008    -0.70   0.486    -.0675453    .0321631
ln_newteac~p |   .0690829   .0343961     2.01   0.045     .0015739     .136592
ln_fullcre~p |  -1.347244   .9384674    -1.44   0.151    -3.189171     .494684
ln_fteteac~t |  -.5222324   .2452474    -2.13   0.034    -1.003579   -.0408859
ln_fteadmi~t |  -.0263939   .0598638    -0.44   0.659    -.1438884    .0911006
ln_fteserv~t |   .0135206   .0229409     0.59   0.556    -.0315055    .0585467
avg_gr6mat~e |   -.075582   .2834988    -0.27   0.790    -.6320045    .4808404
avg_gr8ela~e |   .0949215   .3011356     0.32   0.753    -.4961166    .6859596
       _cons |  -1.911554   .8137508    -2.35   0.019    -3.508701   -.3144076
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_dk_enr_2year_las_sp_las_ct_p_qualityindex.dta
    saved

      Source |       SS           df       MS      Number of obs   =       884
-------------+----------------------------------   F(14, 869)      =      2.07
       Model |  28.4665973        14  2.03332838   Prob > F        =    0.0116
    Residual |    854.5334       869  .983352589   R-squared       =    0.0322
-------------+----------------------------------   Adj R-squared   =    0.0166
       Total |  882.999997       883  .999999996   Root MSE        =    .99164

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |   .0220107   .0539097     0.41   0.683    -.0837978    .1278192
ln_min~rprop |   .0719138   .1213103     0.59   0.553    -.1661817    .3100093
ln_maleenr~p |  -.5509118   .4799067    -1.15   0.251    -1.492824        .391
ln_freemea~p |   .1290294   .0881711     1.46   0.144    -.0440238    .3020826
   ln_elprop |  -.0036583   .0270776    -0.14   0.893    -.0568034    .0494868
ln_maletea~p |  -.0018052   .0521919    -0.03   0.972    -.1042421    .1006317
ln_min~fprop |  -.0190903   .0253712    -0.75   0.452    -.0688862    .0307056
ln_newteac~p |   .0740372   .0342371     2.16   0.031     .0068401    .1412342
ln_fullcre~p |  -1.355493   .9390132    -1.44   0.149    -3.198492    .4875063
ln_fteteac~t |  -.5454056   .2430835    -2.24   0.025    -1.022505   -.0683062
ln_fteadmi~t |  -.0343186   .0601155    -0.57   0.568    -.1523072      .08367
ln_fteserv~t |   .0132673   .0229676     0.58   0.564    -.0318111    .0583457
avg_gr6mat~e |  -.0752126    .283551    -0.27   0.791    -.6317376    .4813123
avg_gr8ela~e |   .0797999   .2999174     0.27   0.790    -.5088472     .668447
       _cons |  -1.979757   .8123327    -2.44   0.015     -3.57412   -.3853934
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_dk_enr_2year_las_sp_las_ct_p_supportindex.dta
    saved

      Source |       SS           df       MS      Number of obs   =       917
-------------+----------------------------------   F(14, 902)      =     14.98
       Model |   172.78062        14  12.3414729   Prob > F        =    0.0000
    Residual |  743.219381       902  .823968272   R-squared       =    0.1886
-------------+----------------------------------   Adj R-squared   =    0.1760
       Total |  916.000001       916           1   Root MSE        =    .90773

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |   .1749712   .0442083     3.96   0.000      .088208    .2617344
ln_min~rprop |    .886244   .1047124     8.46   0.000     .6807358    1.091752
ln_maleenr~p |   .0650284   .4281185     0.15   0.879    -.7751959    .9052528
ln_freemea~p |  -.7258714   .0795067    -9.13   0.000     -.881911   -.5698318
   ln_elprop |   .0146383   .0189912     0.77   0.441    -.0226338    .0519103
ln_maletea~p |  -.0666767   .0462619    -1.44   0.150    -.1574701    .0241168
ln_min~fprop |   .0520184   .0173419     3.00   0.003     .0179831    .0860536
ln_newteac~p |  -.0116769   .0276049    -0.42   0.672    -.0658542    .0425004
ln_fullcre~p |   -2.23382   .8355519    -2.67   0.008    -3.873672   -.5939682
ln_fteteac~t |   .8378233   .1900657     4.41   0.000     .4648008    1.210846
ln_fteadmi~t |   .0354864   .0396773     0.89   0.371    -.0423843     .113357
ln_fteserv~t |   .0247212   .0188497     1.31   0.190    -.0122731    .0617155
avg_gr6mat~e |   .9400109   .2456888     3.83   0.000     .4578227    1.422199
avg_gr8ela~e |  -.8542395   .2599468    -3.29   0.001     -1.36441   -.3440685
       _cons |    3.03988   .6637434     4.58   0.000     1.737219    4.342541
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_dk_enr_4year_b_sp_b_ct_climateindex.dta saved

      Source |       SS           df       MS      Number of obs   =       917
-------------+----------------------------------   F(14, 902)      =     14.53
       Model |  168.533021        14  12.0380729   Prob > F        =    0.0000
    Residual |   747.46698       902  .828677362   R-squared       =    0.1840
-------------+----------------------------------   Adj R-squared   =    0.1713
       Total |  916.000001       916           1   Root MSE        =    .91032

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |   .1441845   .0446026     3.23   0.001     .0566476    .2317213
ln_min~rprop |   .8985466   .1049365     8.56   0.000     .6925985    1.104495
ln_maleenr~p |   .0097651   .4286458     0.02   0.982     -.831494    .8510243
ln_freemea~p |  -.7417067   .0794642    -9.33   0.000    -.8976629   -.5857504
   ln_elprop |   .0138582   .0190458     0.73   0.467     -.023521    .0512375
ln_maletea~p |  -.0669369   .0464565    -1.44   0.150    -.1581124    .0242386
ln_min~fprop |   .0509767   .0174151     2.93   0.004     .0167979    .0851554
ln_newteac~p |  -.0122628   .0277806    -0.44   0.659    -.0667849    .0422593
ln_fullcre~p |  -2.051976   .8369056    -2.45   0.014    -3.694485   -.4094672
ln_fteteac~t |   .8526482    .190663     4.47   0.000     .4784535    1.226843
ln_fteadmi~t |   .0346355   .0398668     0.87   0.385     -.043607    .1128779
ln_fteserv~t |   .0226232   .0188837     1.20   0.231    -.0144379    .0596844
avg_gr6mat~e |   .9626209   .2469579     3.90   0.000     .4779419      1.4473
avg_gr8ela~e |  -.8486237   .2613484    -3.25   0.001    -1.361545    -.335702
       _cons |    3.01935   .6661425     4.53   0.000      1.71198    4.326719
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_dk_enr_4year_b_sp_b_ct_qualityindex.dta saved

      Source |       SS           df       MS      Number of obs   =       917
-------------+----------------------------------   F(14, 902)      =     13.83
       Model |  161.898029        14   11.564145   Prob > F        =    0.0000
    Residual |  754.101972       902  .836033228   R-squared       =    0.1767
-------------+----------------------------------   Adj R-squared   =    0.1640
       Total |  916.000001       916           1   Root MSE        =    .91435

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |   .0715346   .0459671     1.56   0.120    -.0186802    .1617494
ln_min~rprop |   .8992699   .1054159     8.53   0.000     .6923809    1.106159
ln_maleenr~p |  -.0542764   .4302884    -0.13   0.900    -.8987594    .7902066
ln_freemea~p |  -.7582726   .0796195    -9.52   0.000    -.9145337   -.6020115
   ln_elprop |   .0088429   .0191159     0.46   0.644    -.0286738    .0463596
ln_maletea~p |  -.0811157   .0464551    -1.75   0.081    -.1722883     .010057
ln_min~fprop |   .0538675   .0174623     3.08   0.002      .019596     .088139
ln_newteac~p |  -.0218224   .0277163    -0.79   0.431    -.0762185    .0325736
ln_fullcre~p |  -2.110793   .8410329    -2.51   0.012    -3.761402   -.4601838
ln_fteteac~t |   .9243049    .190089     4.86   0.000     .5512367    1.297373
ln_fteadmi~t |   .0405787   .0400696     1.01   0.311    -.0380619    .1192192
ln_fteserv~t |   .0193927   .0189607     1.02   0.307    -.0178194    .0566049
avg_gr6mat~e |   .9161254   .2475079     3.70   0.000     .4303671    1.401884
avg_gr8ela~e |  -.7607918    .260651    -2.92   0.004    -1.272345   -.2492388
       _cons |   3.110546   .6683176     4.65   0.000     1.798908    4.422185
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_dk_enr_4year_b_sp_b_ct_supportindex.dta saved

      Source |       SS           df       MS      Number of obs   =       884
-------------+----------------------------------   F(14, 869)      =      2.31
       Model |  31.6382192        14   2.2598728   Prob > F        =    0.0041
    Residual |  851.361787       869  .979702861   R-squared       =    0.0358
-------------+----------------------------------   Adj R-squared   =    0.0203
       Total |  883.000006       883  1.00000001   Root MSE        =     .9898

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_climatei~x |   .1476316   .0496112     2.98   0.003     .0502598    .2450035
ln_min~rprop |  -.0884862   .1212836    -0.73   0.466    -.3265291    .1495568
ln_maleenr~p |   .3397169   .4795058     0.71   0.479    -.6014079    1.280842
ln_freemea~p |  -.1375754   .0884514    -1.56   0.120    -.3111787    .0360278
   ln_elprop |    .015733   .0271674     0.58   0.563    -.0375884    .0690545
ln_maletea~p |  -.0048893   .0521937    -0.09   0.925    -.1073298    .0975512
ln_min~fprop |   .0355993   .0253147     1.41   0.160    -.0140858    .0852844
ln_newteac~p |  -.0059029   .0342028    -0.17   0.863    -.0730326    .0612269
ln_fullcre~p |   .4482971   .9377292     0.48   0.633    -1.392182    2.288776
ln_fteteac~t |   .4671309   .2441475     1.91   0.056    -.0120567    .9463186
ln_fteadmi~t |   .0524757   .0595902     0.88   0.379    -.0644819    .1694333
ln_fteserv~t |   .0207558    .022911     0.91   0.365    -.0242116    .0657231
avg_gr6mat~e |   .2696346   .2829239     0.95   0.341    -.2856596    .8249287
avg_gr8ela~e |  -.4083268   .3006757    -1.36   0.175    -.9984622    .1818086
       _cons |   2.104829   .8102483     2.60   0.010     .5145568    3.695102
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_dk_enr_4year_las_sp_las_ct_p_climateindex.dta
    saved

      Source |       SS           df       MS      Number of obs   =       884
-------------+----------------------------------   F(14, 869)      =      1.90
       Model |  26.2724279        14    1.876602   Prob > F        =    0.0228
    Residual |  856.727578       869  .985877535   R-squared       =    0.0298
-------------+----------------------------------   Adj R-squared   =    0.0141
       Total |  883.000006       883  1.00000001   Root MSE        =    .99291

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_qualityi~x |   .0934325   .0509937     1.83   0.067    -.0066526    .1935177
ln_min~rprop |  -.0726258    .121477    -0.60   0.550    -.3110484    .1657968
ln_maleenr~p |   .2768709   .4806463     0.58   0.565    -.6664924    1.220234
ln_freemea~p |  -.1535675   .0884649    -1.74   0.083    -.3271973    .0200623
   ln_elprop |   .0128388   .0273185     0.47   0.638    -.0407791    .0664567
ln_maletea~p |  -.0074181   .0524102    -0.14   0.887    -.1102836    .0954473
ln_min~fprop |   .0352017   .0254353     1.38   0.167    -.0147201    .0851235
ln_newteac~p |  -.0097733   .0344427    -0.28   0.777    -.0773739    .0578274
ln_fullcre~p |   .5901518   .9397407     0.63   0.530    -1.254275    2.434579
ln_fteteac~t |   .4911003   .2455801     2.00   0.046     .0091008    .9730998
ln_fteadmi~t |   .0567516    .059945     0.95   0.344    -.0609023    .1744055
ln_fteserv~t |   .0190632    .022972     0.83   0.407     -.026024    .0641503
avg_gr6mat~e |   .2762156   .2838834     0.97   0.331    -.2809617     .833393
avg_gr8ela~e |  -.3748088   .3015442    -1.24   0.214    -.9666488    .2170311
       _cons |   2.119944   .8148549     2.60   0.009     .5206298    3.719257
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_dk_enr_4year_las_sp_las_ct_p_qualityindex.dta
    saved

      Source |       SS           df       MS      Number of obs   =       884
-------------+----------------------------------   F(14, 869)      =      1.68
       Model |  23.2960091        14  1.66400065   Prob > F        =    0.0541
    Residual |  859.703997       869  .989302643   R-squared       =    0.0264
-------------+----------------------------------   Adj R-squared   =    0.0107
       Total |  883.000006       883  1.00000001   Root MSE        =    .99464

------------------------------------------------------------------------------
va_dk_enr_.. | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
z_supporti~x |    .031384   .0540726     0.58   0.562    -.0747442    .1375121
ln_min~rprop |  -.0668529   .1216768    -0.55   0.583    -.3056677    .1719618
ln_maleenr~p |   .2189786   .4813564     0.45   0.649    -.7257785    1.163736
ln_freemea~p |  -.1635169   .0884374    -1.85   0.065    -.3370929    .0100591
   ln_elprop |   .0068873   .0271594     0.25   0.800    -.0464183     .060193
ln_maletea~p |  -.0156304   .0523496    -0.30   0.765    -.1183768    .0871159
ln_min~fprop |    .037671   .0254478     1.48   0.139    -.0122753    .0876173
ln_newteac~p |  -.0175063   .0343405    -0.51   0.610    -.0849063    .0498937
ln_fullcre~p |    .557211   .9418498     0.59   0.554    -1.291355    2.405777
ln_fteteac~t |   .5478912   .2438178     2.25   0.025     .0693506    1.026432
ln_fteadmi~t |   .0652219   .0602971     1.08   0.280    -.0531231     .183567
ln_fteserv~t |   .0176825    .023037     0.77   0.443    -.0275321    .0628971
avg_gr6mat~e |   .2597277   .2844076     0.91   0.361    -.2984785    .8179338
avg_gr8ela~e |  -.3251177   .3008234    -1.08   0.280     -.915543    .2653076
       _cons |    2.22884   .8147866     2.74   0.006     .6296602     3.82802
------------------------------------------------------------------------------
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/va_dk_enr_4year_las_sp_las_ct_p_supportindex.dta
    saved
  variable imputedparentqoi9mean_pooled was float now byte
  variable imputedparentqoi16mean_pooled was float now byte
  variable imputedparentqoi17mean_pooled was float now byte
  variable imputedparentqoi27mean_pooled was float now byte
  variable imputedsecqoi22mean_pooled was float now byte
  variable imputedsecqoi23mean_pooled was float now byte
  variable imputedsecqoi24mean_pooled was float now byte
  variable imputedsecqoi25mean_pooled was float now byte
  variable imputedsecqoi26mean_pooled was float now byte
  variable imputedsecqoi27mean_pooled was float now byte
  variable imputedsecqoi28mean_pooled was float now byte
  variable imputedsecqoi29mean_pooled was float now byte
  variable imputedsecqoi30mean_pooled was float now byte
  variable imputedstaffqoi20mean_pooled was float now byte
  variable imputedstaffqoi24mean_pooled was float now byte
  variable imputedstaffqoi41mean_pooled was float now byte
  variable imputedstaffqoi44mean_pooled was float now byte
  variable imputedstaffqoi64mean_pooled was float now byte
  variable imputedstaffqoi87mean_pooled was float now byte
  variable imputedstaffqoi98mean_pooled was float now byte
  variable imputedparentqoi30mean_pooled was float now byte
  variable imputedparentqoi31mean_pooled was float now byte
  variable imputedparentqoi32mean_pooled was float now byte
  variable imputedparentqoi33mean_pooled was float now byte
  variable imputedparentqoi34mean_pooled was float now byte
  variable imputedsecqoi35mean_pooled was float now byte
  variable imputedsecqoi36mean_pooled was float now byte
  variable imputedsecqoi37mean_pooled was float now byte
  variable imputedsecqoi38mean_pooled was float now byte
  variable imputedsecqoi39mean_pooled was float now byte
  variable imputedsecqoi40mean_pooled was float now byte
  variable imputedstaffqoi103mean_pooled was float now byte
  variable imputedstaffqoi104mean_pooled was float now byte
  variable imputedstaffqoi105mean_pooled was float now byte
  variable imputedstaffqoi109mean_pooled was float now byte
  variable imputedstaffqoi111mean_pooled was float now byte
  variable imputedstaffqoi112mean_pooled was float now byte
  variable imputedparentqoi15mean_pooled was float now byte
  variable imputedparentqoi64mean_pooled was float now byte
  variable imputedstaffqoi10mean_pooled was float now byte
  variable imputedstaffqoi128mean_pooled was float now byte
  variable imputedsecqoi31mean_pooled was float now byte
  variable imputedsecqoi32mean_pooled was float now byte
  variable imputedsecqoi33mean_pooled was float now byte
  variable imputedsecqoi34mean_pooled was float now byte
  (252,990 bytes saved)
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/dta/allsvyfactor/catego
    > ryindex/imputedindexwithdemo.dta saved
- local merge_command use
- local merge_options clear
- foreach index of local indexvars {
- foreach va_outcome in ela math enr enr_2year enr_4year dk_enr dk_enr_2year dk
> _enr_4year {
- di "va: `va_outcome'"
= di "va: ela"
va: ela
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= use /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
> wcontrols/imputed/va_ela_b_sp_b_ct_climateindex, clear
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_ela_las_sp_las_ct_p_climateindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - sort `varlist'
  = sort var
  - }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_ela_las_sp_las_ct_p_climateindex.d
> ta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_ela_las_sp_las_ct_p_climate
> index.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_ela_las_sp_las_ct_p_climateindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: math"
va: math
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_math_b_sp_b_ct_climateindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_math_b_sp_b_ct_climateindex.dta", 
> varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_math_b_sp_b_ct_climateindex
> .dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_math_b_sp_b_ct_climateindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_math_las_sp_las_ct_p_climateindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_math_las_sp_las_ct_p_climateindex.
> dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_math_las_sp_las_ct_p_climat
> eindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_math_las_sp_las_ct_p_climateindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: enr"
va: enr
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_enr_b_sp_b_ct_climateindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_enr_b_sp_b_ct_climateindex.dta", v
> arlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_enr_b_sp_b_ct_climateindex.
> dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_enr_b_sp_b_ct_climateindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_enr_las_sp_las_ct_p_climateindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_enr_las_sp_las_ct_p_climateindex.d
> ta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_enr_las_sp_las_ct_p_climate
> index.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_enr_las_sp_las_ct_p_climateindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: enr_2year"
va: enr_2year
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_enr_2year_b_sp_b_ct_climateindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_enr_2year_b_sp_b_ct_climateindex.d
> ta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_enr_2year_b_sp_b_ct_climate
> index.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_enr_2year_b_sp_b_ct_climateindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_enr_2year_las_sp_las_ct_p_climateindex, 
> nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_enr_2year_las_sp_las_ct_p_climatei
> ndex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_enr_2year_las_sp_las_ct_p_c
> limateindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_enr_2year_las_sp_las_ct_p_climateindex.dta", clea
> r
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: enr_4year"
va: enr_4year
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_enr_4year_b_sp_b_ct_climateindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_enr_4year_b_sp_b_ct_climateindex.d
> ta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_enr_4year_b_sp_b_ct_climate
> index.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_enr_4year_b_sp_b_ct_climateindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_enr_4year_las_sp_las_ct_p_climateindex, 
> nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_enr_4year_las_sp_las_ct_p_climatei
> ndex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_enr_4year_las_sp_las_ct_p_c
> limateindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_enr_4year_las_sp_las_ct_p_climateindex.dta", clea
> r
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: dk_enr"
va: dk_enr
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_dk_enr_b_sp_b_ct_climateindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_dk_enr_b_sp_b_ct_climateindex.dta"
> , varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_dk_enr_b_sp_b_ct_climateind
> ex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_dk_enr_b_sp_b_ct_climateindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_dk_enr_las_sp_las_ct_p_climateindex, nog
> en
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_dk_enr_las_sp_las_ct_p_climateinde
> x.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_dk_enr_las_sp_las_ct_p_clim
> ateindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_dk_enr_las_sp_las_ct_p_climateindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: dk_enr_2year"
va: dk_enr_2year
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_dk_enr_2year_b_sp_b_ct_climateindex, nog
> en
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_dk_enr_2year_b_sp_b_ct_climateinde
> x.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_dk_enr_2year_b_sp_b_ct_clim
> ateindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_dk_enr_2year_b_sp_b_ct_climateindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_dk_enr_2year_las_sp_las_ct_p_climateinde
> x, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_dk_enr_2year_las_sp_las_ct_p_clima
> teindex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_dk_enr_2year_las_sp_las_ct_
> p_climateindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_dk_enr_2year_las_sp_las_ct_p_climateindex.dta", c
> lear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: dk_enr_4year"
va: dk_enr_4year
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_dk_enr_4year_b_sp_b_ct_climateindex, nog
> en
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_dk_enr_4year_b_sp_b_ct_climateinde
> x.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_dk_enr_4year_b_sp_b_ct_clim
> ateindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_dk_enr_4year_b_sp_b_ct_climateindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_dk_enr_4year_las_sp_las_ct_p_climateinde
> x, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_dk_enr_4year_las_sp_las_ct_p_clima
> teindex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_dk_enr_4year_las_sp_las_ct_
> p_climateindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_dk_enr_4year_las_sp_las_ct_p_climateindex.dta", c
> lear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 0 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (0+0)
    Not matched                             0
    - if (`m1'|`m2') {
    = if (0|0) {
      di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
      di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
      di
      }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- save $projdir/out/dta/factor/indexregwcontrols/`type'/`index'_va_`type'regs_w
> controls, replace
= save /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexre
> gwcontrols/imputed/climateindex_va_imputedregs_wcontrols, replace
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/climateindex_va_imputedregs_wcontrols.dta saved
- export excel using $projdir/out/xls/factor/indexregwcontrols/`type'/`index'_v
> a_`type'regs_wcontrols, replace firstrow(variables)
= export excel using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/xls/
> factor/indexregwcontrols/imputed/climateindex_va_imputedregs_wcontrols, repla
> ce firstrow(variables)
  ------------------------------------------------------------ begin export ---
  - version 12
  - gettoken subcmd 0 : 0
  - if `"`subcmd'"' == "dbas" {
  = if `"excel"' == "dbas" {
    ExpDbase `macval(0)'
    }
  - else if `"`subcmd'"' == "dbase" {
  = else if `"excel"' == "dbase" {
    ExpDbase `macval(0)'
    }
  - else if `"`subcmd'"' == "delim" {
  = else if `"excel"' == "delim" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "delimi" {
  = else if `"excel"' == "delimi" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "delimit" {
  = else if `"excel"' == "delimit" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "delimite" {
  = else if `"excel"' == "delimite" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "delimited" {
  = else if `"excel"' == "delimited" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "exc" {
  = else if `"excel"' == "exc" {
    ExpExcel `macval(0)'
    }
  - else if `"`subcmd'"' == "exce" {
  = else if `"excel"' == "exce" {
    ExpExcel `macval(0)'
    }
  - else if `"`subcmd'"' == "excel" {
  = else if `"excel"' == "excel" {
  - ExpExcel `macval(0)'
  = ExpExcel  using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/xls/f
> actor/indexregwcontrols/imputed/climateindex_va_imputedregs_wcontrols, replac
> e firstrow(variables)
    ------------------------------------------------- begin export.ExpExcel ---
    - version 12
    - scalar ExpExcelCleanUp = -1
    - capture noi export_excel `macval(0)'
    = capture noi export_excel using /home/research/ca_ed_lab/users/chesun/gsr/
> caschls/out/xls/factor/indexregwcontrols/imputed/climateindex_va_imputedregs_
> wcontrols, replace firstrow(variables)
      -------------------------------------------------- begin export_excel ---
      - version 12
      - if ("`c(excelsupport)'" != "1") {
      = if ("1" != "1") {
        dis as err `"export excel is not supported on this platform."'
        exit 198
        }
      - capture syntax [varlist] using/ [if] [in] [, *]
      - if _rc {
        local orig0 `"`macval(0)'"'
        local 0 `"using `macval(0)'"'
        cap syntax using/ [if] [in] [, *]
        if _rc {
        if _rc == 111 {
        dis as err `"variable(s) not defined."'
        exit 111
        }
        local 0 `"`macval(orig0)'"'
        syntax [varlist] using/ [if] [in] [, SHeet(string asis) SHEETMODify SHE
> ETREPlace cell(string) FIRSTrow(string) DATEstring(string) MISSing(string) lo
> cale(string) NOLabel KEEPCELLFmt REPLACE]
        }
        else {
        syntax using/ [if] [in] [, SHeet(string asis) SHEETMODify SHEETREPlace 
> cell(string) FIRSTrow(string) DATEstring(string) MISSing(string) locale(strin
> g) NOLabel KEEPCELLFmt REPLACE]
        }
        }
      - else {
      - syntax [varlist] using/ [if] [in] [, SHeet(string asis) SHEETMODify SHE
> ETREPlace cell(string) FIRSTrow(string) DATEstring(string) MISSing(string) lo
> cale(string) NOLabel KEEPCELLFmt REPLACE]
      - }
      - if (`"`varlist'"'=="") {
      = if (`"var va_ela_b_sp_b_ct va_ela_las_sp_las_ct_p va_math_b_sp_b_ct va_
> math_las_sp_las_ct_p va_enr_b_sp_b_ct va_enr_las_sp_las_ct_p va_enr_2year_b_s
> p_b_ct va_enr_2year_las_sp_las_ct_p va_enr_4year_b_sp_b_ct va_enr_4year_las_s
> p_las_ct_p va_dk_enr_b_sp_b_ct va_dk_enr_las_sp_las_ct_p va_dk_enr_2year_b_sp
> _b_ct va_dk_enr_2year_las_sp_las_ct_p va_dk_enr_4year_b_sp_b_ct va_dk_enr_4ye
> ar_las_sp_las_ct_p"'=="") {
        unab varlist : _all
        }
      - marksample touse, novarlist
      - mata : export_excel_export_file("`touse'")
      = mata : export_excel_export_file("__000000")
        -------------------------------------------------------- begin unab ---
        - version 6
        - gettoken user 0: 0, parse(" :")
        - gettoken colon 0: 0, parse(" :")
        - if `"`colon'"' != ":" { error 198 }
        = if `":"' != ":" { error 198 }
        - syntax [varlist(default=empty)] [, MIN(integer 1) MAX(integer 120000)
>  NAME(string)]
        - c_local `user' `varlist'
        = c_local _parse_varlist var va_ela_b_sp_b_ct va_ela_las_sp_las_ct_p va
> _math_b_sp_b_ct va_math_las_sp_las_ct_p va_enr_b_sp_b_ct va_enr_las_sp_las_ct
> _p va_enr_2year_b_sp_b_ct va_enr_2year_las_sp_las_ct_p va_enr_4year_b_sp_b_ct
>  va_enr_4year_las_sp_las_ct_p va_dk_enr_b_sp_b_ct va_dk_enr_las_sp_las_ct_p v
> a_dk_enr_2year_b_sp_b_ct va_dk_enr_2year_las_sp_las_ct_p va_dk_enr_4year_b_sp
> _b_ct va_dk_enr_4year_las_sp_las_ct_p
        - local n : word count `varlist'
        = local n : word count var va_ela_b_sp_b_ct va_ela_las_sp_las_ct_p va_m
> ath_b_sp_b_ct va_math_las_sp_las_ct_p va_enr_b_sp_b_ct va_enr_las_sp_las_ct_p
>  va_enr_2year_b_sp_b_ct va_enr_2year_las_sp_las_ct_p va_enr_4year_b_sp_b_ct v
> a_enr_4year_las_sp_las_ct_p va_dk_enr_b_sp_b_ct va_dk_enr_las_sp_las_ct_p va_
> dk_enr_2year_b_sp_b_ct va_dk_enr_2year_las_sp_las_ct_p va_dk_enr_4year_b_sp_b
> _ct va_dk_enr_4year_las_sp_las_ct_p
        - if `n'>=`min' & `n'<=`max' { exit }
        = if 17>=1 & 17<=120000 { exit }
        ---------------------------------------------------------- end unab ---
file /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/xls/factor/indexregw
> controls/imputed/climateindex_va_imputedregs_wcontrols.xls saved
      ---------------------------------------------------- end export_excel ---
    - nobreak {
    - local rc = _rc
    - if `rc' {
    = if 0 {
      if scalar(ExpExcelCleanUp) >= 0 {
      mata : export_excel_cleanup()
      }
      }
    - }
    - scalar drop ExpExcelCleanUp
    - exit `rc'
    = exit 0
    --------------------------------------------------- end export.ExpExcel ---
  - }
  - else if `"`subcmd'"' == "sasxport5" {
  = else if `"excel"' == "sasxport5" {
    ExpSasxport5 `0'
    }
  - else if `"`subcmd'"' == "sasxport8" {
  = else if `"excel"' == "sasxport8" {
    ExpSasxport8 `0'
    }
  - else if `"`subcmd'"' == "sasxport" {
  = else if `"excel"' == "sasxport" {
    if (_caller() < 16) {
    ExpSasxport5 `macval(0)'
    }
    else {
    di as error "invalid syntax"
    di as error "   specify either {cmd:export sasxport5} or {cmd:export sasxpo
> rt8}"
    exit 198
    }
    }
  - else if `"`subcmd'"' == "shp" {
  = else if `"excel"' == "shp" {
    ExpShape `macval(0)'
    }
  - else {
    display as error `"export: unknown subcommand "`subcmd'""'
    exit 198
    }
  -------------------------------------------------------------- end export ---
- }
- foreach va_outcome in ela math enr enr_2year enr_4year dk_enr dk_enr_2year dk
> _enr_4year {
- di "va: `va_outcome'"
= di "va: ela"
va: ela
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_ela_b_sp_b_ct_qualityindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_ela_b_sp_b_ct_qualityindex.dta", v
> arlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_ela_b_sp_b_ct_qualityindex.
> dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_ela_b_sp_b_ct_qualityindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
    sort `varlist'
    }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 2
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+2)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (2|2) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 2 as txt "
>   "
        from using                          2  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 34 as txt "  
> "
    Matched                                34  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_ela_las_sp_las_ct_p_qualityindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - sort `varlist'
  = sort var
  - }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_ela_las_sp_las_ct_p_qualityindex.d
> ta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_ela_las_sp_las_ct_p_quality
> index.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_ela_las_sp_las_ct_p_qualityindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: math"
va: math
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_math_b_sp_b_ct_qualityindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_math_b_sp_b_ct_qualityindex.dta", 
> varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_math_b_sp_b_ct_qualityindex
> .dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_math_b_sp_b_ct_qualityindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_math_las_sp_las_ct_p_qualityindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_math_las_sp_las_ct_p_qualityindex.
> dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_math_las_sp_las_ct_p_qualit
> yindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_math_las_sp_las_ct_p_qualityindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: enr"
va: enr
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_enr_b_sp_b_ct_qualityindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_enr_b_sp_b_ct_qualityindex.dta", v
> arlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_enr_b_sp_b_ct_qualityindex.
> dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_enr_b_sp_b_ct_qualityindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_enr_las_sp_las_ct_p_qualityindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_enr_las_sp_las_ct_p_qualityindex.d
> ta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_enr_las_sp_las_ct_p_quality
> index.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_enr_las_sp_las_ct_p_qualityindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: enr_2year"
va: enr_2year
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_enr_2year_b_sp_b_ct_qualityindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_enr_2year_b_sp_b_ct_qualityindex.d
> ta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_enr_2year_b_sp_b_ct_quality
> index.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_enr_2year_b_sp_b_ct_qualityindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_enr_2year_las_sp_las_ct_p_qualityindex, 
> nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_enr_2year_las_sp_las_ct_p_qualityi
> ndex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_enr_2year_las_sp_las_ct_p_q
> ualityindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_enr_2year_las_sp_las_ct_p_qualityindex.dta", clea
> r
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: enr_4year"
va: enr_4year
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_enr_4year_b_sp_b_ct_qualityindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_enr_4year_b_sp_b_ct_qualityindex.d
> ta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_enr_4year_b_sp_b_ct_quality
> index.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_enr_4year_b_sp_b_ct_qualityindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_enr_4year_las_sp_las_ct_p_qualityindex, 
> nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_enr_4year_las_sp_las_ct_p_qualityi
> ndex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_enr_4year_las_sp_las_ct_p_q
> ualityindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_enr_4year_las_sp_las_ct_p_qualityindex.dta", clea
> r
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: dk_enr"
va: dk_enr
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_dk_enr_b_sp_b_ct_qualityindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_dk_enr_b_sp_b_ct_qualityindex.dta"
> , varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_dk_enr_b_sp_b_ct_qualityind
> ex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_dk_enr_b_sp_b_ct_qualityindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_dk_enr_las_sp_las_ct_p_qualityindex, nog
> en
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_dk_enr_las_sp_las_ct_p_qualityinde
> x.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_dk_enr_las_sp_las_ct_p_qual
> ityindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_dk_enr_las_sp_las_ct_p_qualityindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: dk_enr_2year"
va: dk_enr_2year
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_dk_enr_2year_b_sp_b_ct_qualityindex, nog
> en
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_dk_enr_2year_b_sp_b_ct_qualityinde
> x.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_dk_enr_2year_b_sp_b_ct_qual
> ityindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_dk_enr_2year_b_sp_b_ct_qualityindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_dk_enr_2year_las_sp_las_ct_p_qualityinde
> x, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_dk_enr_2year_las_sp_las_ct_p_quali
> tyindex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_dk_enr_2year_las_sp_las_ct_
> p_qualityindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_dk_enr_2year_las_sp_las_ct_p_qualityindex.dta", c
> lear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: dk_enr_4year"
va: dk_enr_4year
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_dk_enr_4year_b_sp_b_ct_qualityindex, nog
> en
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_dk_enr_4year_b_sp_b_ct_qualityinde
> x.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_dk_enr_4year_b_sp_b_ct_qual
> ityindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_dk_enr_4year_b_sp_b_ct_qualityindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_dk_enr_4year_las_sp_las_ct_p_qualityinde
> x, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_dk_enr_4year_las_sp_las_ct_p_quali
> tyindex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_dk_enr_4year_las_sp_las_ct_
> p_qualityindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_dk_enr_4year_las_sp_las_ct_p_qualityindex.dta", c
> lear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 2 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (2+0)
    Not matched                             2
    - if (`m1'|`m2') {
    = if (2|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 2 as txt 
> "  "
        from master                         2  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- save $projdir/out/dta/factor/indexregwcontrols/`type'/`index'_va_`type'regs_w
> controls, replace
= save /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexre
> gwcontrols/imputed/qualityindex_va_imputedregs_wcontrols, replace
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/qualityindex_va_imputedregs_wcontrols.dta saved
- export excel using $projdir/out/xls/factor/indexregwcontrols/`type'/`index'_v
> a_`type'regs_wcontrols, replace firstrow(variables)
= export excel using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/xls/
> factor/indexregwcontrols/imputed/qualityindex_va_imputedregs_wcontrols, repla
> ce firstrow(variables)
  ------------------------------------------------------------ begin export ---
  - version 12
  - gettoken subcmd 0 : 0
  - if `"`subcmd'"' == "dbas" {
  = if `"excel"' == "dbas" {
    ExpDbase `macval(0)'
    }
  - else if `"`subcmd'"' == "dbase" {
  = else if `"excel"' == "dbase" {
    ExpDbase `macval(0)'
    }
  - else if `"`subcmd'"' == "delim" {
  = else if `"excel"' == "delim" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "delimi" {
  = else if `"excel"' == "delimi" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "delimit" {
  = else if `"excel"' == "delimit" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "delimite" {
  = else if `"excel"' == "delimite" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "delimited" {
  = else if `"excel"' == "delimited" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "exc" {
  = else if `"excel"' == "exc" {
    ExpExcel `macval(0)'
    }
  - else if `"`subcmd'"' == "exce" {
  = else if `"excel"' == "exce" {
    ExpExcel `macval(0)'
    }
  - else if `"`subcmd'"' == "excel" {
  = else if `"excel"' == "excel" {
  - ExpExcel `macval(0)'
  = ExpExcel  using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/xls/f
> actor/indexregwcontrols/imputed/qualityindex_va_imputedregs_wcontrols, replac
> e firstrow(variables)
    ------------------------------------------------- begin export.ExpExcel ---
    - version 12
    - scalar ExpExcelCleanUp = -1
    - capture noi export_excel `macval(0)'
    = capture noi export_excel using /home/research/ca_ed_lab/users/chesun/gsr/
> caschls/out/xls/factor/indexregwcontrols/imputed/qualityindex_va_imputedregs_
> wcontrols, replace firstrow(variables)
      -------------------------------------------------- begin export_excel ---
      - version 12
      - if ("`c(excelsupport)'" != "1") {
      = if ("1" != "1") {
        dis as err `"export excel is not supported on this platform."'
        exit 198
        }
      - capture syntax [varlist] using/ [if] [in] [, *]
      - if _rc {
        local orig0 `"`macval(0)'"'
        local 0 `"using `macval(0)'"'
        cap syntax using/ [if] [in] [, *]
        if _rc {
        if _rc == 111 {
        dis as err `"variable(s) not defined."'
        exit 111
        }
        local 0 `"`macval(orig0)'"'
        syntax [varlist] using/ [if] [in] [, SHeet(string asis) SHEETMODify SHE
> ETREPlace cell(string) FIRSTrow(string) DATEstring(string) MISSing(string) lo
> cale(string) NOLabel KEEPCELLFmt REPLACE]
        }
        else {
        syntax using/ [if] [in] [, SHeet(string asis) SHEETMODify SHEETREPlace 
> cell(string) FIRSTrow(string) DATEstring(string) MISSing(string) locale(strin
> g) NOLabel KEEPCELLFmt REPLACE]
        }
        }
      - else {
      - syntax [varlist] using/ [if] [in] [, SHeet(string asis) SHEETMODify SHE
> ETREPlace cell(string) FIRSTrow(string) DATEstring(string) MISSing(string) lo
> cale(string) NOLabel KEEPCELLFmt REPLACE]
      - }
      - if (`"`varlist'"'=="") {
      = if (`"var va_ela_b_sp_b_ct va_ela_las_sp_las_ct_p va_math_b_sp_b_ct va_
> math_las_sp_las_ct_p va_enr_b_sp_b_ct va_enr_las_sp_las_ct_p va_enr_2year_b_s
> p_b_ct va_enr_2year_las_sp_las_ct_p va_enr_4year_b_sp_b_ct va_enr_4year_las_s
> p_las_ct_p va_dk_enr_b_sp_b_ct va_dk_enr_las_sp_las_ct_p va_dk_enr_2year_b_sp
> _b_ct va_dk_enr_2year_las_sp_las_ct_p va_dk_enr_4year_b_sp_b_ct va_dk_enr_4ye
> ar_las_sp_las_ct_p"'=="") {
        unab varlist : _all
        }
      - marksample touse, novarlist
      - mata : export_excel_export_file("`touse'")
      = mata : export_excel_export_file("__000000")
        -------------------------------------------------------- begin unab ---
        - version 6
        - gettoken user 0: 0, parse(" :")
        - gettoken colon 0: 0, parse(" :")
        - if `"`colon'"' != ":" { error 198 }
        = if `":"' != ":" { error 198 }
        - syntax [varlist(default=empty)] [, MIN(integer 1) MAX(integer 120000)
>  NAME(string)]
        - c_local `user' `varlist'
        = c_local _parse_varlist var va_ela_b_sp_b_ct va_ela_las_sp_las_ct_p va
> _math_b_sp_b_ct va_math_las_sp_las_ct_p va_enr_b_sp_b_ct va_enr_las_sp_las_ct
> _p va_enr_2year_b_sp_b_ct va_enr_2year_las_sp_las_ct_p va_enr_4year_b_sp_b_ct
>  va_enr_4year_las_sp_las_ct_p va_dk_enr_b_sp_b_ct va_dk_enr_las_sp_las_ct_p v
> a_dk_enr_2year_b_sp_b_ct va_dk_enr_2year_las_sp_las_ct_p va_dk_enr_4year_b_sp
> _b_ct va_dk_enr_4year_las_sp_las_ct_p
        - local n : word count `varlist'
        = local n : word count var va_ela_b_sp_b_ct va_ela_las_sp_las_ct_p va_m
> ath_b_sp_b_ct va_math_las_sp_las_ct_p va_enr_b_sp_b_ct va_enr_las_sp_las_ct_p
>  va_enr_2year_b_sp_b_ct va_enr_2year_las_sp_las_ct_p va_enr_4year_b_sp_b_ct v
> a_enr_4year_las_sp_las_ct_p va_dk_enr_b_sp_b_ct va_dk_enr_las_sp_las_ct_p va_
> dk_enr_2year_b_sp_b_ct va_dk_enr_2year_las_sp_las_ct_p va_dk_enr_4year_b_sp_b
> _ct va_dk_enr_4year_las_sp_las_ct_p
        - if `n'>=`min' & `n'<=`max' { exit }
        = if 17>=1 & 17<=120000 { exit }
        ---------------------------------------------------------- end unab ---
file /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/xls/factor/indexregw
> controls/imputed/qualityindex_va_imputedregs_wcontrols.xls saved
      ---------------------------------------------------- end export_excel ---
    - nobreak {
    - local rc = _rc
    - if `rc' {
    = if 0 {
      if scalar(ExpExcelCleanUp) >= 0 {
      mata : export_excel_cleanup()
      }
      }
    - }
    - scalar drop ExpExcelCleanUp
    - exit `rc'
    = exit 0
    --------------------------------------------------- end export.ExpExcel ---
  - }
  - else if `"`subcmd'"' == "sasxport5" {
  = else if `"excel"' == "sasxport5" {
    ExpSasxport5 `0'
    }
  - else if `"`subcmd'"' == "sasxport8" {
  = else if `"excel"' == "sasxport8" {
    ExpSasxport8 `0'
    }
  - else if `"`subcmd'"' == "sasxport" {
  = else if `"excel"' == "sasxport" {
    if (_caller() < 16) {
    ExpSasxport5 `macval(0)'
    }
    else {
    di as error "invalid syntax"
    di as error "   specify either {cmd:export sasxport5} or {cmd:export sasxpo
> rt8}"
    exit 198
    }
    }
  - else if `"`subcmd'"' == "shp" {
  = else if `"excel"' == "shp" {
    ExpShape `macval(0)'
    }
  - else {
    display as error `"export: unknown subcommand "`subcmd'""'
    exit 198
    }
  -------------------------------------------------------------- end export ---
- }
- foreach va_outcome in ela math enr enr_2year enr_4year dk_enr dk_enr_2year dk
> _enr_4year {
- di "va: `va_outcome'"
= di "va: ela"
va: ela
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_ela_b_sp_b_ct_supportindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_ela_b_sp_b_ct_supportindex.dta", v
> arlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_ela_b_sp_b_ct_supportindex.
> dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_ela_b_sp_b_ct_supportindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
    sort `varlist'
    }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 2
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+2)
    Not matched                             6
    - if (`m1'|`m2') {
    = if (4|2) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 2 as txt "
>   "
        from using                          2  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 34 as txt "  
> "
    Matched                                34  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_ela_las_sp_las_ct_p_supportindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - sort `varlist'
  = sort var
  - }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_ela_las_sp_las_ct_p_supportindex.d
> ta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_ela_las_sp_las_ct_p_support
> index.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_ela_las_sp_las_ct_p_supportindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: math"
va: math
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_math_b_sp_b_ct_supportindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_math_b_sp_b_ct_supportindex.dta", 
> varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_math_b_sp_b_ct_supportindex
> .dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_math_b_sp_b_ct_supportindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_math_las_sp_las_ct_p_supportindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_math_las_sp_las_ct_p_supportindex.
> dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_math_las_sp_las_ct_p_suppor
> tindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_math_las_sp_las_ct_p_supportindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: enr"
va: enr
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_enr_b_sp_b_ct_supportindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_enr_b_sp_b_ct_supportindex.dta", v
> arlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_enr_b_sp_b_ct_supportindex.
> dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_enr_b_sp_b_ct_supportindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_enr_las_sp_las_ct_p_supportindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_enr_las_sp_las_ct_p_supportindex.d
> ta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_enr_las_sp_las_ct_p_support
> index.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_enr_las_sp_las_ct_p_supportindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: enr_2year"
va: enr_2year
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_enr_2year_b_sp_b_ct_supportindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_enr_2year_b_sp_b_ct_supportindex.d
> ta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_enr_2year_b_sp_b_ct_support
> index.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_enr_2year_b_sp_b_ct_supportindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_enr_2year_las_sp_las_ct_p_supportindex, 
> nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_enr_2year_las_sp_las_ct_p_supporti
> ndex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_enr_2year_las_sp_las_ct_p_s
> upportindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_enr_2year_las_sp_las_ct_p_supportindex.dta", clea
> r
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: enr_4year"
va: enr_4year
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_enr_4year_b_sp_b_ct_supportindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_enr_4year_b_sp_b_ct_supportindex.d
> ta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_enr_4year_b_sp_b_ct_support
> index.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_enr_4year_b_sp_b_ct_supportindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_enr_4year_las_sp_las_ct_p_supportindex, 
> nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_enr_4year_las_sp_las_ct_p_supporti
> ndex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_enr_4year_las_sp_las_ct_p_s
> upportindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_enr_4year_las_sp_las_ct_p_supportindex.dta", clea
> r
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: dk_enr"
va: dk_enr
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_dk_enr_b_sp_b_ct_supportindex, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_dk_enr_b_sp_b_ct_supportindex.dta"
> , varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_dk_enr_b_sp_b_ct_supportind
> ex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_dk_enr_b_sp_b_ct_supportindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_dk_enr_las_sp_las_ct_p_supportindex, nog
> en
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_dk_enr_las_sp_las_ct_p_supportinde
> x.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_dk_enr_las_sp_las_ct_p_supp
> ortindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_dk_enr_las_sp_las_ct_p_supportindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: dk_enr_2year"
va: dk_enr_2year
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_dk_enr_2year_b_sp_b_ct_supportindex, nog
> en
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_dk_enr_2year_b_sp_b_ct_supportinde
> x.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_dk_enr_2year_b_sp_b_ct_supp
> ortindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_dk_enr_2year_b_sp_b_ct_supportindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_dk_enr_2year_las_sp_las_ct_p_supportinde
> x, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_dk_enr_2year_las_sp_las_ct_p_suppo
> rtindex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_dk_enr_2year_las_sp_las_ct_
> p_supportindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_dk_enr_2year_las_sp_las_ct_p_supportindex.dta", c
> lear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- di "va: `va_outcome'"
= di "va: dk_enr_4year"
va: dk_enr_4year
- foreach sample in b las {
- di "sample: `sample'"
= di "sample: b"
sample: b
- foreach control of local `sample'_sample_controls {
= foreach control of local b_sample_controls {
- if "`sample'" == "b" {
= if "b" == "b" {
- local peer
- local peer_yn "N"
- }
- if "`sample'" == "las" {
= if "b" == "las" {
  local peer "_p"
  local peer_yn "Y"
  }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): "
peer controls in VA estimates (empty if no peer, _p if peer): 
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_dk_enr_4year_b_sp_b_ct_supportindex, nog
> en
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_dk_enr_4year_b_sp_b_ct_supportinde
> x.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_dk_enr_4year_b_sp_b_ct_supp
> ortindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_dk_enr_4year_b_sp_b_ct_supportindex.dta", clear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- di "sample: `sample'"
= di "sample: las"
sample: las
- foreach control of local `sample'_sample_controls {
= foreach control of local las_sample_controls {
- if "`sample'" == "b" {
= if "las" == "b" {
  local peer
  local peer_yn "N"
  }
- if "`sample'" == "las" {
= if "las" == "las" {
- local peer "_p"
- local peer_yn "Y"
- }
- di "peer controls in VA estimates (empty if no peer, _p if peer): `peer'"
= di "peer controls in VA estimates (empty if no peer, _p if peer): _p"
peer controls in VA estimates (empty if no peer, _p if peer): _p
- `merge_command' $projdir/out/dta/factor/indexregwcontrols/`type'/va_`va_outco
> me'_`sample'_sp_`control'_ct`peer'_`index', `merge_options'
= merge 1:1 var using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta
> /factor/indexregwcontrols/imputed/va_dk_enr_4year_las_sp_las_ct_p_supportinde
> x, nogen
  ------------------------------------------------------------- begin merge ---
  - version 11
  - gettoken mtype 0 : 0, parse(" ,")
  - if (!strpos("`mtype'", ":") & "`mtype'"!="") {
  = if (!strpos("1:1", ":") & "1:1"!="") {
    if (_caller()>=11) {
    di as smcl as txt "{p}"
    di as smcl "(you are using old"
    di as smcl "{bf:merge} syntax; see"
    di as smcl "{bf:{help merge:[D] merge}} for new syntax)"
    di as smcl "{p_end}"
    }
    merge_10 `mtype' `0'
    exit
    }
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - gettoken token : 0, parse(" ,")
  - if ("`token'"=="_n") {
  = if ("var"=="_n") {
    if ("`mtype'"!="1:1") {
    error_seq_not11 "`mtype'" "`origmtype'"
    }
    gettoken token 0 : 0, parse(" ,")
    local mtype "_n"
    }
  - syntax [varlist(default=none)] using/ [, ASSERT(string) DEBUG GENerate(name
> ) FORCE KEEP(string) KEEPUSing(string) noLabels NOGENerate noNOTEs REPLACE no
> REPort SORTED UPDATE ]
  - if ("`mtype'"!="_n") {
  = if ("1:1"!="_n") {
  - local origmtype `"`mtype'"'
  = local origmtype `"1:1"'
  - mata: map_mtype(`"mtype"')
  - if ("`varlist'"=="") {
  = if ("var"=="") {
    error_mat_varlist "`mtype'" "`origmtype'"
    }
  - }
  - else {
    if ("`mtype'"=="_n") {
    if ("`varlist'"!="") {
    error_seq_varlist
    }
    }
    }
  - mata: fullfilename("using", "usingfull", "using")
  - mata: resultlist("assert")
  - mata: resultlist("keep")
  - if ("`generate'"!="") {
  = if (""!="") {
    if ("`nogenerate'"!="") {
    di as smcl err "{p}"
    di as smcl "options -generate()- and -nogenerate-"
    di as smcl "may not be specified together."
    di as smcl err "{p_end}"
    }
    confirm new var `generate'
    }
  - if ("`replace'"!="") {
  = if (""!="") {
    if ("`update'"=="") {
    error_replace
    }
    }
  - if ("`sorted'"=="" & "`mtype'"!="_n") {
  = if (""=="" & "1:1"!="_n") {
  - local sortedby : sortedby
  - checksort "`sortedby'" "`varlist'"
  = checksort "var" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of var
    - if ("`v1'"!="`v2'") {
    = if ("var"!="var") {
      return scalar sorted = 0
      continue, break
      }
    - }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
    sort `varlist'
    }
  - quietly describe using "`using'", varlist short
  = quietly describe using "/home/research/ca_ed_lab/users/chesun/gsr/caschls/o
> ut/dta/factor/indexregwcontrols/imputed/va_dk_enr_4year_las_sp_las_ct_p_suppo
> rtindex.dta", varlist short
    -------------------------------------------------------- begin describe ---
    - version 9
    - local version : di "version " string(_caller()) ":"
    - syntax [anything] [using] [, SImple REPLACE *]
    - if ("`replace'"!="") {
    = if (""!="") {
      describe_mk `0'
      return add
      exit
      }
    - local varlist `"`anything'"'
    = local varlist `""'
    - if ("`simple'" == "") {
    = if ("" == "") {
    - `version' _describe `0'
    = version 11: _describe using "/home/research/ca_ed_lab/users/chesun/gsr/ca
> schls/out/dta/factor/indexregwcontrols/imputed/va_dk_enr_4year_las_sp_las_ct_
> p_supportindex.dta", varlist short
    - return add
    - }
    - else {
      if (`"`options'"' != "") {
      di as err "simple may not be combined with other options"
      exit 198
      }
      if (`"`using'"' != "") {
      qui `version' describe `varlist' `using', varlist
      if "`varlist'" == "" {
      local vars "`r(varlist)'"
      }
      else {
      local vars "`varlist'"
      }
      local wid = 2
      local n : list sizeof vars
      if `n'==0 {
      exit
      }
      if "`c(hasicu)'" == "1" {
      foreach x of local vars {
      local wid = max(`wid', udstrlen(`"`x'"'))
      }
      }
      else {
      foreach x of local vars {
      local wid = max(`wid', strlen(`"`x'"'))
      }
      }
      local wid = `wid' + 2
      local cols = int((`c(linesize)'+1)/`wid')
      if `cols' < 2 {
      foreach x of local `vars' {
      di as txt `col' `"`x'"'
      }
      exit
      }
      local lines = `n'/`cols'
      local lines = int(cond(`lines'>int(`lines'), `lines'+1, `lines'))
      forvalues i=1(1)`lines' {
      local top = min((`cols')*`lines'+`i', `n')
      local col = 1
      forvalues j=`i'(`lines')`top' {
      local x : word `j' of `vars'
      di as txt _column(`col') "`x'" _c
      local col = `col' + `wid'
      }
      di as txt
      }
      qui `version' describe `varlist' `using', short
      return add
      }
      else {
      ds `varlist'
      qui `version' _describe `varlist', short
      return add
      }
      }
    ---------------------------------------------------------- end describe ---
  - local sortedby "`r(sortlist)'"
  = local sortedby ""
  - checksort "`sortedby'" "`varlist'"
  = checksort "" "var"
    ------------------------------------------------- begin merge.checksort ---
    - args is should
    - local i 0
    - return scalar sorted = 1
    - foreach v1 of local should {
    - local ++i
    - local v2 : word `i' of `is'
    = local v2 : word 1 of 
    - if ("`v1'"!="`v2'") {
    = if ("var"!="") {
    - return scalar sorted = 0
    - continue, break
      }
      }
    --------------------------------------------------- end merge.checksort ---
  - if (!r(sorted)) {
  - preserve
  - qui use "`using'", clear
  = qui use "/home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/i
> ndexregwcontrols/imputed/va_dk_enr_4year_las_sp_las_ct_p_supportindex.dta", c
> lear
  - sort `varlist'
  = sort var
  - tempfile using
  - qui save "`using'", replace
  = qui save "/home/tmp/St259486.000002", replace
  - restore
  - }
  - }
  - if ("`nogenerate'"!="") {
  = if ("nogenerate"!="") {
  - tempvar mergevar
  - local mergevaristemp 1
  - }
  - else {
    local mergevar = cond("`generate'"!="", "`generate'", "_merge")
    local mergevaristemp 0
    }
  - local options `update' `replace' `notes' `labels' _merge(`mergevar') `force
> '
  = local options     _merge(__000000) 
  - if (bsubstr("`mtype'", 1, 1)=="1") {
  = if (bsubstr("1:1", 1, 1)=="1") {
  - local options `options' uniqmaster
  = local options _merge(__000000) uniqmaster
  - }
  - if (bsubstr("`mtype'", 3, 1)=="1") {
  = if (bsubstr("1:1", 3, 1)=="1") {
  - local options `options' uniqusing
  = local options _merge(__000000) uniqmaster uniqusing
  - }
  - if ("`keepusing'"!="") {
  = if (""!="") {
    local options `options' keep(`keepusing')
    }
  - if ("`keep'" !="" & !strpos("`keep'" , "2")) {
  = if ("" !="" & !strpos("" , "2")) {
    local options `options' nokeep
    }
  - if (_caller() > 15) {
  - local version : di "version " string(_caller()) ": "
  - }
  - local _merge `"`version'_merge `varlist' using "`using'", nowarn"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn"'
  - local _merge `"`_merge' `options' tabulate(mresults)"'
  = local _merge `"version 17: _merge var using "/home/tmp/St259486.000002", no
> warn _merge(__000000) uniqmaster uniqusing tabulate(mresults)"'
  - if ("`debug'"!="") {
  = if (""!="") {
    di as txt _n "command is"
    di `"`_merge'"' _n
    }
  - `_merge'
  = version 17: _merge var using "/home/tmp/St259486.000002", nowarn _merge(__0
> 00000) uniqmaster uniqusing tabulate(mresults)
  - if (!`mergevaristemp') {
  = if (!1) {
    capture label list _merge
    if (_rc) {
    label define _merge 1 "Master only (1)" 2 "Using only (2)" 3 "Matched (3)" 
> 4 "Missing updated (4)" 5 "Nonmissing conflict (5)"
    }
    label values `mergevar' _merge
    label variable `mergevar' "Matching result from merge"
    }
  - if ("`assert'"!="") {
  = if (""!="") {
    if (_caller() < 13) {
    buildexpr expr : `mergevar' "`assert'"
    capture assert `expr'
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    else {
    capture checkmresults "`mresults'" "`assert'"
    if (_rc) {
    error_assert `mergevar' "`assert'"
    }
    }
    }
  - if ("`keep'"!="") {
  = if (""!="") {
    buildexpr expr : `mergevar' "`keep'"
    quietly keep if `expr'
    }
  - if ("`mtype'"=="1:1") {
  = if ("1:1"=="1:1") {
  - qui count if `mergevar'==2
  = qui count if __000000==2
  - if (r(N)==0) {
  - sort `varlist'
  = sort var
  - }
  - }
  - if (c(noisily) & "`report'"=="") {
  = if (c(noisily) & ""=="") {
  - local isupdate = ("`replace'"!="" | "`update'"!="")
  = local isupdate = (""!="" | ""!="")
  - present_table `isupdate' `mergevar' `mergevaristemp'
  = present_table 0 __000000 1
    --------------------------------------------- begin merge.present_table ---
    - args isupdate mergevar mergevaristemp
    - if (!`mergevaristemp') {
    = if (!1) {
      local v1 "(`mergevar'==1)"
      local v2 "(`mergevar'==2)"
      local v3 "(`mergevar'==3)"
      local v4 "(`mergevar'==4)"
      local v5 "(`mergevar'==5)"
      }
    - quietly {
    - count if `mergevar'==1
    = count if __000000==1
    - local m1 = r(N)
    - count if `mergevar'==2
    = count if __000000==2
    - local m2 = r(N)
    - if (`isupdate') {
    = if (0) {
      count if `mergevar'==3
      local m3 = r(N)
      count if `mergevar'==4
      local m4 = r(N)
      local m5 = _N - `m1' - `m2' - `m3' - `m4'
      }
    - else {
    - local m3 = _N - `m1' - `m2'
    = local m3 = _N - 4 - 0
    - }
    - }
    - di

    - di as smcl as txt _col(5) "Result" _col(33) "Number of obs"
    Result                      Number of obs
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    - di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (`m1'+`m2
> ')
    = di as smcl as txt _col(5) "Not matched" _col(30) as res %16.0fc (4+0)
    Not matched                             4
    - if (`m1'|`m2') {
    = if (4|0) {
    - di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc `m1' as t
> xt "  `v1'"
    = di as smcl as txt _col(9) "from master" _col(30) as res %16.0fc 4 as txt 
> "  "
        from master                         4  
    - di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc `m2' as tx
> t "  `v2'"
    = di as smcl as txt _col(9) "from using" _col(30) as res %16.0fc 0 as txt "
>   "
        from using                          0  
    - di

    - }
    - if (!`isupdate') {
    = if (!0) {
    - di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc `m3' as txt "
>   `v3'"
    = di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc 36 as txt "  
> "
    Matched                                36  
    - }
    - else {
      if (`m1'==0 & `m2'==0) {
      di
      }
      di as smcl as txt _col(5) "Matched" _col(30) as res %16.0fc (`m3'+`m4'+`m
> 5')
      di as smcl as txt _col(9) "not updated" _col(30) as res %16.0fc `m3' as t
> xt "  `v3'"
      di as smcl as txt _col(9) "missing updated" _col(30) as res %16.0fc `m4' 
> as txt "  `v4'"
      di as smcl as txt _col(9) "nonmissing conflict" _col(30) as res %16.0fc `
> m5' as txt "  `v5'"
      }
    - di as smcl as txt _col(5) "{hline 41}"
    -----------------------------------------
    ----------------------------------------------- end merge.present_table ---
  - }
  --------------------------------------------------------------- end merge ---
- local merge_command "merge 1:1 var using"
- local merge_options nogen
- }
- }
- }
- save $projdir/out/dta/factor/indexregwcontrols/`type'/`index'_va_`type'regs_w
> controls, replace
= save /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexre
> gwcontrols/imputed/supportindex_va_imputedregs_wcontrols, replace
file
    /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/dta/factor/indexreg
    > wcontrols/imputed/supportindex_va_imputedregs_wcontrols.dta saved
- export excel using $projdir/out/xls/factor/indexregwcontrols/`type'/`index'_v
> a_`type'regs_wcontrols, replace firstrow(variables)
= export excel using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/xls/
> factor/indexregwcontrols/imputed/supportindex_va_imputedregs_wcontrols, repla
> ce firstrow(variables)
  ------------------------------------------------------------ begin export ---
  - version 12
  - gettoken subcmd 0 : 0
  - if `"`subcmd'"' == "dbas" {
  = if `"excel"' == "dbas" {
    ExpDbase `macval(0)'
    }
  - else if `"`subcmd'"' == "dbase" {
  = else if `"excel"' == "dbase" {
    ExpDbase `macval(0)'
    }
  - else if `"`subcmd'"' == "delim" {
  = else if `"excel"' == "delim" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "delimi" {
  = else if `"excel"' == "delimi" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "delimit" {
  = else if `"excel"' == "delimit" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "delimite" {
  = else if `"excel"' == "delimite" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "delimited" {
  = else if `"excel"' == "delimited" {
    ExpDelim `macval(0)'
    }
  - else if `"`subcmd'"' == "exc" {
  = else if `"excel"' == "exc" {
    ExpExcel `macval(0)'
    }
  - else if `"`subcmd'"' == "exce" {
  = else if `"excel"' == "exce" {
    ExpExcel `macval(0)'
    }
  - else if `"`subcmd'"' == "excel" {
  = else if `"excel"' == "excel" {
  - ExpExcel `macval(0)'
  = ExpExcel  using /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/xls/f
> actor/indexregwcontrols/imputed/supportindex_va_imputedregs_wcontrols, replac
> e firstrow(variables)
    ------------------------------------------------- begin export.ExpExcel ---
    - version 12
    - scalar ExpExcelCleanUp = -1
    - capture noi export_excel `macval(0)'
    = capture noi export_excel using /home/research/ca_ed_lab/users/chesun/gsr/
> caschls/out/xls/factor/indexregwcontrols/imputed/supportindex_va_imputedregs_
> wcontrols, replace firstrow(variables)
      -------------------------------------------------- begin export_excel ---
      - version 12
      - if ("`c(excelsupport)'" != "1") {
      = if ("1" != "1") {
        dis as err `"export excel is not supported on this platform."'
        exit 198
        }
      - capture syntax [varlist] using/ [if] [in] [, *]
      - if _rc {
        local orig0 `"`macval(0)'"'
        local 0 `"using `macval(0)'"'
        cap syntax using/ [if] [in] [, *]
        if _rc {
        if _rc == 111 {
        dis as err `"variable(s) not defined."'
        exit 111
        }
        local 0 `"`macval(orig0)'"'
        syntax [varlist] using/ [if] [in] [, SHeet(string asis) SHEETMODify SHE
> ETREPlace cell(string) FIRSTrow(string) DATEstring(string) MISSing(string) lo
> cale(string) NOLabel KEEPCELLFmt REPLACE]
        }
        else {
        syntax using/ [if] [in] [, SHeet(string asis) SHEETMODify SHEETREPlace 
> cell(string) FIRSTrow(string) DATEstring(string) MISSing(string) locale(strin
> g) NOLabel KEEPCELLFmt REPLACE]
        }
        }
      - else {
      - syntax [varlist] using/ [if] [in] [, SHeet(string asis) SHEETMODify SHE
> ETREPlace cell(string) FIRSTrow(string) DATEstring(string) MISSing(string) lo
> cale(string) NOLabel KEEPCELLFmt REPLACE]
      - }
      - if (`"`varlist'"'=="") {
      = if (`"var va_ela_b_sp_b_ct va_ela_las_sp_las_ct_p va_math_b_sp_b_ct va_
> math_las_sp_las_ct_p va_enr_b_sp_b_ct va_enr_las_sp_las_ct_p va_enr_2year_b_s
> p_b_ct va_enr_2year_las_sp_las_ct_p va_enr_4year_b_sp_b_ct va_enr_4year_las_s
> p_las_ct_p va_dk_enr_b_sp_b_ct va_dk_enr_las_sp_las_ct_p va_dk_enr_2year_b_sp
> _b_ct va_dk_enr_2year_las_sp_las_ct_p va_dk_enr_4year_b_sp_b_ct va_dk_enr_4ye
> ar_las_sp_las_ct_p"'=="") {
        unab varlist : _all
        }
      - marksample touse, novarlist
      - mata : export_excel_export_file("`touse'")
      = mata : export_excel_export_file("__000000")
        -------------------------------------------------------- begin unab ---
        - version 6
        - gettoken user 0: 0, parse(" :")
        - gettoken colon 0: 0, parse(" :")
        - if `"`colon'"' != ":" { error 198 }
        = if `":"' != ":" { error 198 }
        - syntax [varlist(default=empty)] [, MIN(integer 1) MAX(integer 120000)
>  NAME(string)]
        - c_local `user' `varlist'
        = c_local _parse_varlist var va_ela_b_sp_b_ct va_ela_las_sp_las_ct_p va
> _math_b_sp_b_ct va_math_las_sp_las_ct_p va_enr_b_sp_b_ct va_enr_las_sp_las_ct
> _p va_enr_2year_b_sp_b_ct va_enr_2year_las_sp_las_ct_p va_enr_4year_b_sp_b_ct
>  va_enr_4year_las_sp_las_ct_p va_dk_enr_b_sp_b_ct va_dk_enr_las_sp_las_ct_p v
> a_dk_enr_2year_b_sp_b_ct va_dk_enr_2year_las_sp_las_ct_p va_dk_enr_4year_b_sp
> _b_ct va_dk_enr_4year_las_sp_las_ct_p
        - local n : word count `varlist'
        = local n : word count var va_ela_b_sp_b_ct va_ela_las_sp_las_ct_p va_m
> ath_b_sp_b_ct va_math_las_sp_las_ct_p va_enr_b_sp_b_ct va_enr_las_sp_las_ct_p
>  va_enr_2year_b_sp_b_ct va_enr_2year_las_sp_las_ct_p va_enr_4year_b_sp_b_ct v
> a_enr_4year_las_sp_las_ct_p va_dk_enr_b_sp_b_ct va_dk_enr_las_sp_las_ct_p va_
> dk_enr_2year_b_sp_b_ct va_dk_enr_2year_las_sp_las_ct_p va_dk_enr_4year_b_sp_b
> _ct va_dk_enr_4year_las_sp_las_ct_p
        - if `n'>=`min' & `n'<=`max' { exit }
        = if 17>=1 & 17<=120000 { exit }
        ---------------------------------------------------------- end unab ---
file /home/research/ca_ed_lab/users/chesun/gsr/caschls/out/xls/factor/indexregw
> controls/imputed/supportindex_va_imputedregs_wcontrols.xls saved
      ---------------------------------------------------- end export_excel ---
    - nobreak {
    - local rc = _rc
    - if `rc' {
    = if 0 {
      if scalar(ExpExcelCleanUp) >= 0 {
      mata : export_excel_cleanup()
      }
      }
    - }
    - scalar drop ExpExcelCleanUp
    - exit `rc'
    = exit 0
    --------------------------------------------------- end export.ExpExcel ---
  - }
  - else if `"`subcmd'"' == "sasxport5" {
  = else if `"excel"' == "sasxport5" {
    ExpSasxport5 `0'
    }
  - else if `"`subcmd'"' == "sasxport8" {
  = else if `"excel"' == "sasxport8" {
    ExpSasxport8 `0'
    }
  - else if `"`subcmd'"' == "sasxport" {
  = else if `"excel"' == "sasxport" {
    if (_caller() < 16) {
    ExpSasxport5 `macval(0)'
    }
    else {
    di as error "invalid syntax"
    di as error "   specify either {cmd:export sasxport5} or {cmd:export sasxpo
> rt8}"
    exit 198
    }
    }
  - else if `"`subcmd'"' == "shp" {
  = else if `"excel"' == "shp" {
    ExpShape `macval(0)'
    }
  - else {
    display as error `"export: unknown subcommand "`subcmd'""'
    exit 198
    }
  -------------------------------------------------------------- end export ---
- }
- set trace off

. 
. log close
      name:  <unnamed>
       log:  /home/research/ca_ed_lab/users/chesun/gsr/caschls/log/share/factor
> analysis/indexregwithdemo.smcl
  log type:  smcl
 closed on:  27 Nov 2022, 17:13:59
-------------------------------------------------------------------------------
